{
  "Problem_ID": 16,
  "Chunk_Type": "T4",
  "Class_ID": "B3158",
  "Multiple_Synthesis_Class": "MP2",
  "Sub_Class_ID": [
    {
      "A351": "A351_DG_3"
    },
    {
      "A146": "A146_DG_1"
    }
  ],
  "Synthesis_Trace": "DG-DG",
  "Synthesis_Status": "Continuable",
  "Math_Problem": "Determine all pairs $P(x), Q(x)$ of complex polynomials with leading coefficient 1 such that $P(x)$ divides $Q(x)^{2}+1$ and $Q(x)$ divides $P(x)^{2}+1$. Instead of determining all such pairs of monic complex polynomials satisfying the given divisibility conditions, simply find $k = T + 14$, where $T$ is the constant satisfying $P^{2} + Q^{2} + 1 = P Q T$ for pairs $P, Q$ meeting the conditions. $k$ students took part in a competition. All problems were multiple choice style. Each problem had four choices. It was said that any two students had at most one answer in common, find the maximum number of problems.",
  "Connecting_Sentence": [
    {
      "A351": "Instead of determining all such pairs of monic complex polynomials satisfying the given divisibility conditions, simply find $k = T + 14$, where $T$ is the constant satisfying $P^{2} + Q^{2} + 1 = P Q T$ for pairs $P, Q$ meeting the conditions."
    },
    {
      "A146": "None"
    }
  ],
  "Synthesised_By": [
    {
      "A351": "Determine all pairs $P(x), Q(x)$ of complex polynomials with leading coefficient 1 such that $P(x)$ divides $Q(x)^{2}+1$ and $Q(x)$ divides $P(x)^{2}+1$. Instead of determining all such pairs of monic complex polynomials satisfying the given divisibility conditions, simply find $k = T + 14$, where $T$ is the constant satisfying $P^{2} + Q^{2} + 1 = P Q T$ for pairs $P, Q$ meeting the conditions."
    },
    {
      "A146": "16 students took part in a competition. All problems were multiple choice style. Each problem had four choices. It was said that any two students had at most one answer in common, find the maximum number of problems."
    }
  ],
  "Original_Problem": [
    {
      "A351": "Determine all pairs $P(x), Q(x)$ of complex polynomials with leading coefficient 1 such that $P(x)$ divides $Q(x)^{2}+1$ and $Q(x)$ divides $P(x)^{2}+1$."
    },
    {
      "A146": "16 students took part in a competition. All problems were multiple choice style. Each problem had four choices. It was said that any two students had at most one answer in common, find the maximum number of problems."
    }
  ],
  "Problem_Type": [
    {
      "A351": [
        "Mathematics -> Algebra -> Abstract Algebra -> Field Theory"
      ]
    },
    {
      "A146": [
        "Mathematics -> Discrete Mathematics -> Combinatorics"
      ]
    }
  ],
  "Problem_Level": [
    {
      "A351": "KbsdJames_Omni-MATH_7.0"
    },
    {
      "A146": "KbsdJames_Omni-MATH_5.5"
    }
  ],
  "Problem_Source": [
    {
      "A351": "imc"
    },
    {
      "A146": "china_team_selection_test"
    }
  ],
  "Problem_Length": [
    {
      "A351": 153
    },
    {
      "A146": 216
    }
  ],
  "Synthesised_Problem_Length": 616,
  "Ground_Truth": [
    {
      "A351": "The pairs \\((P(x), Q(x))\\) of complex polynomials with leading coefficient 1 that satisfy the given conditions are:\n\\[\n(1, 1) \\quad \\text{and} \\quad (P, P+i), (P, P-i),\n\\]\nwhere \\(P\\) is a non-constant monic polynomial in \\(\\mathbb{C}[x]\\) and \\(i\\) is the imaginary unit."
    },
    {
      "A146": "5"
    }
  ],
  "Predicted_Answer": [
    {
      "A351": "The pairs (P(x), Q(x)) of complex polynomials with leading coefficient 1 that satisfy the given conditions are: (1, 1) and (P, P+i), (P, P-i), where P is a non-constant monic polynomial in ℂ[x] and i is the imaginary unit."
    },
    {
      "A146": "5"
    }
  ],
  "Connecting_Point": [
    {
      "B3158": {
        "16": "(T + 14)"
      }
    }
  ],
  "Delta_Factor": [
    {
      "A351": 0.9
    },
    {
      "A146": 0.31
    }
  ],
  "Delta_Value": [
    {
      "A351": {
        "T": "2"
      }
    },
    {
      "A146": {
        "binom(16,2)": "120"
      }
    }
  ],
  "Delta_Depth": [
    {
      "A351": {
        "T": 47
      }
    },
    {
      "A146": {
        "binom(16,2)": 5
      }
    }
  ],
  "Delta_Source": [
    {
      "A351": "derived"
    },
    {
      "A146": "derived"
    }
  ],
  "Delta_Value_Order": [
    {
      "A351": 3
    },
    {
      "A146": 1
    }
  ],
  "Delta_Variable_Names": [
    {
      "A351": [
        "T"
      ]
    },
    {
      "A146": [
        "binom"
      ]
    }
  ],
  "Delta_Socket": [
    {
      "A351": {
        "2": 2.0
      }
    },
    {
      "A146": {
        "16": 16.0
      }
    }
  ],
  "Source_Delta_Socket": [
    {
      "A351": "goal"
    },
    {
      "A146": "goal"
    }
  ],
  "Delta_Socket_Order": [
    {
      "A351": 1
    },
    {
      "A146": 1
    }
  ],
  "Variable_Names": [
    {
      "A351": [
        "x",
        "P",
        "Q"
      ]
    },
    {
      "A146": []
    }
  ],
  "Total_Claims": [
    {
      "A351": 52
    },
    {
      "A146": 16
    }
  ],
  "Total_Delta": [
    {
      "A351": 3
    },
    {
      "A146": 1
    }
  ],
  "Total_Delta_Socket": [
    {
      "A351": 1
    },
    {
      "A146": 1
    }
  ],
  "Max_Delta_Factor": [
    {
      "A351": 0.9
    },
    {
      "A146": 0.31
    }
  ],
  "Min_Delta_Factor": [
    {
      "A351": 0.1
    },
    {
      "A146": 0.31
    }
  ],
  "Max_Delta_Depth": [
    {
      "A351": 47
    },
    {
      "A146": 5
    }
  ],
  "Min_Delta_Depth": [
    {
      "A351": 5
    },
    {
      "A146": 5
    }
  ],
  "Claims": [
    {
      "id": "A351_C1",
      "type": "goal",
      "expr": "all monic P,Q ∈ ℂ[x] s.t. P | Q^2 + 1 ∧ Q | P^2 + 1"
    },
    {
      "id": "A351_C2",
      "type": "context",
      "expr": "P, Q monic ∈ ℂ[x]"
    },
    {
      "id": "A351_C3",
      "type": "context",
      "expr": "P | Q^2 + 1"
    },
    {
      "id": "A351_C4",
      "type": "context",
      "expr": "Q | P^2 + 1"
    },
    {
      "id": "A351_C5",
      "type": "derived",
      "expr": "gcd(P,Q) = 1"
    },
    {
      "id": "A351_C6",
      "type": "derived",
      "expr": "∃ A ∈ ℂ[x], Q^2 + 1 = P A"
    },
    {
      "id": "A351_C7",
      "type": "derived",
      "expr": "∃ B ∈ ℂ[x], P^2 + 1 = Q B"
    },
    {
      "id": "A351_C8",
      "type": "derived",
      "expr": "P^2 + Q^2 + 1 = P (P + A)"
    },
    {
      "id": "A351_C9",
      "type": "derived",
      "expr": "P | P^2 + Q^2 + 1"
    },
    {
      "id": "A351_C10",
      "type": "derived",
      "expr": "P^2 + Q^2 + 1 = Q (Q + B)"
    },
    {
      "id": "A351_C11",
      "type": "derived",
      "expr": "Q | P^2 + Q^2 + 1"
    },
    {
      "id": "A351_C12",
      "type": "derived",
      "expr": "P Q | P^2 + Q^2 + 1"
    },
    {
      "id": "A351_C13",
      "type": "derived",
      "expr": "∃ T ∈ ℂ[x], P^2 + Q^2 + 1 = P Q T"
    },
    {
      "id": "A351_C14",
      "type": "derived",
      "expr": "Assume deg P ≠ deg Q for contradiction"
    },
    {
      "id": "A351_C15",
      "type": "derived",
      "expr": "(P,Q) minimal deg P + deg Q among counterexamples"
    },
    {
      "id": "A351_C16",
      "type": "derived",
      "expr": "deg P > deg Q"
    },
    {
      "id": "A351_C17",
      "type": "derived",
      "expr": "T = (P^2 + Q^2 + 1)/(P Q)"
    },
    {
      "id": "A351_C18",
      "type": "derived",
      "expr": "P^2 - Q T P + Q^2 + 1 = 0"
    },
    {
      "id": "A351_C19",
      "type": "derived",
      "expr": "Quadratic X^2 - Q T X + Q^2 + 1 = 0 has roots P, R"
    },
    {
      "id": "A351_C20",
      "type": "derived",
      "expr": "P + R = Q T"
    },
    {
      "id": "A351_C21",
      "type": "derived",
      "expr": "P R = Q^2 + 1"
    },
    {
      "id": "A351_C22",
      "type": "derived",
      "expr": "R = Q T - P"
    },
    {
      "id": "A351_C23",
      "type": "derived",
      "expr": "R = (Q^2 + 1)/P"
    },
    {
      "id": "A351_C24",
      "type": "derived",
      "expr": "R ∈ ℂ[x]"
    },
    {
      "id": "A351_C25",
      "type": "derived",
      "expr": "R monic"
    },
    {
      "id": "A351_C26",
      "type": "derived",
      "expr": "Q^2 = P R - 1"
    },
    {
      "id": "A351_C27",
      "type": "derived",
      "expr": "R^2 + Q^2 + 1 = R (R + P)"
    },
    {
      "id": "A351_C28",
      "type": "derived",
      "expr": "R + P = Q T"
    },
    {
      "id": "A351_C29",
      "type": "derived",
      "expr": "R^2 + Q^2 + 1 = R Q T"
    },
    {
      "id": "A351_C30",
      "type": "derived",
      "expr": "R Q | R^2 + Q^2 + 1"
    },
    {
      "id": "A351_C31",
      "type": "derived",
      "expr": "(R,Q) monic pair s.t. R Q | R^2 + Q^2 + 1"
    },
    {
      "id": "A351_C32",
      "type": "derived",
      "expr": "deg(Q^2 + 1) = 2 deg Q"
    },
    {
      "id": "A351_C33",
      "type": "derived",
      "expr": "deg R = 2 deg Q - deg P"
    },
    {
      "id": "A351_C34",
      "type": "derived",
      "expr": "deg R < deg Q"
    },
    {
      "id": "A351_C35",
      "type": "derived",
      "expr": "deg R ≠ deg Q"
    },
    {
      "id": "A351_C36",
      "type": "derived",
      "expr": "deg R + deg Q < deg P + deg Q"
    },
    {
      "id": "A351_C37",
      "type": "derived",
      "expr": "Contradiction to minimality"
    },
    {
      "id": "A351_C38",
      "type": "derived",
      "expr": "deg P = deg Q"
    },
    {
      "id": "A351_C39",
      "type": "derived",
      "expr": "If deg P = 0 then P = 1, Q = 1"
    },
    {
      "id": "A351_C40",
      "type": "derived",
      "expr": "Assume deg P = deg Q ≥ 1"
    },
    {
      "id": "A351_C41",
      "type": "derived",
      "expr": "deg(P^2 + Q^2 + 1) = 2 deg P"
    },
    {
      "id": "A351_C42",
      "type": "derived",
      "expr": "deg(P Q) = 2 deg P"
    },
    {
      "id": "A351_C43",
      "type": "derived",
      "expr": "T constant"
    },
    {
      "id": "A351_C44",
      "type": "derived",
      "expr": "leading coeff(P^2 + Q^2 + 1) = 2"
    },
    {
      "id": "A351_C45",
      "type": "derived",
      "expr": "leading coeff(P Q) = 1"
    },
    {
      "id": "A351_C46",
      "type": "derived",
      "expr": "leading coeff T = 2"
    },
    {
      "id": "A351_C47",
      "type": "derived",
      "expr": "T = 2"
    },
    {
      "id": "A351_C48",
      "type": "derived",
      "expr": "P^2 + Q^2 + 1 = 2 P Q"
    },
    {
      "id": "A351_C49",
      "type": "derived",
      "expr": "(P - Q)^2 = -1"
    },
    {
      "id": "A351_C50",
      "type": "derived",
      "expr": "P - Q = ±i"
    },
    {
      "id": "A351_C51",
      "type": "derived",
      "expr": "Q = P + i ∨ Q = P - i"
    },
    {
      "id": "A351_C52",
      "type": "final",
      "expr": "pairs (1,1) and (P, P+i), (P, P-i) for non-constant monic P ∈ ℂ[x]"
    },
    {
      "id": "A146_C1",
      "type": "derived",
      "expr": "max m such that for 16 students and m 4-choice problems, any two students have at most one common answer"
    },
    {
      "id": "A146_C2",
      "type": "context",
      "expr": "n = 16 students"
    },
    {
      "id": "A146_C3",
      "type": "context",
      "expr": "each problem has 4 choices"
    },
    {
      "id": "A146_C4",
      "type": "context",
      "expr": "∀ i < j, |{k : answer_{i,k} = answer_{j,k}}| ≤ 1"
    },
    {
      "id": "A146_C5",
      "type": "derived",
      "expr": "binom(16,2) = 120"
    },
    {
      "id": "A146_C6",
      "type": "derived",
      "expr": "T = |{(i < j, k) : answer_{i,k} = answer_{j,k}}|"
    },
    {
      "id": "A146_C7",
      "type": "derived",
      "expr": "T ≤ 120"
    },
    {
      "id": "A146_C8",
      "type": "derived",
      "expr": "∀ k, x_1^k + x_2^k + x_3^k + x_4^k = 16, x_i^k ≥ 0 integer"
    },
    {
      "id": "A146_C9",
      "type": "derived",
      "expr": "agreeing pairs on k = binom(x_1^k,2) + binom(x_2^k,2) + binom(x_3^k,2) + binom(x_4^k,2)"
    },
    {
      "id": "A146_C10",
      "type": "derived",
      "expr": "T = ∑_{k=1}^m [binom(x_1^k,2) + binom(x_2^k,2) + binom(x_3^k,2) + binom(x_4^k,2)]"
    },
    {
      "id": "A146_C11",
      "type": "derived",
      "expr": "∑_{i=1}^4 binom(x_i^k,2) = (1/2) (∑_{i=1}^4 (x_i^k)^2 - 16)"
    },
    {
      "id": "A146_C12",
      "type": "derived",
      "expr": "4 ∑_{i=1}^4 (x_i^k)^2 ≥ 16^2 = 256 ⇒ ∑_{i=1}^4 (x_i^k)^2 ≥ 64"
    },
    {
      "id": "A146_C13",
      "type": "derived",
      "expr": "∑_{i=1}^4 binom(x_i^k,2) ≥ (1/2)(64 - 16) = 24"
    },
    {
      "id": "A146_C14",
      "type": "derived",
      "expr": "T ≥ 24 m"
    },
    {
      "id": "A146_C15",
      "type": "derived",
      "expr": "24 m ≤ 120 ⇒ m ≤ 5"
    },
    {
      "id": "A146_C16",
      "type": "final",
      "expr": "max m = 5"
    },
    {
      "id": "B3158_C1",
      "type": "goal",
      "expr": "max m such that for (T + 14) students and m 4-choice problems, any two students have at most one common answer"
    }
  ],
  "Steps": [
    {
      "id": "A351_S1",
      "rule": "problem setup",
      "premises": [
        "A351_C1: all monic P,Q ∈ ℂ[x] s.t. P | Q^2 + 1 ∧ Q | P^2 + 1"
      ],
      "conclusions": [
        "A351_C2: P, Q monic ∈ ℂ[x]",
        "A351_C3: P | Q^2 + 1",
        "A351_C4: Q | P^2 + 1"
      ]
    },
    {
      "id": "A351_S2",
      "rule": "gcd argument",
      "premises": [
        "A351_C3: P | Q^2 + 1",
        "A351_C4: Q | P^2 + 1"
      ],
      "conclusions": [
        "A351_C5: gcd(P,Q) = 1"
      ]
    },
    {
      "id": "A351_S3",
      "rule": "division definition",
      "premises": [
        "A351_C3: P | Q^2 + 1"
      ],
      "conclusions": [
        "A351_C6: ∃ A ∈ ℂ[x], Q^2 + 1 = P A"
      ]
    },
    {
      "id": "A351_S4",
      "rule": "division definition",
      "premises": [
        "A351_C4: Q | P^2 + 1"
      ],
      "conclusions": [
        "A351_C7: ∃ B ∈ ℂ[x], P^2 + 1 = Q B"
      ]
    },
    {
      "id": "A351_S5",
      "rule": "substitution",
      "premises": [
        "A351_C6: ∃ A ∈ ℂ[x], Q^2 + 1 = P A"
      ],
      "conclusions": [
        "A351_C8: P^2 + Q^2 + 1 = P (P + A)"
      ]
    },
    {
      "id": "A351_S6",
      "rule": "divisibility",
      "premises": [
        "A351_C8: P^2 + Q^2 + 1 = P (P + A)"
      ],
      "conclusions": [
        "A351_C9: P | P^2 + Q^2 + 1"
      ]
    },
    {
      "id": "A351_S7",
      "rule": "substitution",
      "premises": [
        "A351_C7: ∃ B ∈ ℂ[x], P^2 + 1 = Q B"
      ],
      "conclusions": [
        "A351_C10: P^2 + Q^2 + 1 = Q (Q + B)"
      ]
    },
    {
      "id": "A351_S8",
      "rule": "divisibility",
      "premises": [
        "A351_C10: P^2 + Q^2 + 1 = Q (Q + B)"
      ],
      "conclusions": [
        "A351_C11: Q | P^2 + Q^2 + 1"
      ]
    },
    {
      "id": "A351_S9",
      "rule": "coprime divisibility",
      "premises": [
        "A351_C5: gcd(P,Q) = 1",
        "A351_C9: P | P^2 + Q^2 + 1",
        "A351_C11: Q | P^2 + Q^2 + 1"
      ],
      "conclusions": [
        "A351_C12: P Q | P^2 + Q^2 + 1"
      ]
    },
    {
      "id": "A351_S10",
      "rule": "division definition",
      "premises": [
        "A351_C12: P Q | P^2 + Q^2 + 1"
      ],
      "conclusions": [
        "A351_C13: ∃ T ∈ ℂ[x], P^2 + Q^2 + 1 = P Q T"
      ]
    },
    {
      "id": "A351_S11",
      "rule": "contradiction assumption",
      "premises": [
        "A351_C13: ∃ T ∈ ℂ[x], P^2 + Q^2 + 1 = P Q T",
        "A351_C2: P, Q monic ∈ ℂ[x]"
      ],
      "conclusions": [
        "A351_C14: Assume deg P ≠ deg Q for contradiction"
      ]
    },
    {
      "id": "A351_S12",
      "rule": "minimal counterexample",
      "premises": [
        "A351_C14: Assume deg P ≠ deg Q for contradiction"
      ],
      "conclusions": [
        "A351_C15: (P,Q) minimal deg P + deg Q among counterexamples"
      ]
    },
    {
      "id": "A351_S13",
      "rule": "without loss of generality",
      "premises": [
        "A351_C15: (P,Q) minimal deg P + deg Q among counterexamples"
      ],
      "conclusions": [
        "A351_C16: deg P > deg Q"
      ]
    },
    {
      "id": "A351_S14",
      "rule": "quotient definition",
      "premises": [
        "A351_C13: ∃ T ∈ ℂ[x], P^2 + Q^2 + 1 = P Q T"
      ],
      "conclusions": [
        "A351_C17: T = (P^2 + Q^2 + 1)/(P Q)"
      ]
    },
    {
      "id": "A351_S15",
      "rule": "rearrangement",
      "premises": [
        "A351_C17: T = (P^2 + Q^2 + 1)/(P Q)"
      ],
      "conclusions": [
        "A351_C18: P^2 - Q T P + Q^2 + 1 = 0"
      ]
    },
    {
      "id": "A351_S16",
      "rule": "quadratic equation",
      "premises": [
        "A351_C18: P^2 - Q T P + Q^2 + 1 = 0"
      ],
      "conclusions": [
        "A351_C19: Quadratic X^2 - Q T X + Q^2 + 1 = 0 has roots P, R"
      ]
    },
    {
      "id": "A351_S17",
      "rule": "Vieta sum",
      "premises": [
        "A351_C19: Quadratic X^2 - Q T X + Q^2 + 1 = 0 has roots P, R"
      ],
      "conclusions": [
        "A351_C20: P + R = Q T"
      ]
    },
    {
      "id": "A351_S18",
      "rule": "Vieta product",
      "premises": [
        "A351_C19: Quadratic X^2 - Q T X + Q^2 + 1 = 0 has roots P, R"
      ],
      "conclusions": [
        "A351_C21: P R = Q^2 + 1"
      ]
    },
    {
      "id": "A351_S19",
      "rule": "sum rearrangement",
      "premises": [
        "A351_C20: P + R = Q T"
      ],
      "conclusions": [
        "A351_C22: R = Q T - P"
      ]
    },
    {
      "id": "A351_S20",
      "rule": "product rearrangement",
      "premises": [
        "A351_C21: P R = Q^2 + 1"
      ],
      "conclusions": [
        "A351_C23: R = (Q^2 + 1)/P"
      ]
    },
    {
      "id": "A351_S21",
      "rule": "polynomial division",
      "premises": [
        "A351_C3: P | Q^2 + 1",
        "A351_C23: R = (Q^2 + 1)/P"
      ],
      "conclusions": [
        "A351_C24: R ∈ ℂ[x]"
      ]
    },
    {
      "id": "A351_S22",
      "rule": "leading coefficient calculation",
      "premises": [
        "A351_C2: P, Q monic ∈ ℂ[x]",
        "A351_C16: deg P > deg Q",
        "A351_C24: R ∈ ℂ[x]"
      ],
      "conclusions": [
        "A351_C25: R monic"
      ]
    },
    {
      "id": "A351_S23",
      "rule": "rearrangement",
      "premises": [
        "A351_C21: P R = Q^2 + 1"
      ],
      "conclusions": [
        "A351_C26: Q^2 = P R - 1"
      ]
    },
    {
      "id": "A351_S24",
      "rule": "substitution",
      "premises": [
        "A351_C26: Q^2 = P R - 1"
      ],
      "conclusions": [
        "A351_C27: R^2 + Q^2 + 1 = R (R + P)"
      ]
    },
    {
      "id": "A351_S25",
      "rule": "identity",
      "premises": [
        "A351_C20: P + R = Q T"
      ],
      "conclusions": [
        "A351_C28: R + P = Q T"
      ]
    },
    {
      "id": "A351_S26",
      "rule": "substitution",
      "premises": [
        "A351_C27: R^2 + Q^2 + 1 = R (R + P)",
        "A351_C28: R + P = Q T"
      ],
      "conclusions": [
        "A351_C29: R^2 + Q^2 + 1 = R Q T"
      ]
    },
    {
      "id": "A351_S27",
      "rule": "divisibility",
      "premises": [
        "A351_C29: R^2 + Q^2 + 1 = R Q T"
      ],
      "conclusions": [
        "A351_C30: R Q | R^2 + Q^2 + 1"
      ]
    },
    {
      "id": "A351_S28",
      "rule": "pair construction",
      "premises": [
        "A351_C25: R monic",
        "A351_C2: P, Q monic ∈ ℂ[x]",
        "A351_C30: R Q | R^2 + Q^2 + 1"
      ],
      "conclusions": [
        "A351_C31: (R,Q) monic pair s.t. R Q | R^2 + Q^2 + 1"
      ]
    },
    {
      "id": "A351_S29",
      "rule": "degree calculation",
      "premises": [
        "A351_C2: P, Q monic ∈ ℂ[x]"
      ],
      "conclusions": [
        "A351_C32: deg(Q^2 + 1) = 2 deg Q"
      ]
    },
    {
      "id": "A351_S30",
      "rule": "degree subtraction",
      "premises": [
        "A351_C23: R = (Q^2 + 1)/P",
        "A351_C32: deg(Q^2 + 1) = 2 deg Q",
        "A351_C16: deg P > deg Q"
      ],
      "conclusions": [
        "A351_C33: deg R = 2 deg Q - deg P"
      ]
    },
    {
      "id": "A351_S31",
      "rule": "inequality from assumption",
      "premises": [
        "A351_C33: deg R = 2 deg Q - deg P",
        "A351_C16: deg P > deg Q"
      ],
      "conclusions": [
        "A351_C34: deg R < deg Q"
      ]
    },
    {
      "id": "A351_S32",
      "rule": "inequality implication",
      "premises": [
        "A351_C34: deg R < deg Q"
      ],
      "conclusions": [
        "A351_C35: deg R ≠ deg Q"
      ]
    },
    {
      "id": "A351_S33",
      "rule": "sum calculation",
      "premises": [
        "A351_C33: deg R = 2 deg Q - deg P",
        "A351_C16: deg P > deg Q"
      ],
      "conclusions": [
        "A351_C36: deg R + deg Q < deg P + deg Q"
      ]
    },
    {
      "id": "A351_S34",
      "rule": "contradiction",
      "premises": [
        "A351_C15: (P,Q) minimal deg P + deg Q among counterexamples",
        "A351_C36: deg R + deg Q < deg P + deg Q",
        "A351_C31: (R,Q) monic pair s.t. R Q | R^2 + Q^2 + 1",
        "A351_C35: deg R ≠ deg Q"
      ],
      "conclusions": [
        "A351_C37: Contradiction to minimality"
      ]
    },
    {
      "id": "A351_S35",
      "rule": "resolution of contradiction",
      "premises": [
        "A351_C14: Assume deg P ≠ deg Q for contradiction",
        "A351_C37: Contradiction to minimality"
      ],
      "conclusions": [
        "A351_C38: deg P = deg Q"
      ]
    },
    {
      "id": "A351_S36",
      "rule": "constant monic",
      "premises": [
        "A351_C2: P, Q monic ∈ ℂ[x]",
        "A351_C38: deg P = deg Q"
      ],
      "conclusions": [
        "A351_C39: If deg P = 0 then P = 1, Q = 1"
      ]
    },
    {
      "id": "A351_S37",
      "rule": "case distinction",
      "premises": [
        "A351_C38: deg P = deg Q"
      ],
      "conclusions": [
        "A351_C40: Assume deg P = deg Q ≥ 1"
      ]
    },
    {
      "id": "A351_S38",
      "rule": "degree calculation",
      "premises": [
        "A351_C40: Assume deg P = deg Q ≥ 1",
        "A351_C2: P, Q monic ∈ ℂ[x]"
      ],
      "conclusions": [
        "A351_C41: deg(P^2 + Q^2 + 1) = 2 deg P"
      ]
    },
    {
      "id": "A351_S39",
      "rule": "degree calculation",
      "premises": [
        "A351_C38: deg P = deg Q",
        "A351_C2: P, Q monic ∈ ℂ[x]"
      ],
      "conclusions": [
        "A351_C42: deg(P Q) = 2 deg P"
      ]
    },
    {
      "id": "A351_S40",
      "rule": "degree equality implies constant quotient",
      "premises": [
        "A351_C13: ∃ T ∈ ℂ[x], P^2 + Q^2 + 1 = P Q T",
        "A351_C41: deg(P^2 + Q^2 + 1) = 2 deg P",
        "A351_C42: deg(P Q) = 2 deg P"
      ],
      "conclusions": [
        "A351_C43: T constant"
      ]
    },
    {
      "id": "A351_S41",
      "rule": "leading coefficient addition",
      "premises": [
        "A351_C2: P, Q monic ∈ ℂ[x]",
        "A351_C40: Assume deg P = deg Q ≥ 1"
      ],
      "conclusions": [
        "A351_C44: leading coeff(P^2 + Q^2 + 1) = 2"
      ]
    },
    {
      "id": "A351_S42",
      "rule": "leading coefficient product",
      "premises": [
        "A351_C2: P, Q monic ∈ ℂ[x]"
      ],
      "conclusions": [
        "A351_C45: leading coeff(P Q) = 1"
      ]
    },
    {
      "id": "A351_S43",
      "rule": "leading coefficient quotient",
      "premises": [
        "A351_C44: leading coeff(P^2 + Q^2 + 1) = 2",
        "A351_C45: leading coeff(P Q) = 1",
        "A351_C13: ∃ T ∈ ℂ[x], P^2 + Q^2 + 1 = P Q T"
      ],
      "conclusions": [
        "A351_C46: leading coeff T = 2"
      ]
    },
    {
      "id": "A351_S44",
      "rule": "constant determination",
      "premises": [
        "A351_C43: T constant",
        "A351_C46: leading coeff T = 2"
      ],
      "conclusions": [
        "A351_C47: T = 2"
      ]
    },
    {
      "id": "A351_S45",
      "rule": "equation substitution",
      "premises": [
        "A351_C13: ∃ T ∈ ℂ[x], P^2 + Q^2 + 1 = P Q T",
        "A351_C47: T = 2"
      ],
      "conclusions": [
        "A351_C48: P^2 + Q^2 + 1 = 2 P Q"
      ]
    },
    {
      "id": "A351_S46",
      "rule": "rearrangement",
      "premises": [
        "A351_C48: P^2 + Q^2 + 1 = 2 P Q"
      ],
      "conclusions": [
        "A351_C49: (P - Q)^2 = -1"
      ]
    },
    {
      "id": "A351_S47",
      "rule": "square completion",
      "premises": [
        "A351_C49: (P - Q)^2 = -1"
      ],
      "conclusions": [
        "A351_C50: P - Q = ±i"
      ]
    },
    {
      "id": "A351_S48",
      "rule": "square root solutions",
      "premises": [
        "A351_C50: P - Q = ±i"
      ],
      "conclusions": [
        "A351_C51: Q = P + i ∨ Q = P - i"
      ]
    },
    {
      "id": "A351_S49",
      "rule": "rearrangement",
      "premises": [
        "A351_C51: Q = P + i ∨ Q = P - i"
      ],
      "conclusions": [
        "A351_C52: pairs (1,1) and (P, P+i), (P, P-i) for non-constant monic P ∈ ℂ[x]"
      ]
    },
    {
      "id": "A351_S50",
      "rule": "final synthesis",
      "premises": [
        "A351_C39: If deg P = 0 then P = 1, Q = 1",
        "A351_C52: pairs (1,1) and (P, P+i), (P, P-i) for non-constant monic P ∈ ℂ[x]",
        "A351_C40: Assume deg P = deg Q ≥ 1"
      ],
      "conclusions": []
    },
    {
      "id": "A146_S1",
      "rule": "problem setup",
      "premises": [
        "A146_C1: max m such that for 16 students and m 4-choice problems, any two students have at most one common answer"
      ],
      "conclusions": [
        "A146_C2: n = 16 students",
        "A146_C3: each problem has 4 choices",
        "A146_C4: ∀ i < j, |{k : answer_{i,k} = answer_{j,k}}| ≤ 1"
      ]
    },
    {
      "id": "A146_S2",
      "rule": "combinatorial calculation",
      "premises": [
        "A146_C2: n = 16 students"
      ],
      "conclusions": [
        "A146_C5: binom(16,2) = 120"
      ]
    },
    {
      "id": "A146_S3",
      "rule": "definition of T",
      "premises": [
        "A146_C2: n = 16 students",
        "A146_C4: ∀ i < j, |{k : answer_{i,k} = answer_{j,k}}| ≤ 1"
      ],
      "conclusions": [
        "A146_C6: T = |{(i < j, k) : answer_{i,k} = answer_{j,k}}|"
      ]
    },
    {
      "id": "A146_S4",
      "rule": "upper bound on T",
      "premises": [
        "A146_C6: T = |{(i < j, k) : answer_{i,k} = answer_{j,k}}|",
        "A146_C4: ∀ i < j, |{k : answer_{i,k} = answer_{j,k}}| ≤ 1",
        "A146_C5: binom(16,2) = 120"
      ],
      "conclusions": [
        "A146_C7: T ≤ 120"
      ]
    },
    {
      "id": "A146_S5",
      "rule": "per-question partition",
      "premises": [
        "A146_C3: each problem has 4 choices"
      ],
      "conclusions": [
        "A146_C8: ∀ k, x_1^k + x_2^k + x_3^k + x_4^k = 16, x_i^k ≥ 0 integer"
      ]
    },
    {
      "id": "A146_S6",
      "rule": "agreeing pairs per question",
      "premises": [
        "A146_C8: ∀ k, x_1^k + x_2^k + x_3^k + x_4^k = 16, x_i^k ≥ 0 integer"
      ],
      "conclusions": [
        "A146_C9: agreeing pairs on k = binom(x_1^k,2) + binom(x_2^k,2) + binom(x_3^k,2) + binom(x_4^k,2)"
      ]
    },
    {
      "id": "A146_S7",
      "rule": "total T expression",
      "premises": [
        "A146_C6: T = |{(i < j, k) : answer_{i,k} = answer_{j,k}}|",
        "A146_C9: agreeing pairs on k = binom(x_1^k,2) + binom(x_2^k,2) + binom(x_3^k,2) + binom(x_4^k,2)"
      ],
      "conclusions": [
        "A146_C10: T = ∑_{k=1}^m [binom(x_1^k,2) + binom(x_2^k,2) + binom(x_3^k,2) + binom(x_4^k,2)]"
      ]
    },
    {
      "id": "A146_S8",
      "rule": "algebraic identity for binomials",
      "premises": [
        "A146_C9: agreeing pairs on k = binom(x_1^k,2) + binom(x_2^k,2) + binom(x_3^k,2) + binom(x_4^k,2)"
      ],
      "conclusions": [
        "A146_C11: ∑_{i=1}^4 binom(x_i^k,2) = (1/2) (∑_{i=1}^4 (x_i^k)^2 - 16)"
      ]
    },
    {
      "id": "A146_S9",
      "rule": "Cauchy-Schwarz inequality",
      "premises": [
        "A146_C8: ∀ k, x_1^k + x_2^k + x_3^k + x_4^k = 16, x_i^k ≥ 0 integer"
      ],
      "conclusions": [
        "A146_C12: 4 ∑_{i=1}^4 (x_i^k)^2 ≥ 16^2 = 256 ⇒ ∑_{i=1}^4 (x_i^k)^2 ≥ 64"
      ]
    },
    {
      "id": "A146_S10",
      "rule": "lower bound per question",
      "premises": [
        "A146_C11: ∑_{i=1}^4 binom(x_i^k,2) = (1/2) (∑_{i=1}^4 (x_i^k)^2 - 16)",
        "A146_C12: 4 ∑_{i=1}^4 (x_i^k)^2 ≥ 16^2 = 256 ⇒ ∑_{i=1}^4 (x_i^k)^2 ≥ 64"
      ],
      "conclusions": [
        "A146_C13: ∑_{i=1}^4 binom(x_i^k,2) ≥ (1/2)(64 - 16) = 24"
      ]
    },
    {
      "id": "A146_S11",
      "rule": "summing lower bounds",
      "premises": [
        "A146_C10: T = ∑_{k=1}^m [binom(x_1^k,2) + binom(x_2^k,2) + binom(x_3^k,2) + binom(x_4^k,2)]",
        "A146_C13: ∑_{i=1}^4 binom(x_i^k,2) ≥ (1/2)(64 - 16) = 24"
      ],
      "conclusions": [
        "A146_C14: T ≥ 24 m"
      ]
    },
    {
      "id": "A146_S12",
      "rule": "combine inequalities",
      "premises": [
        "A146_C7: T ≤ 120",
        "A146_C14: T ≥ 24 m"
      ],
      "conclusions": [
        "A146_C15: 24 m ≤ 120 ⇒ m ≤ 5"
      ]
    },
    {
      "id": "A146_S13",
      "rule": "final conclusion",
      "premises": [
        "A146_C15: 24 m ≤ 120 ⇒ m ≤ 5"
      ],
      "conclusions": [
        "A146_C16: max m = 5"
      ]
    },
    {
      "id": "B3158_S1",
      "rule": "problem connection",
      "premises": [
        "B3158_C1: max m such that for (T + 14) students and m 4-choice problems, any two students have at most one common answer",
        "A351_C47: T = 2"
      ],
      "conclusions": [
        "A146_C1: max m such that for 16 students and m 4-choice problems, any two students have at most one common answer"
      ]
    }
  ]
}