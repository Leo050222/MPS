{
  "Problem_ID": 48,
  "Chunk_Type": "T4",
  "Class_ID": "B9733",
  "Multiple_Synthesis_Class": "MP2",
  "Sub_Class_ID": [
    {
      "A1566": "A1566_DG_1"
    },
    {
      "A1640": "A1640_DG_7"
    }
  ],
  "Synthesis_Trace": "DG-DG",
  "Synthesis_Status": "Continuable",
  "Math_Problem": "Find all positive integers $a$ and $b$ such that $\\frac{a^{2}+b}{b^{2}-a}$ and $\\frac{b^{2}+a}{a^{2}-b}$ are both integers. Instead of determining all such pairs of positive integers, simply find $k$, where $k$ is the value of $\\frac{a^{2}+b}{b^{2}-a}$ for solution pairs $(a, b)$ that are consecutive positive integers. Let $P(n)=\\left(n-1^{(k + 2)}\\right)\\left(n-2^{(k + 2)}\\right) \\ldots\\left(n-40^{(k + 2)}\\right)$ for positive integers $n$. Suppose that $d$ is the largest positive integer that divides $P(n)$ for every integer $n>(k + 2022)$. If $d$ is a product of $m$ (not necessarily distinct) prime numbers, compute $m$.",
  "Connecting_Sentence": [
    {
      "A1566": "Instead of determining all such pairs of positive integers, simply find $k$, where $k$ is the value of $\\frac{a^{2}+b}{b^{2}-a}$ for solution pairs $(a, b)$ that are consecutive positive integers."
    },
    {
      "A1640": "None"
    }
  ],
  "Synthesised_By": [
    {
      "A1566": "Find all positive integers $a$ and $b$ such that $\\frac{a^{2}+b}{b^{2}-a}$ and $\\frac{b^{2}+a}{a^{2}-b}$ are both integers. Instead of determining all such pairs of positive integers, simply find $e = k + 2022$, where $k$ is the value of $\\frac{a^{2}+b}{b^{2}-a}$ for solution pairs $(a, b)$ that are consecutive positive integers."
    },
    {
      "A1640": "Let $P(n)=\\left(n-1^{3}\\right)\\left(n-2^{3}\\right) \\ldots\\left(n-40^{3}\\right)$ for positive integers $n$. Suppose that $d$ is the largest positive integer that divides $P(n)$ for every integer $n>2023$. If $d$ is a product of $m$ (not necessarily distinct) prime numbers, compute $m$."
    }
  ],
  "Original_Problem": [
    {
      "A1566": "Find all positive integers $a$ and $b$ such that $\\frac{a^{2}+b}{b^{2}-a}$ and $\\frac{b^{2}+a}{a^{2}-b}$ are both integers."
    },
    {
      "A1640": "Let $P(n)=\\left(n-1^{3}\\right)\\left(n-2^{3}\\right) \\ldots\\left(n-40^{3}\\right)$ for positive integers $n$. Suppose that $d$ is the largest positive integer that divides $P(n)$ for every integer $n>2023$. If $d$ is a product of $m$ (not necessarily distinct) prime numbers, compute $m$."
    }
  ],
  "Problem_Type": [
    {
      "A1566": [
        "Mathematics -> Algebra -> Algebra -> Equations and Inequalities",
        "Mathematics -> Number Theory -> Diophantine Equations -> Other"
      ]
    },
    {
      "A1640": [
        "Mathematics -> Algebra -> Algebra -> Polynomial Operations",
        "Mathematics -> Number Theory -> Prime Numbers"
      ]
    }
  ],
  "Problem_Level": [
    {
      "A1566": "KbsdJames_Omni-MATH_6.0"
    },
    {
      "A1640": "KbsdJames_Omni-MATH_6.0"
    }
  ],
  "Problem_Source": [
    {
      "A1566": "apmoapmo_sol"
    },
    {
      "A1640": "HMMT_2"
    }
  ],
  "Problem_Length": [
    {
      "A1566": 123
    },
    {
      "A1640": 285
    }
  ],
  "Synthesised_Problem_Length": 612,
  "Ground_Truth": [
    {
      "A1566": "(2,2),(3,3),(1,2),(2,3),(2,1),(3,2)"
    },
    {
      "A1640": "48"
    }
  ],
  "Predicted_Answer": [
    {
      "A1566": "(2,2),(3,3),(1,2),(2,3),(2,1),(3,2)"
    },
    {
      "A1640": "48"
    }
  ],
  "Connecting_Point": [
    {
      "B9733": {
        "2023": "(k + 2022)"
      }
    }
  ],
  "Delta_Factor": [
    {
      "A1566": 0.53
    },
    {
      "A1640": 0.97
    }
  ],
  "Delta_Value": [
    {
      "A1566": {
        "k": "1"
      }
    },
    {
      "A1640": {
        "floor(40/29)": "1"
      }
    }
  ],
  "Delta_Depth": [
    {
      "A1566": {
        "k": 25
      }
    },
    {
      "A1640": {
        "floor(40/29)": 31
      }
    }
  ],
  "Delta_Source": [
    {
      "A1566": "derived"
    },
    {
      "A1640": "derived"
    }
  ],
  "Delta_Value_Order": [
    {
      "A1566": 1
    },
    {
      "A1640": 7
    }
  ],
  "Delta_Variable_Names": [
    {
      "A1566": [
        "k"
      ]
    },
    {
      "A1640": [
        "floor"
      ]
    }
  ],
  "Delta_Socket": [
    {
      "A1566": {
        "2": 2.0
      }
    },
    {
      "A1640": {
        "2023": 2023.0
      }
    }
  ],
  "Source_Delta_Socket": [
    {
      "A1566": "goal"
    },
    {
      "A1640": "goal"
    }
  ],
  "Delta_Socket_Order": [
    {
      "A1566": 1
    },
    {
      "A1640": 1
    }
  ],
  "Variable_Names": [
    {
      "A1566": [
        "a",
        "b"
      ]
    },
    {
      "A1640": [
        "n",
        "P",
        "d",
        "m"
      ]
    }
  ],
  "Total_Claims": [
    {
      "A1566": 47
    },
    {
      "A1640": 32
    }
  ],
  "Total_Delta": [
    {
      "A1566": 1
    },
    {
      "A1640": 7
    }
  ],
  "Total_Delta_Socket": [
    {
      "A1566": 1
    },
    {
      "A1640": 1
    }
  ],
  "Max_Delta_Factor": [
    {
      "A1566": 0.53
    },
    {
      "A1640": 0.97
    }
  ],
  "Min_Delta_Factor": [
    {
      "A1566": 0.53
    },
    {
      "A1640": 0.78
    }
  ],
  "Max_Delta_Depth": [
    {
      "A1566": 25
    },
    {
      "A1640": 31
    }
  ],
  "Min_Delta_Depth": [
    {
      "A1566": 25
    },
    {
      "A1640": 25
    }
  ],
  "Claims": [
    {
      "id": "A1566_C1",
      "type": "goal",
      "expr": "positive integers a,b s.t. (a^2 + b)/(b^2 - a) in Z and (b^2 + a)/(a^2 - b) in Z"
    },
    {
      "id": "A1566_C2",
      "type": "context",
      "expr": "a, b positive integers"
    },
    {
      "id": "A1566_C3",
      "type": "derived",
      "expr": "wlog a <= b by symmetry"
    },
    {
      "id": "A1566_C4",
      "type": "derived",
      "expr": "b^2 - a >= 0"
    },
    {
      "id": "A1566_C5",
      "type": "derived",
      "expr": "k = (a^2 + b)/(b^2 - a) in Z"
    },
    {
      "id": "A1566_C6",
      "type": "derived",
      "expr": "assume k >= 1"
    },
    {
      "id": "A1566_C7",
      "type": "derived",
      "expr": "a^2 + b >= b^2 - a"
    },
    {
      "id": "A1566_C8",
      "type": "derived",
      "expr": "a^2 + a + b - b^2 >= 0"
    },
    {
      "id": "A1566_C9",
      "type": "derived",
      "expr": "(a - b)(a + b) + (a + b) >= 0"
    },
    {
      "id": "A1566_C10",
      "type": "derived",
      "expr": "(a + b)(a - b + 1) >= 0"
    },
    {
      "id": "A1566_C11",
      "type": "derived",
      "expr": "a + b > 0"
    },
    {
      "id": "A1566_C12",
      "type": "derived",
      "expr": "a - b + 1 >= 0"
    },
    {
      "id": "A1566_C13",
      "type": "derived",
      "expr": "a >= b - 1"
    },
    {
      "id": "A1566_C14",
      "type": "derived",
      "expr": "a = b or a = b - 1"
    },
    {
      "id": "A1566_C15",
      "type": "derived",
      "expr": "b = a"
    },
    {
      "id": "A1566_C16",
      "type": "derived",
      "expr": "k = (a+1)/(a-1)"
    },
    {
      "id": "A1566_C17",
      "type": "derived",
      "expr": "(a+1)/(a-1) = 1 + 2/(a-1)"
    },
    {
      "id": "A1566_C18",
      "type": "derived",
      "expr": "2/(a-1) integer"
    },
    {
      "id": "A1566_C19",
      "type": "derived",
      "expr": "a-1 divides 2"
    },
    {
      "id": "A1566_C20",
      "type": "derived",
      "expr": "a >= 2"
    },
    {
      "id": "A1566_C21",
      "type": "derived",
      "expr": "positive divisors of 2: 1,2"
    },
    {
      "id": "A1566_C22",
      "type": "derived",
      "expr": "a=2 or 3"
    },
    {
      "id": "A1566_C23",
      "type": "derived",
      "expr": "pairs (2,2), (3,3)"
    },
    {
      "id": "A1566_C24",
      "type": "derived",
      "expr": "b = a + 1"
    },
    {
      "id": "A1566_C25",
      "type": "derived",
      "expr": "k = 1"
    },
    {
      "id": "A1566_C26",
      "type": "derived",
      "expr": "m = (a^2 + 3a + 1)/(a^2 - a - 1)"
    },
    {
      "id": "A1566_C27",
      "type": "derived",
      "expr": "m = 1 + (4a + 2)/(a^2 - a - 1)"
    },
    {
      "id": "A1566_C28",
      "type": "derived",
      "expr": "d = a^2 - a - 1"
    },
    {
      "id": "A1566_C29",
      "type": "derived",
      "expr": "d divides 4a + 2"
    },
    {
      "id": "A1566_C30",
      "type": "derived",
      "expr": "4a + 2 >= a^2 - a - 1"
    },
    {
      "id": "A1566_C31",
      "type": "derived",
      "expr": "a^2 - 5a - 3 <= 0"
    },
    {
      "id": "A1566_C32",
      "type": "derived",
      "expr": "roots (5 ± sqrt(37))/2 ≈ 5.54, -0.54"
    },
    {
      "id": "A1566_C33",
      "type": "derived",
      "expr": "1 <= a <= 5"
    },
    {
      "id": "A1566_C34",
      "type": "derived",
      "expr": "a=1: d=-1, 4*1+2=6, 6/-1=-6 integer"
    },
    {
      "id": "A1566_C35",
      "type": "derived",
      "expr": "(1,2) works"
    },
    {
      "id": "A1566_C36",
      "type": "derived",
      "expr": "a=2: d=1, 4*2+2=10, 10/1=10 integer"
    },
    {
      "id": "A1566_C37",
      "type": "derived",
      "expr": "(2,3) works"
    },
    {
      "id": "A1566_C38",
      "type": "derived",
      "expr": "a=3: d=5, 4*3+2=14, 14/5 not integer"
    },
    {
      "id": "A1566_C39",
      "type": "derived",
      "expr": "(3,4) does not work"
    },
    {
      "id": "A1566_C40",
      "type": "derived",
      "expr": "a=4: d=11, 4*4+2=18, 18/11 not integer"
    },
    {
      "id": "A1566_C41",
      "type": "derived",
      "expr": "(4,5) does not work"
    },
    {
      "id": "A1566_C42",
      "type": "derived",
      "expr": "a=5: d=19, 4*5+2=22, 22/19 not integer"
    },
    {
      "id": "A1566_C43",
      "type": "derived",
      "expr": "(5,6) does not work"
    },
    {
      "id": "A1566_C44",
      "type": "derived",
      "expr": "from case 2: (1,2), (2,3)"
    },
    {
      "id": "A1566_C45",
      "type": "derived",
      "expr": "pairs with a <= b: (1,2), (2,2), (2,3), (3,3)"
    },
    {
      "id": "A1566_C46",
      "type": "derived",
      "expr": "symmetric pairs: (2,1), (3,2)"
    },
    {
      "id": "A1566_C47",
      "type": "final",
      "expr": "all pairs: (1,2), (2,1), (2,2), (2,3), (3,2), (3,3)"
    },
    {
      "id": "A1640_C1",
      "type": "derived",
      "expr": "compute m such that m = Omega(d), d = largest positive integer dividing P(n) for all integers n > 2023, P(n) = prod_{k=1 to 40} (n - k^3)"
    },
    {
      "id": "A1640_C2",
      "type": "context",
      "expr": "P(n) = prod_{k=1 to 40} (n - k^3)"
    },
    {
      "id": "A1640_C3",
      "type": "context",
      "expr": "n > 2023 and n integer"
    },
    {
      "id": "A1640_C4",
      "type": "derived",
      "expr": "prime p divides every P(n) for n > 2023 iff {k^3 mod p | k=1 to 40} = {0,1,...,p-1}"
    },
    {
      "id": "A1640_C5",
      "type": "derived",
      "expr": "if p > 40 then |{k^3 mod p | k=1 to 40}| <= 40 < p"
    },
    {
      "id": "A1640_C6",
      "type": "derived",
      "expr": "if p > 40 prime then p does not divide d"
    },
    {
      "id": "A1640_C7",
      "type": "derived",
      "expr": "if p <= 40 prime then {k^3 mod p | k=1 to 40} = {x^3 mod p | x=0 to p-1}"
    },
    {
      "id": "A1640_C8",
      "type": "derived",
      "expr": "x |-> x^3 bijective on F_p iff 3 does not divide (p-1) iff p not equiv 1 mod 3"
    },
    {
      "id": "A1640_C9",
      "type": "derived",
      "expr": "primes p dividing d are exactly the primes p <= 40 with p not equiv 1 mod 3"
    },
    {
      "id": "A1640_C10",
      "type": "derived",
      "expr": "S = {2,3,5,11,17,23,29}"
    },
    {
      "id": "A1640_C11",
      "type": "derived",
      "expr": "for p in S, x |-> x^3 is bijective mod p"
    },
    {
      "id": "A1640_C12",
      "type": "derived",
      "expr": "for any l, {(l+j)^3 mod p | j=0 to p-1} = {0,1,...,p-1}"
    },
    {
      "id": "A1640_C13",
      "type": "derived",
      "expr": "for any n, in any p consecutive k, exactly one n - k^3 equiv 0 mod p"
    },
    {
      "id": "A1640_C14",
      "type": "derived",
      "expr": "k=1 to 40 groups into floor(40/p) blocks of p consecutive plus remainder < p"
    },
    {
      "id": "A1640_C15",
      "type": "derived",
      "expr": "each full block of p consecutive k contributes exactly 1 factor divisible by p; remainder contributes 0 or 1"
    },
    {
      "id": "A1640_C16",
      "type": "derived",
      "expr": "v_p(P(n)) >= floor(40/p) for all n > 2023"
    },
    {
      "id": "A1640_C17",
      "type": "derived",
      "expr": "exists n > 2023 with v_p(n) = 1"
    },
    {
      "id": "A1640_C18",
      "type": "derived",
      "expr": "if v_p(n)=1 then n - k^3 equiv 0 mod p iff k equiv 0 mod p"
    },
    {
      "id": "A1640_C19",
      "type": "derived",
      "expr": "# {k=1 to 40 | p divides k} = floor(40/p)"
    },
    {
      "id": "A1640_C20",
      "type": "derived",
      "expr": "if k = m p and v_p(n)=1 then v_p(n - k^3) = 1"
    },
    {
      "id": "A1640_C21",
      "type": "derived",
      "expr": "if v_p(n)=1 then v_p(P(n)) = floor(40/p)"
    },
    {
      "id": "A1640_C22",
      "type": "derived",
      "expr": "min_{n>2023} v_p(P(n)) = floor(40/p) for p in S"
    },
    {
      "id": "A1640_C23",
      "type": "derived",
      "expr": "if q prime not in S then v_q(d) = 0"
    },
    {
      "id": "A1640_C24",
      "type": "derived",
      "expr": "d = prod_{p in S} p^{floor(40/p)}"
    },
    {
      "id": "A1640_C25",
      "type": "derived",
      "expr": "floor(40/2) = 20"
    },
    {
      "id": "A1640_C26",
      "type": "derived",
      "expr": "floor(40/3) = 13"
    },
    {
      "id": "A1640_C27",
      "type": "derived",
      "expr": "floor(40/5) = 8"
    },
    {
      "id": "A1640_C28",
      "type": "derived",
      "expr": "floor(40/11) = 3"
    },
    {
      "id": "A1640_C29",
      "type": "derived",
      "expr": "floor(40/17) = 2"
    },
    {
      "id": "A1640_C30",
      "type": "derived",
      "expr": "floor(40/23) = 1"
    },
    {
      "id": "A1640_C31",
      "type": "derived",
      "expr": "floor(40/29) = 1"
    },
    {
      "id": "A1640_C32",
      "type": "final",
      "expr": "m = 20 + 13 + 8 + 3 + 2 + 1 + 1 = 48"
    },
    {
      "id": "B9733_C1",
      "type": "goal",
      "expr": "compute m such that m = Omega(d), d = largest positive integer dividing P(n) for all integers n > (k + 2022), P(n) = prod_{k=1 to 40} (n - k^3)"
    }
  ],
  "Steps": [
    {
      "id": "A1566_S1",
      "rule": "problem setup",
      "premises": [
        "A1566_C1: positive integers a,b s.t. (a^2 + b)/(b^2 - a) in Z and (b^2 + a)/(a^2 - b) in Z"
      ],
      "conclusions": [
        "A1566_C2: a, b positive integers",
        "A1566_C3: wlog a <= b by symmetry"
      ]
    },
    {
      "id": "A1566_S2",
      "rule": "from a <= b, positive integers",
      "premises": [
        "A1566_C2: a, b positive integers",
        "A1566_C3: wlog a <= b by symmetry"
      ],
      "conclusions": [
        "A1566_C4: b^2 - a >= 0"
      ]
    },
    {
      "id": "A1566_S3",
      "rule": "definition",
      "premises": [
        "A1566_C1: positive integers a,b s.t. (a^2 + b)/(b^2 - a) in Z and (b^2 + a)/(a^2 - b) in Z"
      ],
      "conclusions": [
        "A1566_C5: k = (a^2 + b)/(b^2 - a) in Z"
      ]
    },
    {
      "id": "A1566_S4",
      "rule": "assume for bounding",
      "premises": [
        "A1566_C5: k = (a^2 + b)/(b^2 - a) in Z"
      ],
      "conclusions": [
        "A1566_C6: assume k >= 1"
      ]
    },
    {
      "id": "A1566_S5",
      "rule": "k >=1, denom >=0",
      "premises": [
        "A1566_C5: k = (a^2 + b)/(b^2 - a) in Z",
        "A1566_C6: assume k >= 1",
        "A1566_C4: b^2 - a >= 0"
      ],
      "conclusions": [
        "A1566_C7: a^2 + b >= b^2 - a"
      ]
    },
    {
      "id": "A1566_S6",
      "rule": "rearrange",
      "premises": [
        "A1566_C7: a^2 + b >= b^2 - a"
      ],
      "conclusions": [
        "A1566_C8: a^2 + a + b - b^2 >= 0"
      ]
    },
    {
      "id": "A1566_S7",
      "rule": "factor a^2 - b^2",
      "premises": [
        "A1566_C8: a^2 + a + b - b^2 >= 0"
      ],
      "conclusions": [
        "A1566_C9: (a - b)(a + b) + (a + b) >= 0"
      ]
    },
    {
      "id": "A1566_S8",
      "rule": "factor (a+b)",
      "premises": [
        "A1566_C9: (a - b)(a + b) + (a + b) >= 0"
      ],
      "conclusions": [
        "A1566_C10: (a + b)(a - b + 1) >= 0"
      ]
    },
    {
      "id": "A1566_S9",
      "rule": "positive",
      "premises": [
        "A1566_C2: a, b positive integers"
      ],
      "conclusions": [
        "A1566_C11: a + b > 0"
      ]
    },
    {
      "id": "A1566_S10",
      "rule": "divide by a+b >0",
      "premises": [
        "A1566_C10: (a + b)(a - b + 1) >= 0",
        "A1566_C11: a + b > 0"
      ],
      "conclusions": [
        "A1566_C12: a - b + 1 >= 0"
      ]
    },
    {
      "id": "A1566_S11",
      "rule": "equivalent",
      "premises": [
        "A1566_C12: a - b + 1 >= 0"
      ],
      "conclusions": [
        "A1566_C13: a >= b - 1"
      ]
    },
    {
      "id": "A1566_S12",
      "rule": "combine with a <= b",
      "premises": [
        "A1566_C3: wlog a <= b by symmetry",
        "A1566_C13: a >= b - 1",
        "A1566_C2: a, b positive integers"
      ],
      "conclusions": [
        "A1566_C14: a = b or a = b - 1"
      ]
    },
    {
      "id": "A1566_S13",
      "rule": "case 1 a=b",
      "premises": [
        "A1566_C14: a = b or a = b - 1"
      ],
      "conclusions": [
        "A1566_C15: b = a"
      ]
    },
    {
      "id": "A1566_S14",
      "rule": "substitute b=a",
      "premises": [
        "A1566_C5: k = (a^2 + b)/(b^2 - a) in Z",
        "A1566_C15: b = a"
      ],
      "conclusions": [
        "A1566_C16: k = (a+1)/(a-1)"
      ]
    },
    {
      "id": "A1566_S15",
      "rule": "manipulate",
      "premises": [
        "A1566_C16: k = (a+1)/(a-1)"
      ],
      "conclusions": [
        "A1566_C17: (a+1)/(a-1) = 1 + 2/(a-1)"
      ]
    },
    {
      "id": "A1566_S16",
      "rule": "for k integer",
      "premises": [
        "A1566_C17: (a+1)/(a-1) = 1 + 2/(a-1)",
        "A1566_C5: k = (a^2 + b)/(b^2 - a) in Z"
      ],
      "conclusions": [
        "A1566_C18: 2/(a-1) integer"
      ]
    },
    {
      "id": "A1566_S17",
      "rule": "divides",
      "premises": [
        "A1566_C18: 2/(a-1) integer"
      ],
      "conclusions": [
        "A1566_C19: a-1 divides 2"
      ]
    },
    {
      "id": "A1566_S18",
      "rule": "denom !=0",
      "premises": [
        "A1566_C16: k = (a+1)/(a-1)"
      ],
      "conclusions": [
        "A1566_C20: a >= 2"
      ]
    },
    {
      "id": "A1566_S19",
      "rule": "positive divisors",
      "premises": [
        "A1566_C19: a-1 divides 2",
        "A1566_C20: a >= 2"
      ],
      "conclusions": [
        "A1566_C21: positive divisors of 2: 1,2"
      ]
    },
    {
      "id": "A1566_S20",
      "rule": "solve",
      "premises": [
        "A1566_C21: positive divisors of 2: 1,2"
      ],
      "conclusions": [
        "A1566_C22: a=2 or 3"
      ]
    },
    {
      "id": "A1566_S21",
      "rule": "pairs",
      "premises": [
        "A1566_C22: a=2 or 3",
        "A1566_C15: b = a"
      ],
      "conclusions": [
        "A1566_C23: pairs (2,2), (3,3)"
      ]
    },
    {
      "id": "A1566_S22",
      "rule": "case 2 a=b-1",
      "premises": [
        "A1566_C14: a = b or a = b - 1"
      ],
      "conclusions": [
        "A1566_C24: b = a + 1"
      ]
    },
    {
      "id": "A1566_S23",
      "rule": "substitute b=a+1 into k",
      "premises": [
        "A1566_C5: k = (a^2 + b)/(b^2 - a) in Z",
        "A1566_C24: b = a + 1"
      ],
      "conclusions": [
        "A1566_C25: k = 1"
      ]
    },
    {
      "id": "A1566_S24",
      "rule": "substitute into m",
      "premises": [
        "A1566_C1: positive integers a,b s.t. (a^2 + b)/(b^2 - a) in Z and (b^2 + a)/(a^2 - b) in Z",
        "A1566_C24: b = a + 1"
      ],
      "conclusions": [
        "A1566_C26: m = (a^2 + 3a + 1)/(a^2 - a - 1)"
      ]
    },
    {
      "id": "A1566_S25",
      "rule": "rewrite",
      "premises": [
        "A1566_C26: m = (a^2 + 3a + 1)/(a^2 - a - 1)"
      ],
      "conclusions": [
        "A1566_C27: m = 1 + (4a + 2)/(a^2 - a - 1)"
      ]
    },
    {
      "id": "A1566_S26",
      "rule": "denote",
      "premises": [
        "A1566_C27: m = 1 + (4a + 2)/(a^2 - a - 1)"
      ],
      "conclusions": [
        "A1566_C28: d = a^2 - a - 1"
      ]
    },
    {
      "id": "A1566_S27",
      "rule": "for m integer",
      "premises": [
        "A1566_C27: m = 1 + (4a + 2)/(a^2 - a - 1)"
      ],
      "conclusions": [
        "A1566_C29: d divides 4a + 2"
      ]
    },
    {
      "id": "A1566_S28",
      "rule": "bounding assumption",
      "premises": [
        "A1566_C29: d divides 4a + 2"
      ],
      "conclusions": [
        "A1566_C30: 4a + 2 >= a^2 - a - 1"
      ]
    },
    {
      "id": "A1566_S29",
      "rule": "rearrange",
      "premises": [
        "A1566_C30: 4a + 2 >= a^2 - a - 1"
      ],
      "conclusions": [
        "A1566_C31: a^2 - 5a - 3 <= 0"
      ]
    },
    {
      "id": "A1566_S30",
      "rule": "quadratic roots",
      "premises": [
        "A1566_C31: a^2 - 5a - 3 <= 0"
      ],
      "conclusions": [
        "A1566_C32: roots (5 ± sqrt(37))/2 ≈ 5.54, -0.54"
      ]
    },
    {
      "id": "A1566_S31",
      "rule": "integers in range",
      "premises": [
        "A1566_C32: roots (5 ± sqrt(37))/2 ≈ 5.54, -0.54",
        "A1566_C2: a, b positive integers"
      ],
      "conclusions": [
        "A1566_C33: 1 <= a <= 5"
      ]
    },
    {
      "id": "A1566_S32",
      "rule": "compute a=1",
      "premises": [
        "A1566_C28: d = a^2 - a - 1",
        "A1566_C29: d divides 4a + 2",
        "A1566_C33: 1 <= a <= 5"
      ],
      "conclusions": [
        "A1566_C34: a=1: d=-1, 4*1+2=6, 6/-1=-6 integer"
      ]
    },
    {
      "id": "A1566_S33",
      "rule": "verify",
      "premises": [
        "A1566_C25: k = 1",
        "A1566_C34: a=1: d=-1, 4*1+2=6, 6/-1=-6 integer",
        "A1566_C24: b = a + 1"
      ],
      "conclusions": [
        "A1566_C35: (1,2) works"
      ]
    },
    {
      "id": "A1566_S34",
      "rule": "compute a=2",
      "premises": [
        "A1566_C28: d = a^2 - a - 1",
        "A1566_C29: d divides 4a + 2",
        "A1566_C33: 1 <= a <= 5"
      ],
      "conclusions": [
        "A1566_C36: a=2: d=1, 4*2+2=10, 10/1=10 integer"
      ]
    },
    {
      "id": "A1566_S35",
      "rule": "verify",
      "premises": [
        "A1566_C25: k = 1",
        "A1566_C36: a=2: d=1, 4*2+2=10, 10/1=10 integer",
        "A1566_C24: b = a + 1"
      ],
      "conclusions": [
        "A1566_C37: (2,3) works"
      ]
    },
    {
      "id": "A1566_S36",
      "rule": "compute a=3",
      "premises": [
        "A1566_C28: d = a^2 - a - 1",
        "A1566_C29: d divides 4a + 2",
        "A1566_C33: 1 <= a <= 5"
      ],
      "conclusions": [
        "A1566_C38: a=3: d=5, 4*3+2=14, 14/5 not integer"
      ]
    },
    {
      "id": "A1566_S37",
      "rule": "does not",
      "premises": [
        "A1566_C38: a=3: d=5, 4*3+2=14, 14/5 not integer"
      ],
      "conclusions": [
        "A1566_C39: (3,4) does not work"
      ]
    },
    {
      "id": "A1566_S38",
      "rule": "compute a=4",
      "premises": [
        "A1566_C28: d = a^2 - a - 1",
        "A1566_C29: d divides 4a + 2",
        "A1566_C33: 1 <= a <= 5"
      ],
      "conclusions": [
        "A1566_C40: a=4: d=11, 4*4+2=18, 18/11 not integer"
      ]
    },
    {
      "id": "A1566_S39",
      "rule": "does not",
      "premises": [
        "A1566_C40: a=4: d=11, 4*4+2=18, 18/11 not integer"
      ],
      "conclusions": [
        "A1566_C41: (4,5) does not work"
      ]
    },
    {
      "id": "A1566_S40",
      "rule": "compute a=5",
      "premises": [
        "A1566_C28: d = a^2 - a - 1",
        "A1566_C29: d divides 4a + 2",
        "A1566_C33: 1 <= a <= 5"
      ],
      "conclusions": [
        "A1566_C42: a=5: d=19, 4*5+2=22, 22/19 not integer"
      ]
    },
    {
      "id": "A1566_S41",
      "rule": "does not",
      "premises": [
        "A1566_C42: a=5: d=19, 4*5+2=22, 22/19 not integer"
      ],
      "conclusions": [
        "A1566_C43: (5,6) does not work"
      ]
    },
    {
      "id": "A1566_S42",
      "rule": "collect case 2",
      "premises": [
        "A1566_C35: (1,2) works",
        "A1566_C37: (2,3) works"
      ],
      "conclusions": [
        "A1566_C44: from case 2: (1,2), (2,3)"
      ]
    },
    {
      "id": "A1566_S43",
      "rule": "combine cases a<=b",
      "premises": [
        "A1566_C23: pairs (2,2), (3,3)",
        "A1566_C44: from case 2: (1,2), (2,3)"
      ],
      "conclusions": [
        "A1566_C45: pairs with a <= b: (1,2), (2,2), (2,3), (3,3)"
      ]
    },
    {
      "id": "A1566_S44",
      "rule": "symmetry",
      "premises": [
        "A1566_C3: wlog a <= b by symmetry",
        "A1566_C45: pairs with a <= b: (1,2), (2,2), (2,3), (3,3)"
      ],
      "conclusions": [
        "A1566_C46: symmetric pairs: (2,1), (3,2)"
      ]
    },
    {
      "id": "A1566_S45",
      "rule": "all pairs",
      "premises": [
        "A1566_C45: pairs with a <= b: (1,2), (2,2), (2,3), (3,3)",
        "A1566_C46: symmetric pairs: (2,1), (3,2)"
      ],
      "conclusions": [
        "A1566_C47: all pairs: (1,2), (2,1), (2,2), (2,3), (3,2), (3,3)"
      ]
    },
    {
      "id": "A1640_S1",
      "rule": "problem setup",
      "premises": [
        "A1640_C1: compute m such that m = Omega(d), d = largest positive integer dividing P(n) for all integers n > 2023, P(n) = prod_{k=1 to 40} (n - k^3)"
      ],
      "conclusions": [
        "A1640_C2: P(n) = prod_{k=1 to 40} (n - k^3)",
        "A1640_C3: n > 2023 and n integer"
      ]
    },
    {
      "id": "A1640_S2",
      "rule": "characterization of primes dividing all P(n)",
      "premises": [
        "A1640_C2: P(n) = prod_{k=1 to 40} (n - k^3)",
        "A1640_C3: n > 2023 and n integer"
      ],
      "conclusions": [
        "A1640_C4: prime p divides every P(n) for n > 2023 iff {k^3 mod p | k=1 to 40} = {0,1,...,p-1}"
      ]
    },
    {
      "id": "A1640_S3",
      "rule": "primes larger than 40",
      "premises": [
        "A1640_C4: prime p divides every P(n) for n > 2023 iff {k^3 mod p | k=1 to 40} = {0,1,...,p-1}"
      ],
      "conclusions": [
        "A1640_C5: if p > 40 then |{k^3 mod p | k=1 to 40}| <= 40 < p",
        "A1640_C6: if p > 40 prime then p does not divide d"
      ]
    },
    {
      "id": "A1640_S4",
      "rule": "set of cubes for p <=40",
      "premises": [
        "A1640_C4: prime p divides every P(n) for n > 2023 iff {k^3 mod p | k=1 to 40} = {0,1,...,p-1}"
      ],
      "conclusions": [
        "A1640_C7: if p <= 40 prime then {k^3 mod p | k=1 to 40} = {x^3 mod p | x=0 to p-1}"
      ]
    },
    {
      "id": "A1640_S5",
      "rule": "bijectivity of cubing map",
      "premises": [
        "A1640_C7: if p <= 40 prime then {k^3 mod p | k=1 to 40} = {x^3 mod p | x=0 to p-1}"
      ],
      "conclusions": [
        "A1640_C8: x |-> x^3 bijective on F_p iff 3 does not divide (p-1) iff p not equiv 1 mod 3"
      ]
    },
    {
      "id": "A1640_S6",
      "rule": "primes dividing d",
      "premises": [
        "A1640_C6: if p > 40 prime then p does not divide d",
        "A1640_C8: x |-> x^3 bijective on F_p iff 3 does not divide (p-1) iff p not equiv 1 mod 3"
      ],
      "conclusions": [
        "A1640_C9: primes p dividing d are exactly the primes p <= 40 with p not equiv 1 mod 3"
      ]
    },
    {
      "id": "A1640_S7",
      "rule": "listing primes in S",
      "premises": [
        "A1640_C9: primes p dividing d are exactly the primes p <= 40 with p not equiv 1 mod 3"
      ],
      "conclusions": [
        "A1640_C10: S = {2,3,5,11,17,23,29}"
      ]
    },
    {
      "id": "A1640_S8",
      "rule": "bijectivity for p in S",
      "premises": [
        "A1640_C9: primes p dividing d are exactly the primes p <= 40 with p not equiv 1 mod 3",
        "A1640_C10: S = {2,3,5,11,17,23,29}"
      ],
      "conclusions": [
        "A1640_C11: for p in S, x |-> x^3 is bijective mod p"
      ]
    },
    {
      "id": "A1640_S9",
      "rule": "cubes in consecutive blocks",
      "premises": [
        "A1640_C11: for p in S, x |-> x^3 is bijective mod p"
      ],
      "conclusions": [
        "A1640_C12: for any l, {(l+j)^3 mod p | j=0 to p-1} = {0,1,...,p-1}"
      ]
    },
    {
      "id": "A1640_S10",
      "rule": "factors divisible by p in blocks",
      "premises": [
        "A1640_C12: for any l, {(l+j)^3 mod p | j=0 to p-1} = {0,1,...,p-1}",
        "A1640_C2: P(n) = prod_{k=1 to 40} (n - k^3)"
      ],
      "conclusions": [
        "A1640_C13: for any n, in any p consecutive k, exactly one n - k^3 equiv 0 mod p"
      ]
    },
    {
      "id": "A1640_S11",
      "rule": "grouping of k=1 to 40",
      "premises": [
        "A1640_C2: P(n) = prod_{k=1 to 40} (n - k^3)"
      ],
      "conclusions": [
        "A1640_C14: k=1 to 40 groups into floor(40/p) blocks of p consecutive plus remainder < p"
      ]
    },
    {
      "id": "A1640_S12",
      "rule": "contribution per group",
      "premises": [
        "A1640_C13: for any n, in any p consecutive k, exactly one n - k^3 equiv 0 mod p",
        "A1640_C14: k=1 to 40 groups into floor(40/p) blocks of p consecutive plus remainder < p"
      ],
      "conclusions": [
        "A1640_C15: each full block of p consecutive k contributes exactly 1 factor divisible by p; remainder contributes 0 or 1"
      ]
    },
    {
      "id": "A1640_S13",
      "rule": "lower bound on valuation",
      "premises": [
        "A1640_C15: each full block of p consecutive k contributes exactly 1 factor divisible by p; remainder contributes 0 or 1",
        "A1640_C16: v_p(P(n)) >= floor(40/p) for all n > 2023"
      ],
      "conclusions": [
        "A1640_C16: v_p(P(n)) >= floor(40/p) for all n > 2023"
      ]
    },
    {
      "id": "A1640_S14",
      "rule": "existence of n with v_p(n)=1",
      "premises": [
        "A1640_C3: n > 2023 and n integer"
      ],
      "conclusions": [
        "A1640_C17: exists n > 2023 with v_p(n) = 1"
      ]
    },
    {
      "id": "A1640_S15",
      "rule": "condition for divisibility when v_p(n)=1",
      "premises": [
        "A1640_C11: for p in S, x |-> x^3 is bijective mod p",
        "A1640_C17: exists n > 2023 with v_p(n) = 1"
      ],
      "conclusions": [
        "A1640_C18: if v_p(n)=1 then n - k^3 equiv 0 mod p iff k equiv 0 mod p"
      ]
    },
    {
      "id": "A1640_S16",
      "rule": "count of multiples of p",
      "premises": [
        "A1640_C2: P(n) = prod_{k=1 to 40} (n - k^3)"
      ],
      "conclusions": [
        "A1640_C19: # {k=1 to 40 | p divides k} = floor(40/p)"
      ]
    },
    {
      "id": "A1640_S17",
      "rule": "valuation of specific terms",
      "premises": [
        "A1640_C17: exists n > 2023 with v_p(n) = 1",
        "A1640_C19: # {k=1 to 40 | p divides k} = floor(40/p)"
      ],
      "conclusions": [
        "A1640_C20: if k = m p and v_p(n)=1 then v_p(n - k^3) = 1"
      ]
    },
    {
      "id": "A1640_S18",
      "rule": "total valuation when v_p(n)=1",
      "premises": [
        "A1640_C18: if v_p(n)=1 then n - k^3 equiv 0 mod p iff k equiv 0 mod p",
        "A1640_C19: # {k=1 to 40 | p divides k} = floor(40/p)",
        "A1640_C20: if k = m p and v_p(n)=1 then v_p(n - k^3) = 1"
      ],
      "conclusions": [
        "A1640_C21: if v_p(n)=1 then v_p(P(n)) = floor(40/p)"
      ]
    },
    {
      "id": "A1640_S19",
      "rule": "minimum valuation",
      "premises": [
        "A1640_C16: v_p(P(n)) >= floor(40/p) for all n > 2023",
        "A1640_C21: if v_p(n)=1 then v_p(P(n)) = floor(40/p)"
      ],
      "conclusions": [
        "A1640_C22: min_{n>2023} v_p(P(n)) = floor(40/p) for p in S"
      ]
    },
    {
      "id": "A1640_S20",
      "rule": "valuations for other primes",
      "premises": [
        "A1640_C6: if p > 40 prime then p does not divide d",
        "A1640_C9: primes p dividing d are exactly the primes p <= 40 with p not equiv 1 mod 3"
      ],
      "conclusions": [
        "A1640_C23: if q prime not in S then v_q(d) = 0"
      ]
    },
    {
      "id": "A1640_S21",
      "rule": "form of d",
      "premises": [
        "A1640_C22: min_{n>2023} v_p(P(n)) = floor(40/p) for p in S",
        "A1640_C23: if q prime not in S then v_q(d) = 0"
      ],
      "conclusions": [
        "A1640_C24: d = prod_{p in S} p^{floor(40/p)}"
      ]
    },
    {
      "id": "A1640_S22",
      "rule": "compute floor values",
      "premises": [
        "A1640_C10: S = {2,3,5,11,17,23,29}"
      ],
      "conclusions": [
        "A1640_C25: floor(40/2) = 20",
        "A1640_C26: floor(40/3) = 13",
        "A1640_C27: floor(40/5) = 8",
        "A1640_C28: floor(40/11) = 3",
        "A1640_C29: floor(40/17) = 2",
        "A1640_C30: floor(40/23) = 1",
        "A1640_C31: floor(40/29) = 1"
      ]
    },
    {
      "id": "A1640_S23",
      "rule": "sum of exponents",
      "premises": [
        "A1640_C24: d = prod_{p in S} p^{floor(40/p)}",
        "A1640_C25: floor(40/2) = 20",
        "A1640_C26: floor(40/3) = 13",
        "A1640_C27: floor(40/5) = 8",
        "A1640_C28: floor(40/11) = 3",
        "A1640_C29: floor(40/17) = 2",
        "A1640_C30: floor(40/23) = 1",
        "A1640_C31: floor(40/29) = 1"
      ],
      "conclusions": [
        "A1640_C32: m = 20 + 13 + 8 + 3 + 2 + 1 + 1 = 48"
      ]
    },
    {
      "id": "B9733_S1",
      "rule": "problem connection",
      "premises": [
        "B9733_C1: compute m such that m = Omega(d), d = largest positive integer dividing P(n) for all integers n > (k + 2022), P(n) = prod_{k=1 to 40} (n - k^3)",
        "A1566_C25: k = 1"
      ],
      "conclusions": [
        "A1640_C1: compute m such that m = Omega(d), d = largest positive integer dividing P(n) for all integers n > 2023, P(n) = prod_{k=1 to 40} (n - k^3)"
      ]
    }
  ]
}