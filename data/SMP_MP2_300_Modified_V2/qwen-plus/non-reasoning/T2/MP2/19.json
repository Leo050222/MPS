{
  "Problem_ID": 19,
  "Chunk_Type": "T2",
  "Class_ID": "B3950",
  "Multiple_Synthesis_Class": "MP2",
  "Sub_Class_ID": [
    {
      "A2041": "A2041_DG_1"
    },
    {
      "A2090": "A2090_DG_1"
    }
  ],
  "Synthesis_Trace": "DG-DG",
  "Synthesis_Status": "Continuable",
  "Math_Problem": "Suppose $a$ and $b$ be positive integers not exceeding 100 such that $$a b=\\left(\\frac{\\operatorname{lcm}(a, b)}{\\operatorname{gcd}(a, b)}\\right)^{2}$$ Compute the largest possible value of $a+b$. Instead of computing the maximum possible sum of two positive integers not exceeding 100 that satisfy the given equation relating their product to the square of the ratio of their least common multiple to their greatest common divisor, simply find $m = s - 77$, where $s$ is that maximum possible sum. Consider a $(m + 4) \\times (m + 4)$ grid of squares. Vladimir colors some of these squares red, such that the centers of any four red squares do not form an axis-parallel rectangle (i.e. a rectangle whose sides are parallel to those of the squares). What is the maximum number of squares he could have colored red?",
  "Connecting_Sentence": [
    {
      "A2041": "Instead of computing the maximum possible sum of two positive integers not exceeding 100 that satisfy the given equation relating their product to the square of the ratio of their least common multiple to their greatest common divisor, simply find $m = s - 77$, where $s$ is that maximum possible sum."
    },
    {
      "A2090": "None"
    }
  ],
  "Synthesised_By": [
    {
      "A2041": "Suppose $a$ and $b$ be positive integers not exceeding 100 such that $$a b=\\left(\\frac{\\operatorname{lcm}(a, b)}{\\operatorname{gcd}(a, b)}\\right)^{2}$$ Compute the largest possible value of $a+b$. Instead of computing the maximum possible sum of two positive integers not exceeding 100 that satisfy the given equation relating their product to the square of the ratio of their least common multiple to their greatest common divisor, simply find $m = s - 77$, where $s$ is that maximum possible sum."
    },
    {
      "A2090": "Consider a $5 \\times 5$ grid of squares. Vladimir colors some of these squares red, such that the centers of any four red squares do not form an axis-parallel rectangle (i.e. a rectangle whose sides are parallel to those of the squares). What is the maximum number of squares he could have colored red?"
    }
  ],
  "Original_Problem": [
    {
      "A2041": "Suppose $a$ and $b$ be positive integers not exceeding 100 such that $$a b=\\left(\\frac{\\operatorname{lcm}(a, b)}{\\operatorname{gcd}(a, b)}\\right)^{2}$$ Compute the largest possible value of $a+b$."
    },
    {
      "A2090": "Consider a $5 \\times 5$ grid of squares. Vladimir colors some of these squares red, such that the centers of any four red squares do not form an axis-parallel rectangle (i.e. a rectangle whose sides are parallel to those of the squares). What is the maximum number of squares he could have colored red?"
    }
  ],
  "Problem_Type": [
    {
      "A2041": [
        "Mathematics -> Number Theory -> Prime Numbers",
        "Mathematics -> Algebra -> Prealgebra -> Integers"
      ]
    },
    {
      "A2090": [
        "Mathematics -> Discrete Mathematics -> Combinatorics"
      ]
    }
  ],
  "Problem_Level": [
    {
      "A2041": "KbsdJames_Omni-MATH_4.0"
    },
    {
      "A2090": "KbsdJames_Omni-MATH_4.0"
    }
  ],
  "Problem_Source": [
    {
      "A2041": "HMMT_11"
    },
    {
      "A2090": "HMMT_11"
    }
  ],
  "Problem_Length": [
    {
      "A2041": 196
    },
    {
      "A2090": 302
    }
  ],
  "Synthesised_Problem_Length": 754,
  "Ground_Truth": [
    {
      "A2041": "78"
    },
    {
      "A2090": "12"
    }
  ],
  "Predicted_Answer": [
    {
      "A2041": "78"
    },
    {
      "A2090": "12"
    }
  ],
  "Connecting_Point": [
    {
      "B3950": {
        "1": "(sum - 77)"
      }
    }
  ],
  "Delta_Factor": [
    {
      "A2041": 0.8
    },
    {
      "A2090": 0.69
    }
  ],
  "Delta_Value": [
    {
      "A2041": {
        "sum": "78"
      }
    },
    {
      "A2090": {
        "|S_3|": "3"
      }
    }
  ],
  "Delta_Depth": [
    {
      "A2041": {
        "sum": 12
      }
    },
    {
      "A2090": {
        "|S_3|": 18
      }
    }
  ],
  "Delta_Source": [
    {
      "A2041": "derived"
    },
    {
      "A2090": "derived"
    }
  ],
  "Delta_Value_Order": [
    {
      "A2041": 1
    },
    {
      "A2090": 1
    }
  ],
  "Delta_Variable_Names": [
    {
      "A2041": [
        "sum"
      ]
    },
    {
      "A2090": [
        "S"
      ]
    }
  ],
  "Delta_Socket": [
    {
      "A2041": {
        "100": 100.0
      }
    },
    {
      "A2090": {
        "1": 1.0
      }
    }
  ],
  "Source_Delta_Socket": [
    {
      "A2041": "goal"
    },
    {
      "A2090": "goal"
    }
  ],
  "Delta_Socket_Order": [
    {
      "A2041": 1
    },
    {
      "A2090": 1
    }
  ],
  "Variable_Names": [
    {
      "A2041": [
        "a",
        "b",
        "p",
        "r",
        "g",
        "m",
        "h",
        "u",
        "l",
        "i",
        "t",
        "C",
        "e",
        "f",
        "v",
        "s",
        "o"
      ]
    },
    {
      "A2090": []
    }
  ],
  "Total_Claims": [
    {
      "A2041": 15
    },
    {
      "A2090": 26
    }
  ],
  "Total_Delta": [
    {
      "A2041": 1
    },
    {
      "A2090": 1
    }
  ],
  "Total_Delta_Socket": [
    {
      "A2041": 1
    },
    {
      "A2090": 1
    }
  ],
  "Max_Delta_Factor": [
    {
      "A2041": 0.8
    },
    {
      "A2090": 0.69
    }
  ],
  "Min_Delta_Factor": [
    {
      "A2041": 0.8
    },
    {
      "A2090": 0.69
    }
  ],
  "Max_Delta_Depth": [
    {
      "A2041": 12
    },
    {
      "A2090": 18
    }
  ],
  "Min_Delta_Depth": [
    {
      "A2041": 12
    },
    {
      "A2090": 18
    }
  ],
  "Claims": [
    {
      "id": "A2041_C1",
      "type": "goal",
      "expr": "largest a + b where a, b positive integers ≤ 100 and ab = (lcm(a,b)/gcd(a,b))^2"
    },
    {
      "id": "A2041_C2",
      "type": "context",
      "expr": "a, b ∈ {1,2,…,100}"
    },
    {
      "id": "A2041_C3",
      "type": "context",
      "expr": "ab = (lcm(a,b)/gcd(a,b))^2"
    },
    {
      "id": "A2041_C4",
      "type": "derived",
      "expr": "∀ p prime, ν_p(a) + ν_p(b) = 2 |ν_p(a) - ν_p(b)|"
    },
    {
      "id": "A2041_C5",
      "type": "derived",
      "expr": "∀ p prime, either ν_p(a) = ν_p(b) = 0 or {ν_p(a), ν_p(b)} = {k, 3k} for integer k ≥ 1"
    },
    {
      "id": "A2041_C6",
      "type": "derived",
      "expr": "for all primes p ≥ 5, ν_p(a) = ν_p(b) = 0"
    },
    {
      "id": "A2041_C7",
      "type": "derived",
      "expr": "a = 2^{ν_2(a)} 3^{ν_3(a)}, b = 2^{ν_2(b)} 3^{ν_3(b)}"
    },
    {
      "id": "A2041_C8",
      "type": "derived",
      "expr": "(ν_2(a), ν_2(b)) ∈ {(0,0), (1,3), (3,1), (2,6), (6,2)}"
    },
    {
      "id": "A2041_C9",
      "type": "derived",
      "expr": "(ν_3(a), ν_3(b)) ∈ {(0,0), (1,3), (3,1)}"
    },
    {
      "id": "A2041_C10",
      "type": "derived",
      "expr": "when (ν_3(a), ν_3(b)) = (0,0), maximum a + b = 68"
    },
    {
      "id": "A2041_C11",
      "type": "derived",
      "expr": "when (ν_3(a), ν_3(b)) = (1,3), then ν_2(b) ≤ 1"
    },
    {
      "id": "A2041_C12",
      "type": "derived",
      "expr": "when (ν_3(a), ν_3(b)) = (1,3), possible: (ν_2(a), ν_2(b)) = (0,0) gives a=3, b=27, sum=30; (3,1) gives a=24, b=54, sum=78"
    },
    {
      "id": "A2041_C13",
      "type": "derived",
      "expr": "when (ν_3(a), ν_3(b)) = (1,3), maximum a + b = 78"
    },
    {
      "id": "A2041_C14",
      "type": "derived",
      "expr": "when (ν_3(a), ν_3(b)) = (3,1), maximum a + b = 78"
    },
    {
      "id": "A2041_C15",
      "type": "final",
      "expr": "largest possible a + b = 78"
    },
    {
      "id": "A2090_C1",
      "type": "derived",
      "expr": "max |R| s.t. R ⊆ [5]×[5], ∀ i<j, |S_i ∩ S_j| ≤ 1 where S_r = {c | (r,c) ∈ R}"
    },
    {
      "id": "A2090_C2",
      "type": "context",
      "expr": "grid is 5×5"
    },
    {
      "id": "A2090_C3",
      "type": "context",
      "expr": "no four red squares form axis-parallel rectangle ⇔ ∀ rows i<j, |S_i ∩ S_j| ≤ 1"
    },
    {
      "id": "A2090_C4",
      "type": "derived",
      "expr": "wlog row 1 has k = max_r |S_r| reds in columns 1..k"
    },
    {
      "id": "A2090_C5",
      "type": "derived",
      "expr": "∀ row i≥2, |S_i ∩ [1,k]| ≤ 1 (to avoid |S_i ∩ S_1| ≥ 2)"
    },
    {
      "id": "A2090_C6",
      "type": "derived",
      "expr": "|R ∩ ([2,5] × [1,k])| ≤ 4"
    },
    {
      "id": "A2090_C7",
      "type": "derived",
      "expr": "|R ∩ ({1} × [1,k])| = k"
    },
    {
      "id": "A2090_C8",
      "type": "derived",
      "expr": "|R ∩ ([1,5] × [k+1,5])| ≤ 4(5-k) (row 1 empty there, ≤4 reds per column)"
    },
    {
      "id": "A2090_C9",
      "type": "derived",
      "expr": "|R| ≤ k + 4 + 4(5-k) = 24 - 3k"
    },
    {
      "id": "A2090_C10",
      "type": "derived",
      "expr": "assume |R| ≥ 13 ⇒ 13 ≤ 24 - 3k ⇒ k ≤ 11/3 ≈ 3.666 ⇒ k ≤ 3"
    },
    {
      "id": "A2090_C11",
      "type": "derived",
      "expr": "max |S_r| ≤ 3 ∀ r"
    },
    {
      "id": "A2090_C12",
      "type": "derived",
      "expr": "let m = # rows with |S_r| = 3; max |R| ≤ 3m + 2(5-m) = m + 10"
    },
    {
      "id": "A2090_C13",
      "type": "derived",
      "expr": "|R| ≥ 13 ⇒ m + 10 ≥ 13 ⇒ m ≥ 3"
    },
    {
      "id": "A2090_C14",
      "type": "derived",
      "expr": "∃ rows 1,2,3 wlog with |S_1| = |S_2| = |S_3| = 3"
    },
    {
      "id": "A2090_C15",
      "type": "derived",
      "expr": "wlog S_1 = {1,2,3}"
    },
    {
      "id": "A2090_C16",
      "type": "derived",
      "expr": "|S_2 ∩ {1,2,3}| ≤ 1, |S_2| = 3 ⇒ |S_2 ∩ {4,5}| ≥ 2 ⇒ S_2 ⊇ {4,5}, |S_2 ∩ {1,2,3}| = 1"
    },
    {
      "id": "A2090_C17",
      "type": "derived",
      "expr": "wlog S_2 = {3,4,5}"
    },
    {
      "id": "A2090_C18",
      "type": "derived",
      "expr": "|S_3 ∩ {1,2,3}| ≤ 1, |S_3 ∩ {3,4,5}| ≤ 1, |S_3| = 3"
    },
    {
      "id": "A2090_C19",
      "type": "derived",
      "expr": "let A={1,2}, B={3}, C={4,5}; |S_3 ∩ (A∪B)| ≤ 1, |S_3 ∩ (B∪C)| ≤ 1"
    },
    {
      "id": "A2090_C20",
      "type": "derived",
      "expr": "let a = |S_3 ∩ A|, b = |S_3 ∩ B|, c = |S_3 ∩ C|; a + b ≤ 1, b + c ≤ 1, a + b + c = 3"
    },
    {
      "id": "A2090_C21",
      "type": "derived",
      "expr": "(a + b) + (b + c) ≤ 2 ⇒ a + 2b + c ≤ 2; but a + b + c = 3 ⇒ 3 + b ≤ 2, contradiction since b ≥ 0"
    },
    {
      "id": "A2090_C22",
      "type": "derived",
      "expr": "impossible to have three rows with |S_r| = 3 satisfying pairwise |S_i ∩ S_j| ≤ 1"
    },
    {
      "id": "A2090_C23",
      "type": "derived",
      "expr": "|R| ≥ 13 ⇒ contradiction"
    },
    {
      "id": "A2090_C24",
      "type": "derived",
      "expr": "max |R| ≤ 12"
    },
    {
      "id": "A2090_C25",
      "type": "derived",
      "expr": "∃ R with |R| = 12, ∀ i<j |S_i ∩ S_j| ≤ 1 (e.g., row1: cols2-5; row2:1,2; row3:1,3; row4:1,4; row5:1,5)"
    },
    {
      "id": "A2090_C26",
      "type": "final",
      "expr": "max |R| = 12"
    },
    {
      "id": "B3950_C1",
      "type": "goal",
      "expr": "max |R| s.t. R ⊆ [5]×[5], ∀ i<j, |S_i ∩ S_j| ≤ (sum - 77) where S_r = {c | (r,c) ∈ R}"
    }
  ],
  "Steps": [
    {
      "id": "A2041_S1",
      "rule": "problem setup",
      "premises": [
        "A2041_C1: largest a + b where a, b positive integers ≤ 100 and ab = (lcm(a,b)/gcd(a,b))^2"
      ],
      "conclusions": [
        "A2041_C2: a, b ∈ {1,2,…,100}",
        "A2041_C3: ab = (lcm(a,b)/gcd(a,b))^2"
      ]
    },
    {
      "id": "A2041_S2",
      "rule": "apply ν_p to equation",
      "premises": [
        "A2041_C3: ab = (lcm(a,b)/gcd(a,b))^2"
      ],
      "conclusions": [
        "A2041_C4: ∀ p prime, ν_p(a) + ν_p(b) = 2 |ν_p(a) - ν_p(b)|"
      ]
    },
    {
      "id": "A2041_S3",
      "rule": "solve α + β = 2|α - β|",
      "premises": [
        "A2041_C4: ∀ p prime, ν_p(a) + ν_p(b) = 2 |ν_p(a) - ν_p(b)|"
      ],
      "conclusions": [
        "A2041_C5: ∀ p prime, either ν_p(a) = ν_p(b) = 0 or {ν_p(a), ν_p(b)} = {k, 3k} for integer k ≥ 1"
      ]
    },
    {
      "id": "A2041_S4",
      "rule": "size bound for p ≥ 5",
      "premises": [
        "A2041_C5: ∀ p prime, either ν_p(a) = ν_p(b) = 0 or {ν_p(a), ν_p(b)} = {k, 3k} for integer k ≥ 1",
        "A2041_C2: a, b ∈ {1,2,…,100}"
      ],
      "conclusions": [
        "A2041_C6: for all primes p ≥ 5, ν_p(a) = ν_p(b) = 0"
      ]
    },
    {
      "id": "A2041_S5",
      "rule": "factorization from prime restrictions",
      "premises": [
        "A2041_C6: for all primes p ≥ 5, ν_p(a) = ν_p(b) = 0"
      ],
      "conclusions": [
        "A2041_C7: a = 2^{ν_2(a)} 3^{ν_3(a)}, b = 2^{ν_2(b)} 3^{ν_3(b)}"
      ]
    },
    {
      "id": "A2041_S6",
      "rule": "enumerate feasible exponents for p=2",
      "premises": [
        "A2041_C5: ∀ p prime, either ν_p(a) = ν_p(b) = 0 or {ν_p(a), ν_p(b)} = {k, 3k} for integer k ≥ 1",
        "A2041_C2: a, b ∈ {1,2,…,100}"
      ],
      "conclusions": [
        "A2041_C8: (ν_2(a), ν_2(b)) ∈ {(0,0), (1,3), (3,1), (2,6), (6,2)}"
      ]
    },
    {
      "id": "A2041_S7",
      "rule": "enumerate feasible exponents for p=3",
      "premises": [
        "A2041_C5: ∀ p prime, either ν_p(a) = ν_p(b) = 0 or {ν_p(a), ν_p(b)} = {k, 3k} for integer k ≥ 1",
        "A2041_C2: a, b ∈ {1,2,…,100}"
      ],
      "conclusions": [
        "A2041_C9: (ν_3(a), ν_3(b)) ∈ {(0,0), (1,3), (3,1)}"
      ]
    },
    {
      "id": "A2041_S8",
      "rule": "case analysis: no 3's",
      "premises": [
        "A2041_C8: (ν_2(a), ν_2(b)) ∈ {(0,0), (1,3), (3,1), (2,6), (6,2)}",
        "A2041_C7: a = 2^{ν_2(a)} 3^{ν_3(a)}, b = 2^{ν_2(b)} 3^{ν_3(b)}",
        "A2041_C2: a, b ∈ {1,2,…,100}"
      ],
      "conclusions": [
        "A2041_C10: when (ν_3(a), ν_3(b)) = (0,0), maximum a + b = 68"
      ]
    },
    {
      "id": "A2041_S9",
      "rule": "bound ν_2(b) when ν_3(b)=3",
      "premises": [
        "A2041_C9: (ν_3(a), ν_3(b)) ∈ {(0,0), (1,3), (3,1)}",
        "A2041_C7: a = 2^{ν_2(a)} 3^{ν_3(a)}, b = 2^{ν_2(b)} 3^{ν_3(b)}",
        "A2041_C2: a, b ∈ {1,2,…,100}"
      ],
      "conclusions": [
        "A2041_C11: when (ν_3(a), ν_3(b)) = (1,3), then ν_2(b) ≤ 1"
      ]
    },
    {
      "id": "A2041_S10",
      "rule": "compatible pairs for (1,3) in 3's",
      "premises": [
        "A2041_C8: (ν_2(a), ν_2(b)) ∈ {(0,0), (1,3), (3,1), (2,6), (6,2)}",
        "A2041_C11: when (ν_3(a), ν_3(b)) = (1,3), then ν_2(b) ≤ 1",
        "A2041_C9: (ν_3(a), ν_3(b)) ∈ {(0,0), (1,3), (3,1)}",
        "A2041_C7: a = 2^{ν_2(a)} 3^{ν_3(a)}, b = 2^{ν_2(b)} 3^{ν_3(b)}"
      ],
      "conclusions": [
        "A2041_C12: when (ν_3(a), ν_3(b)) = (1,3), possible: (ν_2(a), ν_2(b)) = (0,0) gives a=3, b=27, sum=30; (3,1) gives a=24, b=54, sum=78"
      ]
    },
    {
      "id": "A2041_S11",
      "rule": "maximum in (1,3) case for 3's",
      "premises": [
        "A2041_C12: when (ν_3(a), ν_3(b)) = (1,3), possible: (ν_2(a), ν_2(b)) = (0,0) gives a=3, b=27, sum=30; (3,1) gives a=24, b=54, sum=78"
      ],
      "conclusions": [
        "A2041_C13: when (ν_3(a), ν_3(b)) = (1,3), maximum a + b = 78"
      ]
    },
    {
      "id": "A2041_S12",
      "rule": "symmetry for (3,1) case",
      "premises": [
        "A2041_C13: when (ν_3(a), ν_3(b)) = (1,3), maximum a + b = 78"
      ],
      "conclusions": [
        "A2041_C14: when (ν_3(a), ν_3(b)) = (3,1), maximum a + b = 78"
      ]
    },
    {
      "id": "A2041_S13",
      "rule": "overall maximum",
      "premises": [
        "A2041_C10: when (ν_3(a), ν_3(b)) = (0,0), maximum a + b = 68",
        "A2041_C13: when (ν_3(a), ν_3(b)) = (1,3), maximum a + b = 78",
        "A2041_C14: when (ν_3(a), ν_3(b)) = (3,1), maximum a + b = 78"
      ],
      "conclusions": [
        "A2041_C15: largest possible a + b = 78"
      ]
    },
    {
      "id": "A2090_S1",
      "rule": "problem setup",
      "premises": [
        "A2090_C1: max |R| s.t. R ⊆ [5]×[5], ∀ i<j, |S_i ∩ S_j| ≤ 1 where S_r = {c | (r,c) ∈ R}"
      ],
      "conclusions": [
        "A2090_C2: grid is 5×5",
        "A2090_C3: no four red squares form axis-parallel rectangle ⇔ ∀ rows i<j, |S_i ∩ S_j| ≤ 1"
      ]
    },
    {
      "id": "A2090_S2",
      "rule": "wlog assumption",
      "premises": [
        "A2090_C2: grid is 5×5",
        "A2090_C3: no four red squares form axis-parallel rectangle ⇔ ∀ rows i<j, |S_i ∩ S_j| ≤ 1"
      ],
      "conclusions": [
        "A2090_C4: wlog row 1 has k = max_r |S_r| reds in columns 1..k"
      ]
    },
    {
      "id": "A2090_S3",
      "rule": "rectangle avoidance",
      "premises": [
        "A2090_C3: no four red squares form axis-parallel rectangle ⇔ ∀ rows i<j, |S_i ∩ S_j| ≤ 1",
        "A2090_C4: wlog row 1 has k = max_r |S_r| reds in columns 1..k"
      ],
      "conclusions": [
        "A2090_C5: ∀ row i≥2, |S_i ∩ [1,k]| ≤ 1 (to avoid |S_i ∩ S_1| ≥ 2)"
      ]
    },
    {
      "id": "A2090_S4",
      "rule": "counting bound",
      "premises": [
        "A2090_C5: ∀ row i≥2, |S_i ∩ [1,k]| ≤ 1 (to avoid |S_i ∩ S_1| ≥ 2)"
      ],
      "conclusions": [
        "A2090_C6: |R ∩ ([2,5] × [1,k])| ≤ 4"
      ]
    },
    {
      "id": "A2090_S5",
      "rule": "given",
      "premises": [
        "A2090_C4: wlog row 1 has k = max_r |S_r| reds in columns 1..k"
      ],
      "conclusions": [
        "A2090_C7: |R ∩ ({1} × [1,k])| = k"
      ]
    },
    {
      "id": "A2090_S6",
      "rule": "empty row bound",
      "premises": [
        "A2090_C4: wlog row 1 has k = max_r |S_r| reds in columns 1..k"
      ],
      "conclusions": [
        "A2090_C8: |R ∩ ([1,5] × [k+1,5])| ≤ 4(5-k) (row 1 empty there, ≤4 reds per column)"
      ]
    },
    {
      "id": "A2090_S7",
      "rule": "total bound",
      "premises": [
        "A2090_C6: |R ∩ ([2,5] × [1,k])| ≤ 4",
        "A2090_C7: |R ∩ ({1} × [1,k])| = k",
        "A2090_C8: |R ∩ ([1,5] × [k+1,5])| ≤ 4(5-k) (row 1 empty there, ≤4 reds per column)"
      ],
      "conclusions": [
        "A2090_C9: |R| ≤ k + 4 + 4(5-k) = 24 - 3k"
      ]
    },
    {
      "id": "A2090_S8",
      "rule": "inequality solving",
      "premises": [
        "A2090_C9: |R| ≤ k + 4 + 4(5-k) = 24 - 3k"
      ],
      "conclusions": [
        "A2090_C10: assume |R| ≥ 13 ⇒ 13 ≤ 24 - 3k ⇒ k ≤ 11/3 ≈ 3.666 ⇒ k ≤ 3"
      ]
    },
    {
      "id": "A2090_S9",
      "rule": "max row size",
      "premises": [
        "A2090_C10: assume |R| ≥ 13 ⇒ 13 ≤ 24 - 3k ⇒ k ≤ 11/3 ≈ 3.666 ⇒ k ≤ 3"
      ],
      "conclusions": [
        "A2090_C11: max |S_r| ≤ 3 ∀ r"
      ]
    },
    {
      "id": "A2090_S10",
      "rule": "max total expression",
      "premises": [
        "A2090_C11: max |S_r| ≤ 3 ∀ r"
      ],
      "conclusions": [
        "A2090_C12: let m = # rows with |S_r| = 3; max |R| ≤ 3m + 2(5-m) = m + 10"
      ]
    },
    {
      "id": "A2090_S11",
      "rule": "implication for m",
      "premises": [
        "A2090_C12: let m = # rows with |S_r| = 3; max |R| ≤ 3m + 2(5-m) = m + 10"
      ],
      "conclusions": [
        "A2090_C13: |R| ≥ 13 ⇒ m + 10 ≥ 13 ⇒ m ≥ 3"
      ]
    },
    {
      "id": "A2090_S12",
      "rule": "existence from count",
      "premises": [
        "A2090_C13: |R| ≥ 13 ⇒ m + 10 ≥ 13 ⇒ m ≥ 3"
      ],
      "conclusions": [
        "A2090_C14: ∃ rows 1,2,3 wlog with |S_1| = |S_2| = |S_3| = 3"
      ]
    },
    {
      "id": "A2090_S13",
      "rule": "wlog column perm",
      "premises": [
        "A2090_C14: ∃ rows 1,2,3 wlog with |S_1| = |S_2| = |S_3| = 3"
      ],
      "conclusions": [
        "A2090_C15: wlog S_1 = {1,2,3}"
      ]
    },
    {
      "id": "A2090_S14",
      "rule": "intersection bound",
      "premises": [
        "A2090_C3: no four red squares form axis-parallel rectangle ⇔ ∀ rows i<j, |S_i ∩ S_j| ≤ 1",
        "A2090_C15: wlog S_1 = {1,2,3}"
      ],
      "conclusions": [
        "A2090_C16: |S_2 ∩ {1,2,3}| ≤ 1, |S_2| = 3 ⇒ |S_2 ∩ {4,5}| ≥ 2 ⇒ S_2 ⊇ {4,5}, |S_2 ∩ {1,2,3}| = 1"
      ]
    },
    {
      "id": "A2090_S15",
      "rule": "wlog column perm",
      "premises": [
        "A2090_C16: |S_2 ∩ {1,2,3}| ≤ 1, |S_2| = 3 ⇒ |S_2 ∩ {4,5}| ≥ 2 ⇒ S_2 ⊇ {4,5}, |S_2 ∩ {1,2,3}| = 1"
      ],
      "conclusions": [
        "A2090_C17: wlog S_2 = {3,4,5}"
      ]
    },
    {
      "id": "A2090_S16",
      "rule": "intersection constraints",
      "premises": [
        "A2090_C3: no four red squares form axis-parallel rectangle ⇔ ∀ rows i<j, |S_i ∩ S_j| ≤ 1",
        "A2090_C15: wlog S_1 = {1,2,3}",
        "A2090_C17: wlog S_2 = {3,4,5}"
      ],
      "conclusions": [
        "A2090_C18: |S_3 ∩ {1,2,3}| ≤ 1, |S_3 ∩ {3,4,5}| ≤ 1, |S_3| = 3"
      ]
    },
    {
      "id": "A2090_S17",
      "rule": "partition",
      "premises": [
        "A2090_C18: |S_3 ∩ {1,2,3}| ≤ 1, |S_3 ∩ {3,4,5}| ≤ 1, |S_3| = 3"
      ],
      "conclusions": [
        "A2090_C19: let A={1,2}, B={3}, C={4,5}; |S_3 ∩ (A∪B)| ≤ 1, |S_3 ∩ (B∪C)| ≤ 1"
      ]
    },
    {
      "id": "A2090_S18",
      "rule": "variable definition",
      "premises": [
        "A2090_C19: let A={1,2}, B={3}, C={4,5}; |S_3 ∩ (A∪B)| ≤ 1, |S_3 ∩ (B∪C)| ≤ 1"
      ],
      "conclusions": [
        "A2090_C20: let a = |S_3 ∩ A|, b = |S_3 ∩ B|, c = |S_3 ∩ C|; a + b ≤ 1, b + c ≤ 1, a + b + c = 3"
      ]
    },
    {
      "id": "A2090_S19",
      "rule": "inequality addition",
      "premises": [
        "A2090_C20: let a = |S_3 ∩ A|, b = |S_3 ∩ B|, c = |S_3 ∩ C|; a + b ≤ 1, b + c ≤ 1, a + b + c = 3"
      ],
      "conclusions": [
        "A2090_C21: (a + b) + (b + c) ≤ 2 ⇒ a + 2b + c ≤ 2; but a + b + c = 3 ⇒ 3 + b ≤ 2, contradiction since b ≥ 0"
      ]
    },
    {
      "id": "A2090_S20",
      "rule": "contradiction",
      "premises": [
        "A2090_C21: (a + b) + (b + c) ≤ 2 ⇒ a + 2b + c ≤ 2; but a + b + c = 3 ⇒ 3 + b ≤ 2, contradiction since b ≥ 0"
      ],
      "conclusions": [
        "A2090_C22: impossible to have three rows with |S_r| = 3 satisfying pairwise |S_i ∩ S_j| ≤ 1"
      ]
    },
    {
      "id": "A2090_S21",
      "rule": "chain to contradiction",
      "premises": [
        "A2090_C10: assume |R| ≥ 13 ⇒ 13 ≤ 24 - 3k ⇒ k ≤ 11/3 ≈ 3.666 ⇒ k ≤ 3",
        "A2090_C11: max |S_r| ≤ 3 ∀ r",
        "A2090_C12: let m = # rows with |S_r| = 3; max |R| ≤ 3m + 2(5-m) = m + 10",
        "A2090_C13: |R| ≥ 13 ⇒ m + 10 ≥ 13 ⇒ m ≥ 3",
        "A2090_C14: ∃ rows 1,2,3 wlog with |S_1| = |S_2| = |S_3| = 3",
        "A2090_C22: impossible to have three rows with |S_r| = 3 satisfying pairwise |S_i ∩ S_j| ≤ 1"
      ],
      "conclusions": [
        "A2090_C23: |R| ≥ 13 ⇒ contradiction"
      ]
    },
    {
      "id": "A2090_S22",
      "rule": "upper bound",
      "premises": [
        "A2090_C23: |R| ≥ 13 ⇒ contradiction"
      ],
      "conclusions": [
        "A2090_C24: max |R| ≤ 12"
      ]
    },
    {
      "id": "A2090_S23",
      "rule": "construction existence",
      "premises": [
        "A2090_C3: no four red squares form axis-parallel rectangle ⇔ ∀ rows i<j, |S_i ∩ S_j| ≤ 1"
      ],
      "conclusions": [
        "A2090_C25: ∃ R with |R| = 12, ∀ i<j |S_i ∩ S_j| ≤ 1 (e.g., row1: cols2-5; row2:1,2; row3:1,3; row4:1,4; row5:1,5)"
      ]
    },
    {
      "id": "A2090_S24",
      "rule": "final conclusion",
      "premises": [
        "A2090_C24: max |R| ≤ 12",
        "A2090_C25: ∃ R with |R| = 12, ∀ i<j |S_i ∩ S_j| ≤ 1 (e.g., row1: cols2-5; row2:1,2; row3:1,3; row4:1,4; row5:1,5)"
      ],
      "conclusions": [
        "A2090_C26: max |R| = 12"
      ]
    },
    {
      "id": "B3950_S1",
      "rule": "problem connection",
      "premises": [
        "B3950_C1: max |R| s.t. R ⊆ [5]×[5], ∀ i<j, |S_i ∩ S_j| ≤ (sum - 77) where S_r = {c | (r,c) ∈ R}",
        "A2041_C12: when (ν_3(a), ν_3(b)) = (1,3), possible: (ν_2(a), ν_2(b)) = (0,0) gives a=3, b=27, sum=30; (3,1) gives a=24, b=54, sum=78"
      ],
      "conclusions": [
        "A2090_C1: max |R| s.t. R ⊆ [5]×[5], ∀ i<j, |S_i ∩ S_j| ≤ 1 where S_r = {c | (r,c) ∈ R}"
      ]
    }
  ]
}