{
  "Problem_ID": 23,
  "Chunk_Type": "T5",
  "Class_ID": "B1558",
  "Multiple_Synthesis_Class": "MP2",
  "Sub_Class_ID": [
    {
      "A3953": "A3953_DG_1"
    },
    {
      "A40": "A40_DG_1"
    }
  ],
  "Synthesis_Trace": "DG-DG",
  "Synthesis_Status": "Continuable",
  "Math_Problem": "Let $R^+$ be the set of positive real numbers. Determine all functions $f:R^+$ $\\rightarrow$ $R^+$ such that for all positive real numbers $x$ and $y:$\n$$f(x+f(xy))+y=f(x)f(y)+1$$ Instead of determining all functions from positive reals to positive reals satisfying the given functional equation, simply find $n = f(1) + 4$, where $f(1)$ is the value at 1 of any such function $f$. Find all positive integers $a$ such that there exists a set $X$ of $n$ integers satisfying the following conditions: for every $k=1,2,\\ldots ,36$ there exist $x,y\\in X$ such that $ax+y-k$ is divisible by $(n + 31)$.",
  "Connecting_Sentence": [
    {
      "A3953": "Instead of determining all functions from positive reals to positive reals satisfying the given functional equation, simply find $n = f(1) + 4$, where $f(1)$ is the value at 1 of any such function $f$."
    },
    {
      "A40": "None"
    }
  ],
  "Synthesised_By": [
    {
      "A3953": "Let $R^+$ be the set of positive real numbers. Determine all functions $f:R^+$ $\\rightarrow$ $R^+$ such that for all positive real numbers $x$ and $y:$\n           $$f(x+f(xy))+y=f(x)f(y)+1$$\n\n[i]Ukraine Instead of determining all functions from positive reals to positive reals satisfying the given functional equation, simply find $n = f(1) + 4$, where $f(1)$ is the value at 1 of any such function $f$."
    },
    {
      "A40": "Find all positive integers $a$ such that there exists a set $X$ of $6$ integers satisfying the following conditions: for every $k=1,2,\\ldots ,36$ there exist $x,y\\in X$ such that $ax+y-k$ is divisible by $37$."
    }
  ],
  "Original_Problem": [
    {
      "A3953": "Let $R^+$ be the set of positive real numbers. Determine all functions $f:R^+$ $\\rightarrow$ $R^+$ such that for all positive real numbers $x$ and $y:$\n           $$f(x+f(xy))+y=f(x)f(y)+1$$\n\n[i]Ukraine"
    },
    {
      "A40": "Find all positive integers $a$ such that there exists a set $X$ of $6$ integers satisfying the following conditions: for every $k=1,2,\\ldots ,36$ there exist $x,y\\in X$ such that $ax+y-k$ is divisible by $37$."
    }
  ],
  "Problem_Type": [
    {
      "A3953": [
        "Mathematics -> Algebra -> Algebra -> Equations and Inequalities"
      ]
    },
    {
      "A40": [
        "Mathematics -> Number Theory -> Congruences",
        "Mathematics -> Algebra -> Abstract Algebra -> Group Theory"
      ]
    }
  ],
  "Problem_Level": [
    {
      "A3953": "KbsdJames_Omni-MATH_7.5"
    },
    {
      "A40": "KbsdJames_Omni-MATH_7.5"
    }
  ],
  "Problem_Source": [
    {
      "A3953": "imo_shortlist"
    },
    {
      "A40": "china_national_olympiad"
    }
  ],
  "Problem_Length": [
    {
      "A3953": 202
    },
    {
      "A40": 209
    }
  ],
  "Synthesised_Problem_Length": 591,
  "Ground_Truth": [
    {
      "A3953": "f(x) = x + 1"
    },
    {
      "A40": "6, 31"
    }
  ],
  "Predicted_Answer": [
    {
      "A3953": "f(x) = x + 1"
    },
    {
      "A40": "6, 31"
    }
  ],
  "Connecting_Point": [
    {
      "B1558": {
        "6": "(f(1) + 4)"
      }
    }
  ],
  "Delta_Factor": [
    {
      "A3953": 0.56
    },
    {
      "A40": 0.1
    }
  ],
  "Delta_Value": [
    {
      "A3953": {
        "f(1)": "2"
      }
    },
    {
      "A40": {
        "|X|": "6"
      }
    }
  ],
  "Delta_Depth": [
    {
      "A3953": {
        "f(1)": 14
      }
    },
    {
      "A40": {
        "|X|": 4
      }
    }
  ],
  "Delta_Source": [
    {
      "A3953": "derived"
    },
    {
      "A40": "derived"
    }
  ],
  "Delta_Value_Order": [
    {
      "A3953": 1
    },
    {
      "A40": 1
    }
  ],
  "Delta_Variable_Names": [
    {
      "A3953": [
        "f"
      ]
    },
    {
      "A40": [
        "X"
      ]
    }
  ],
  "Delta_Socket": [
    {
      "A3953": {
        "0": 0.0
      }
    },
    {
      "A40": {
        "6": 6.0
      }
    }
  ],
  "Source_Delta_Socket": [
    {
      "A3953": "goal"
    },
    {
      "A40": "goal"
    }
  ],
  "Delta_Socket_Order": [
    {
      "A3953": 1
    },
    {
      "A40": 1
    }
  ],
  "Variable_Names": [
    {
      "A3953": [
        "R",
        "f",
        "x",
        "y"
      ]
    },
    {
      "A40": [
        "a",
        "X",
        "k",
        "x",
        "y"
      ]
    }
  ],
  "Total_Claims": [
    {
      "A3953": 25
    },
    {
      "A40": 41
    }
  ],
  "Total_Delta": [
    {
      "A3953": 1
    },
    {
      "A40": 1
    }
  ],
  "Total_Delta_Socket": [
    {
      "A3953": 1
    },
    {
      "A40": 1
    }
  ],
  "Max_Delta_Factor": [
    {
      "A3953": 0.56
    },
    {
      "A40": 0.1
    }
  ],
  "Min_Delta_Factor": [
    {
      "A3953": 0.56
    },
    {
      "A40": 0.1
    }
  ],
  "Max_Delta_Depth": [
    {
      "A3953": 14
    },
    {
      "A40": 4
    }
  ],
  "Min_Delta_Depth": [
    {
      "A3953": 14
    },
    {
      "A40": 4
    }
  ],
  "Claims": [
    {
      "id": "A3953_C1",
      "type": "goal",
      "expr": "Determine all f:R^+ → R^+ s.t. ∀x,y>0, f(x + f(xy)) + y = f(x)f(y) + 1"
    },
    {
      "id": "A3953_C2",
      "type": "context",
      "expr": "∀x,y>0, f(x + f(xy)) + y = f(x)f(y) + 1"
    },
    {
      "id": "A3953_C3",
      "type": "context",
      "expr": "f:R^+ → R^+"
    },
    {
      "id": "A3953_C4",
      "type": "derived",
      "expr": "f(x) = x + 1"
    },
    {
      "id": "A3953_C5",
      "type": "derived",
      "expr": "f(xy) = xy + 1"
    },
    {
      "id": "A3953_C6",
      "type": "derived",
      "expr": "x + f(xy) = x + xy + 1"
    },
    {
      "id": "A3953_C7",
      "type": "derived",
      "expr": "f(x + f(xy)) = x + xy + 2"
    },
    {
      "id": "A3953_C8",
      "type": "derived",
      "expr": "f(x + f(xy)) + y = x + xy + y + 2"
    },
    {
      "id": "A3953_C9",
      "type": "derived",
      "expr": "f(x)f(y) = (x + 1)(y + 1) = xy + x + y + 1"
    },
    {
      "id": "A3953_C10",
      "type": "derived",
      "expr": "f(x)f(y) + 1 = xy + x + y + 2"
    },
    {
      "id": "A3953_C11",
      "type": "derived",
      "expr": "LHS = RHS = xy + x + y + 2"
    },
    {
      "id": "A3953_C12",
      "type": "derived",
      "expr": "for y=1, f(x + f(x)) + 1 = f(x) f(1) + 1"
    },
    {
      "id": "A3953_C13",
      "type": "derived",
      "expr": "f(x + f(x)) = f(x) f(1)"
    },
    {
      "id": "A3953_C14",
      "type": "derived",
      "expr": "f(1) = 2"
    },
    {
      "id": "A3953_C15",
      "type": "derived",
      "expr": "x + f(x) = 2x + 1"
    },
    {
      "id": "A3953_C16",
      "type": "derived",
      "expr": "f(2x + 1) = 2x + 2"
    },
    {
      "id": "A3953_C17",
      "type": "derived",
      "expr": "f(x) f(1) = 2x + 2"
    },
    {
      "id": "A3953_C18",
      "type": "derived",
      "expr": "f(2x + 1) = f(x) f(1)"
    },
    {
      "id": "A3953_C19",
      "type": "derived",
      "expr": "for x=1, f(1 + f(y)) + y = f(1) f(y) + 1"
    },
    {
      "id": "A3953_C20",
      "type": "derived",
      "expr": "f(1 + f(y)) = f(1) f(y) + 1 - y"
    },
    {
      "id": "A3953_C21",
      "type": "derived",
      "expr": "1 + f(y) = y + 2"
    },
    {
      "id": "A3953_C22",
      "type": "derived",
      "expr": "f(y + 2) = y + 3"
    },
    {
      "id": "A3953_C23",
      "type": "derived",
      "expr": "f(1) f(y) + 1 - y = y + 3"
    },
    {
      "id": "A3953_C24",
      "type": "derived",
      "expr": "f(y + 2) = f(1) f(y) + 1 - y"
    },
    {
      "id": "A3953_C25",
      "type": "final",
      "expr": "f(x) = x + 1"
    },
    {
      "id": "A40_C1",
      "type": "derived",
      "expr": "positive integers a s.t. exists X subset Z, |X|=6, forall k=1..36 exists x,y in X s.t. ax + y ≡ k mod 37"
    },
    {
      "id": "A40_C2",
      "type": "context",
      "expr": "37 is prime"
    },
    {
      "id": "A40_C3",
      "type": "context",
      "expr": "work in F_{37} = Z/37Z"
    },
    {
      "id": "A40_C4",
      "type": "derived",
      "expr": "X can be taken subset F_{37}, |X|=6"
    },
    {
      "id": "A40_C5",
      "type": "derived",
      "expr": "aX + X = F_{37} \\ {0}"
    },
    {
      "id": "A40_C6",
      "type": "context",
      "expr": "ω primitive 37th root of unity"
    },
    {
      "id": "A40_C7",
      "type": "derived",
      "expr": "S(b) = sum_{t in X} ω^{b t} for b in Z/37Z"
    },
    {
      "id": "A40_C8",
      "type": "derived",
      "expr": "sum_{x,y in X} z^{a x + y} = sum_{k=1}^{36} z^k"
    },
    {
      "id": "A40_C9",
      "type": "derived",
      "expr": "S(j a) S(j) = -1 for all j=1..36"
    },
    {
      "id": "A40_C10",
      "type": "derived",
      "expr": "S(a) S(1) = -1"
    },
    {
      "id": "A40_C11",
      "type": "derived",
      "expr": "S(a^2) S(a) = -1"
    },
    {
      "id": "A40_C12",
      "type": "derived",
      "expr": "S(a^2) S(a) = S(a) S(1)"
    },
    {
      "id": "A40_C13",
      "type": "derived",
      "expr": "S(a) ≠ 0"
    },
    {
      "id": "A40_C14",
      "type": "derived",
      "expr": "S(a^2) = S(1)"
    },
    {
      "id": "A40_C15",
      "type": "derived",
      "expr": "S(a^2 j) = S(j) for all j=1..36"
    },
    {
      "id": "A40_C16",
      "type": "derived",
      "expr": "a^2 X = X as sets in F_{37}"
    },
    {
      "id": "A40_C17",
      "type": "derived",
      "expr": "multiplication by a^2 permutes X"
    },
    {
      "id": "A40_C18",
      "type": "derived",
      "expr": "let π: X → X, π(t) = a^2 t mod 37"
    },
    {
      "id": "A40_C19",
      "type": "derived",
      "expr": "d = ord_{37}(a^2)"
    },
    {
      "id": "A40_C20",
      "type": "derived",
      "expr": "cycle lengths of π divide d"
    },
    {
      "id": "A40_C21",
      "type": "derived",
      "expr": "possible d ∈ {1,2,3,6}"
    },
    {
      "id": "A40_C22",
      "type": "derived",
      "expr": "if d=1 then a^2 ≡ 1 mod 37"
    },
    {
      "id": "A40_C23",
      "type": "derived",
      "expr": "if a ≡ 1 mod 37 then |X + X| ≤ 11 < 36"
    },
    {
      "id": "A40_C24",
      "type": "derived",
      "expr": "if a ≡ -1 mod 37 then S(-1) S(1) = |S(1)|^2 = -1, contradiction"
    },
    {
      "id": "A40_C25",
      "type": "derived",
      "expr": "d=1 impossible"
    },
    {
      "id": "A40_C26",
      "type": "derived",
      "expr": "if d=3 and a^3 ≡ -1 mod 37 then |S(1)|^2 = -1, contradiction"
    },
    {
      "id": "A40_C27",
      "type": "derived",
      "expr": "if d=3 and a^3 ≡ 1 mod 37 then aX = X"
    },
    {
      "id": "A40_C28",
      "type": "derived",
      "expr": "if aX = X then |aX + X| = |X + X| ≤ 11 < 36"
    },
    {
      "id": "A40_C29",
      "type": "derived",
      "expr": "d=3 impossible"
    },
    {
      "id": "A40_C30",
      "type": "derived",
      "expr": "if d=2 then a^2 ≡ -1 mod 37"
    },
    {
      "id": "A40_C31",
      "type": "derived",
      "expr": "solutions to a^2 ≡ -1 mod 37 are a ≡ 6, 31 mod 37"
    },
    {
      "id": "A40_C32",
      "type": "derived",
      "expr": "for a ≡ 6 or 31 mod 37, X = {16,17,18,19,20,21} works"
    },
    {
      "id": "A40_C33",
      "type": "derived",
      "expr": "d=2 possible"
    },
    {
      "id": "A40_C34",
      "type": "derived",
      "expr": "if d=6 then X = {t, a^2 t, a^4 t, a^6 t, a^8 t, a^{10} t} for some t"
    },
    {
      "id": "A40_C35",
      "type": "derived",
      "expr": "normalizing, X/t = 6th powers mod 37 = H, order 6 subgroup"
    },
    {
      "id": "A40_C36",
      "type": "derived",
      "expr": "aX / t = cubes not in H"
    },
    {
      "id": "A40_C37",
      "type": "derived",
      "expr": "specific X = {1,27,26,36,10,11}, aX = {8,31,23,29,6,14}"
    },
    {
      "id": "A40_C38",
      "type": "derived",
      "expr": "1 + 6 ≡ 7 ≡ 36 + 8 mod 37, collision"
    },
    {
      "id": "A40_C39",
      "type": "derived",
      "expr": "d=6 does not cover all nonzero residues"
    },
    {
      "id": "A40_C40",
      "type": "derived",
      "expr": "d=6 impossible"
    },
    {
      "id": "A40_C41",
      "type": "final",
      "expr": "only a = 6, 31"
    },
    {
      "id": "B1558_C1",
      "type": "goal",
      "expr": "positive integers a s.t. exists X subset Z, |X|=(f(1) + 4), forall k=1..36 exists x,y in X s.t. ax + y ≡ k mod 37"
    }
  ],
  "Steps": [
    {
      "id": "A3953_S1",
      "rule": "problem setup",
      "premises": [
        "A3953_C1: Determine all f:R^+ → R^+ s.t. ∀x,y>0, f(x + f(xy)) + y = f(x)f(y) + 1"
      ],
      "conclusions": [
        "A3953_C2: ∀x,y>0, f(x + f(xy)) + y = f(x)f(y) + 1",
        "A3953_C3: f:R^+ → R^+"
      ]
    },
    {
      "id": "A3953_S2",
      "rule": "propose candidate function",
      "premises": [
        "A3953_C1: Determine all f:R^+ → R^+ s.t. ∀x,y>0, f(x + f(xy)) + y = f(x)f(y) + 1"
      ],
      "conclusions": [
        "A3953_C4: f(x) = x + 1"
      ]
    },
    {
      "id": "A3953_S3",
      "rule": "apply assumption to f(xy)",
      "premises": [
        "A3953_C4: f(x) = x + 1"
      ],
      "conclusions": [
        "A3953_C5: f(xy) = xy + 1"
      ]
    },
    {
      "id": "A3953_S4",
      "rule": "compute x + f(xy)",
      "premises": [
        "A3953_C5: f(xy) = xy + 1"
      ],
      "conclusions": [
        "A3953_C6: x + f(xy) = x + xy + 1"
      ]
    },
    {
      "id": "A3953_S5",
      "rule": "apply f to argument",
      "premises": [
        "A3953_C4: f(x) = x + 1",
        "A3953_C6: x + f(xy) = x + xy + 1"
      ],
      "conclusions": [
        "A3953_C7: f(x + f(xy)) = x + xy + 2"
      ]
    },
    {
      "id": "A3953_S6",
      "rule": "add y to f(x + f(xy))",
      "premises": [
        "A3953_C7: f(x + f(xy)) = x + xy + 2"
      ],
      "conclusions": [
        "A3953_C8: f(x + f(xy)) + y = x + xy + y + 2"
      ]
    },
    {
      "id": "A3953_S7",
      "rule": "compute f(x) f(y)",
      "premises": [
        "A3953_C4: f(x) = x + 1"
      ],
      "conclusions": [
        "A3953_C9: f(x)f(y) = (x + 1)(y + 1) = xy + x + y + 1"
      ]
    },
    {
      "id": "A3953_S8",
      "rule": "add 1 to f(x)f(y)",
      "premises": [
        "A3953_C9: f(x)f(y) = (x + 1)(y + 1) = xy + x + y + 1"
      ],
      "conclusions": [
        "A3953_C10: f(x)f(y) + 1 = xy + x + y + 2"
      ]
    },
    {
      "id": "A3953_S9",
      "rule": "verify equality of sides",
      "premises": [
        "A3953_C8: f(x + f(xy)) + y = x + xy + y + 2",
        "A3953_C10: f(x)f(y) + 1 = xy + x + y + 2"
      ],
      "conclusions": [
        "A3953_C11: LHS = RHS = xy + x + y + 2"
      ]
    },
    {
      "id": "A3953_S10",
      "rule": "substitute y=1",
      "premises": [
        "A3953_C2: ∀x,y>0, f(x + f(xy)) + y = f(x)f(y) + 1"
      ],
      "conclusions": [
        "A3953_C12: for y=1, f(x + f(x)) + 1 = f(x) f(1) + 1"
      ]
    },
    {
      "id": "A3953_S11",
      "rule": "subtract 1 from both sides",
      "premises": [
        "A3953_C12: for y=1, f(x + f(x)) + 1 = f(x) f(1) + 1"
      ],
      "conclusions": [
        "A3953_C13: f(x + f(x)) = f(x) f(1)"
      ]
    },
    {
      "id": "A3953_S12",
      "rule": "apply assumption at 1",
      "premises": [
        "A3953_C4: f(x) = x + 1"
      ],
      "conclusions": [
        "A3953_C14: f(1) = 2"
      ]
    },
    {
      "id": "A3953_S13",
      "rule": "compute x + f(x)",
      "premises": [
        "A3953_C4: f(x) = x + 1"
      ],
      "conclusions": [
        "A3953_C15: x + f(x) = 2x + 1"
      ]
    },
    {
      "id": "A3953_S14",
      "rule": "apply f to 2x+1",
      "premises": [
        "A3953_C4: f(x) = x + 1",
        "A3953_C15: x + f(x) = 2x + 1"
      ],
      "conclusions": [
        "A3953_C16: f(2x + 1) = 2x + 2"
      ]
    },
    {
      "id": "A3953_S15",
      "rule": "compute f(x) * f(1)",
      "premises": [
        "A3953_C4: f(x) = x + 1",
        "A3953_C14: f(1) = 2"
      ],
      "conclusions": [
        "A3953_C17: f(x) f(1) = 2x + 2"
      ]
    },
    {
      "id": "A3953_S16",
      "rule": "check equality for y=1 case",
      "premises": [
        "A3953_C16: f(2x + 1) = 2x + 2",
        "A3953_C17: f(x) f(1) = 2x + 2"
      ],
      "conclusions": [
        "A3953_C18: f(2x + 1) = f(x) f(1)"
      ]
    },
    {
      "id": "A3953_S17",
      "rule": "substitute x=1",
      "premises": [
        "A3953_C2: ∀x,y>0, f(x + f(xy)) + y = f(x)f(y) + 1"
      ],
      "conclusions": [
        "A3953_C19: for x=1, f(1 + f(y)) + y = f(1) f(y) + 1"
      ]
    },
    {
      "id": "A3953_S18",
      "rule": "rearrange for f(1 + f(y))",
      "premises": [
        "A3953_C19: for x=1, f(1 + f(y)) + y = f(1) f(y) + 1"
      ],
      "conclusions": [
        "A3953_C20: f(1 + f(y)) = f(1) f(y) + 1 - y"
      ]
    },
    {
      "id": "A3953_S19",
      "rule": "compute 1 + f(y)",
      "premises": [
        "A3953_C4: f(x) = x + 1"
      ],
      "conclusions": [
        "A3953_C21: 1 + f(y) = y + 2"
      ]
    },
    {
      "id": "A3953_S20",
      "rule": "apply f to y+2",
      "premises": [
        "A3953_C4: f(x) = x + 1",
        "A3953_C21: 1 + f(y) = y + 2"
      ],
      "conclusions": [
        "A3953_C22: f(y + 2) = y + 3"
      ]
    },
    {
      "id": "A3953_S21",
      "rule": "compute right side for x=1 case",
      "premises": [
        "A3953_C4: f(x) = x + 1",
        "A3953_C14: f(1) = 2"
      ],
      "conclusions": [
        "A3953_C23: f(1) f(y) + 1 - y = y + 3"
      ]
    },
    {
      "id": "A3953_S22",
      "rule": "check equality for x=1 case",
      "premises": [
        "A3953_C22: f(y + 2) = y + 3",
        "A3953_C23: f(1) f(y) + 1 - y = y + 3"
      ],
      "conclusions": [
        "A3953_C24: f(y + 2) = f(1) f(y) + 1 - y"
      ]
    },
    {
      "id": "A3953_S23",
      "rule": "conclude uniqueness from satisfaction and special cases",
      "premises": [
        "A3953_C11: LHS = RHS = xy + x + y + 2",
        "A3953_C18: f(2x + 1) = f(x) f(1)",
        "A3953_C24: f(y + 2) = f(1) f(y) + 1 - y"
      ],
      "conclusions": [
        "A3953_C25: f(x) = x + 1"
      ]
    },
    {
      "id": "A40_S1",
      "rule": "problem setup",
      "premises": [
        "A40_C1: positive integers a s.t. exists X subset Z, |X|=6, forall k=1..36 exists x,y in X s.t. ax + y ≡ k mod 37"
      ],
      "conclusions": [
        "A40_C2: 37 is prime",
        "A40_C3: work in F_{37} = Z/37Z",
        "A40_C4: X can be taken subset F_{37}, |X|=6"
      ]
    },
    {
      "id": "A40_S2",
      "rule": "surjectivity to nonzero",
      "premises": [
        "A40_C4: X can be taken subset F_{37}, |X|=6",
        "A40_C5: aX + X = F_{37} \\ {0}"
      ],
      "conclusions": [
        "A40_C5: aX + X = F_{37} \\ {0}"
      ]
    },
    {
      "id": "A40_S3",
      "rule": "introduce roots of unity",
      "premises": [
        "A40_C2: 37 is prime",
        "A40_C6: ω primitive 37th root of unity"
      ],
      "conclusions": [
        "A40_C6: ω primitive 37th root of unity",
        "A40_C7: S(b) = sum_{t in X} ω^{b t} for b in Z/37Z"
      ]
    },
    {
      "id": "A40_S4",
      "rule": "generating polynomial equality",
      "premises": [
        "A40_C5: aX + X = F_{37} \\ {0}",
        "A40_C7: S(b) = sum_{t in X} ω^{b t} for b in Z/37Z"
      ],
      "conclusions": [
        "A40_C8: sum_{x,y in X} z^{a x + y} = sum_{k=1}^{36} z^k"
      ]
    },
    {
      "id": "A40_S5",
      "rule": "evaluation at roots",
      "premises": [
        "A40_C6: ω primitive 37th root of unity",
        "A40_C8: sum_{x,y in X} z^{a x + y} = sum_{k=1}^{36} z^k"
      ],
      "conclusions": [
        "A40_C9: S(j a) S(j) = -1 for all j=1..36"
      ]
    },
    {
      "id": "A40_S6",
      "rule": "particular case j=1",
      "premises": [
        "A40_C9: S(j a) S(j) = -1 for all j=1..36"
      ],
      "conclusions": [
        "A40_C10: S(a) S(1) = -1"
      ]
    },
    {
      "id": "A40_S7",
      "rule": "particular case j=a",
      "premises": [
        "A40_C9: S(j a) S(j) = -1 for all j=1..36"
      ],
      "conclusions": [
        "A40_C11: S(a^2) S(a) = -1"
      ]
    },
    {
      "id": "A40_S8",
      "rule": "equality of products",
      "premises": [
        "A40_C10: S(a) S(1) = -1",
        "A40_C11: S(a^2) S(a) = -1"
      ],
      "conclusions": [
        "A40_C12: S(a^2) S(a) = S(a) S(1)"
      ]
    },
    {
      "id": "A40_S9",
      "rule": "nonzero assumption",
      "premises": [
        "A40_C10: S(a) S(1) = -1"
      ],
      "conclusions": [
        "A40_C13: S(a) ≠ 0"
      ]
    },
    {
      "id": "A40_S10",
      "rule": "cancellation",
      "premises": [
        "A40_C12: S(a^2) S(a) = S(a) S(1)",
        "A40_C13: S(a) ≠ 0"
      ],
      "conclusions": [
        "A40_C14: S(a^2) = S(1)"
      ]
    },
    {
      "id": "A40_S11",
      "rule": "invariance under scaling",
      "premises": [
        "A40_C9: S(j a) S(j) = -1 for all j=1..36",
        "A40_C14: S(a^2) = S(1)"
      ],
      "conclusions": [
        "A40_C15: S(a^2 j) = S(j) for all j=1..36"
      ]
    },
    {
      "id": "A40_S12",
      "rule": "Fourier invariance implies set equality",
      "premises": [
        "A40_C15: S(a^2 j) = S(j) for all j=1..36",
        "A40_C7: S(b) = sum_{t in X} ω^{b t} for b in Z/37Z"
      ],
      "conclusions": [
        "A40_C16: a^2 X = X as sets in F_{37}"
      ]
    },
    {
      "id": "A40_S13",
      "rule": "permutation from set equality",
      "premises": [
        "A40_C16: a^2 X = X as sets in F_{37}"
      ],
      "conclusions": [
        "A40_C17: multiplication by a^2 permutes X"
      ]
    },
    {
      "id": "A40_S14",
      "rule": "define permutation",
      "premises": [
        "A40_C17: multiplication by a^2 permutes X"
      ],
      "conclusions": [
        "A40_C18: let π: X → X, π(t) = a^2 t mod 37"
      ]
    },
    {
      "id": "A40_S15",
      "rule": "define order",
      "premises": [
        "A40_C2: 37 is prime"
      ],
      "conclusions": [
        "A40_C19: d = ord_{37}(a^2)"
      ]
    },
    {
      "id": "A40_S16",
      "rule": "cycle structure property",
      "premises": [
        "A40_C18: let π: X → X, π(t) = a^2 t mod 37",
        "A40_C19: d = ord_{37}(a^2)"
      ],
      "conclusions": [
        "A40_C20: cycle lengths of π divide d"
      ]
    },
    {
      "id": "A40_S17",
      "rule": "possible orders for |X|=6",
      "premises": [
        "A40_C20: cycle lengths of π divide d"
      ],
      "conclusions": [
        "A40_C21: possible d ∈ {1,2,3,6}"
      ]
    },
    {
      "id": "A40_S18",
      "rule": "case d=1",
      "premises": [
        "A40_C21: possible d ∈ {1,2,3,6}"
      ],
      "conclusions": [
        "A40_C22: if d=1 then a^2 ≡ 1 mod 37"
      ]
    },
    {
      "id": "A40_S19",
      "rule": "sumset size bound",
      "premises": [
        "A40_C22: if d=1 then a^2 ≡ 1 mod 37"
      ],
      "conclusions": [
        "A40_C23: if a ≡ 1 mod 37 then |X + X| ≤ 11 < 36"
      ]
    },
    {
      "id": "A40_S20",
      "rule": "contradiction for a=-1",
      "premises": [
        "A40_C22: if d=1 then a^2 ≡ 1 mod 37",
        "A40_C9: S(j a) S(j) = -1 for all j=1..36"
      ],
      "conclusions": [
        "A40_C24: if a ≡ -1 mod 37 then S(-1) S(1) = |S(1)|^2 = -1, contradiction"
      ]
    },
    {
      "id": "A40_S21",
      "rule": "impossibility",
      "premises": [
        "A40_C23: if a ≡ 1 mod 37 then |X + X| ≤ 11 < 36",
        "A40_C24: if a ≡ -1 mod 37 then S(-1) S(1) = |S(1)|^2 = -1, contradiction"
      ],
      "conclusions": [
        "A40_C25: d=1 impossible"
      ]
    },
    {
      "id": "A40_S22",
      "rule": "subcase d=3, a^3=-1",
      "premises": [
        "A40_C21: possible d ∈ {1,2,3,6}"
      ],
      "conclusions": [
        "A40_C26: if d=3 and a^3 ≡ -1 mod 37 then |S(1)|^2 = -1, contradiction"
      ]
    },
    {
      "id": "A40_S23",
      "rule": "contradiction",
      "premises": [
        "A40_C26: if d=3 and a^3 ≡ -1 mod 37 then |S(1)|^2 = -1, contradiction",
        "A40_C9: S(j a) S(j) = -1 for all j=1..36"
      ],
      "conclusions": [
        "A40_C26: if d=3 and a^3 ≡ -1 mod 37 then |S(1)|^2 = -1, contradiction"
      ]
    },
    {
      "id": "A40_S24",
      "rule": "subcase d=3, a^3=1",
      "premises": [
        "A40_C21: possible d ∈ {1,2,3,6}"
      ],
      "conclusions": [
        "A40_C27: if d=3 and a^3 ≡ 1 mod 37 then aX = X"
      ]
    },
    {
      "id": "A40_S25",
      "rule": "set invariance",
      "premises": [
        "A40_C16: a^2 X = X as sets in F_{37}",
        "A40_C27: if d=3 and a^3 ≡ 1 mod 37 then aX = X"
      ],
      "conclusions": [
        "A40_C27: if d=3 and a^3 ≡ 1 mod 37 then aX = X"
      ]
    },
    {
      "id": "A40_S26",
      "rule": "sumset bound",
      "premises": [
        "A40_C27: if d=3 and a^3 ≡ 1 mod 37 then aX = X"
      ],
      "conclusions": [
        "A40_C28: if aX = X then |aX + X| = |X + X| ≤ 11 < 36"
      ]
    },
    {
      "id": "A40_S27",
      "rule": "impossibility",
      "premises": [
        "A40_C26: if d=3 and a^3 ≡ -1 mod 37 then |S(1)|^2 = -1, contradiction",
        "A40_C28: if aX = X then |aX + X| = |X + X| ≤ 11 < 36"
      ],
      "conclusions": [
        "A40_C29: d=3 impossible"
      ]
    },
    {
      "id": "A40_S28",
      "rule": "case d=2",
      "premises": [
        "A40_C21: possible d ∈ {1,2,3,6}"
      ],
      "conclusions": [
        "A40_C30: if d=2 then a^2 ≡ -1 mod 37"
      ]
    },
    {
      "id": "A40_S29",
      "rule": "solve quadratic",
      "premises": [
        "A40_C30: if d=2 then a^2 ≡ -1 mod 37",
        "A40_C2: 37 is prime"
      ],
      "conclusions": [
        "A40_C31: solutions to a^2 ≡ -1 mod 37 are a ≡ 6, 31 mod 37"
      ]
    },
    {
      "id": "A40_S30",
      "rule": "construction verification",
      "premises": [
        "A40_C31: solutions to a^2 ≡ -1 mod 37 are a ≡ 6, 31 mod 37",
        "A40_C5: aX + X = F_{37} \\ {0}"
      ],
      "conclusions": [
        "A40_C32: for a ≡ 6 or 31 mod 37, X = {16,17,18,19,20,21} works"
      ]
    },
    {
      "id": "A40_S31",
      "rule": "possibility",
      "premises": [
        "A40_C32: for a ≡ 6 or 31 mod 37, X = {16,17,18,19,20,21} works"
      ],
      "conclusions": [
        "A40_C33: d=2 possible"
      ]
    },
    {
      "id": "A40_S32",
      "rule": "case d=6 structure",
      "premises": [
        "A40_C21: possible d ∈ {1,2,3,6}"
      ],
      "conclusions": [
        "A40_C34: if d=6 then X = {t, a^2 t, a^4 t, a^6 t, a^8 t, a^{10} t} for some t"
      ]
    },
    {
      "id": "A40_S33",
      "rule": "normalization to subgroup",
      "premises": [
        "A40_C34: if d=6 then X = {t, a^2 t, a^4 t, a^6 t, a^8 t, a^{10} t} for some t",
        "A40_C2: 37 is prime"
      ],
      "conclusions": [
        "A40_C35: normalizing, X/t = 6th powers mod 37 = H, order 6 subgroup"
      ]
    },
    {
      "id": "A40_S34",
      "rule": "coset description",
      "premises": [
        "A40_C35: normalizing, X/t = 6th powers mod 37 = H, order 6 subgroup",
        "A40_C16: a^2 X = X as sets in F_{37}"
      ],
      "conclusions": [
        "A40_C36: aX / t = cubes not in H"
      ]
    },
    {
      "id": "A40_S35",
      "rule": "specific example",
      "premises": [
        "A40_C36: aX / t = cubes not in H"
      ],
      "conclusions": [
        "A40_C37: specific X = {1,27,26,36,10,11}, aX = {8,31,23,29,6,14}"
      ]
    },
    {
      "id": "A40_S36",
      "rule": "collision detection",
      "premises": [
        "A40_C37: specific X = {1,27,26,36,10,11}, aX = {8,31,23,29,6,14}"
      ],
      "conclusions": [
        "A40_C38: 1 + 6 ≡ 7 ≡ 36 + 8 mod 37, collision"
      ]
    },
    {
      "id": "A40_S37",
      "rule": "failure to cover",
      "premises": [
        "A40_C38: 1 + 6 ≡ 7 ≡ 36 + 8 mod 37, collision",
        "A40_C5: aX + X = F_{37} \\ {0}"
      ],
      "conclusions": [
        "A40_C39: d=6 does not cover all nonzero residues"
      ]
    },
    {
      "id": "A40_S38",
      "rule": "impossibility",
      "premises": [
        "A40_C39: d=6 does not cover all nonzero residues"
      ],
      "conclusions": [
        "A40_C40: d=6 impossible"
      ]
    },
    {
      "id": "A40_S39",
      "rule": "case analysis conclusion",
      "premises": [
        "A40_C25: d=1 impossible",
        "A40_C29: d=3 impossible",
        "A40_C33: d=2 possible",
        "A40_C40: d=6 impossible"
      ],
      "conclusions": [
        "A40_C41: only a = 6, 31"
      ]
    },
    {
      "id": "B1558_S1",
      "rule": "problem connection",
      "premises": [
        "B1558_C1: positive integers a s.t. exists X subset Z, |X|=(f(1) + 4), forall k=1..36 exists x,y in X s.t. ax + y ≡ k mod 37",
        "A3953_C14: f(1) = 2"
      ],
      "conclusions": [
        "A40_C1: positive integers a s.t. exists X subset Z, |X|=6, forall k=1..36 exists x,y in X s.t. ax + y ≡ k mod 37"
      ]
    }
  ]
}