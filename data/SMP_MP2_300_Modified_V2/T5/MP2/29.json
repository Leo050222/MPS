{
  "Problem_ID": 29,
  "Chunk_Type": "T5",
  "Class_ID": "B2059",
  "Multiple_Synthesis_Class": "MP2",
  "Sub_Class_ID": [
    {
      "A4222": "A4222_DG_1"
    },
    {
      "A4300": "A4300_DG_3"
    }
  ],
  "Synthesis_Trace": "DG-DG",
  "Synthesis_Status": "Continuable",
  "Math_Problem": "Determine all functions $f: \\mathbb{N} \\to \\mathbb{Z}$ such that for all $k, l \\in \\mathbb{N}$, $f(k)^2 + f(l)$ divides $(k^2 + l)^2$, and $f(1)^2 + f(1) > 1$. Instead of determining all such functions $f$ satisfying the divisibility condition, simply find $k = f(1)$, where $f(1)$ is the value at $1$ derived from the condition on $f(1)^2 + f(1)$. Find all pairs $(p,q)$ of prime numbers with $p>q$ such that $$\\frac{(p+q)^{p+q}(p-q)^{p-q}-k}{(p+q)^{p-q}(p-q)^{p+q}-k}$$ is an integer.",
  "Connecting_Sentence": [
    {
      "A4222": "Instead of determining all such functions $f$ satisfying the divisibility condition, simply find $k = f(1)$, where $f(1)$ is the value at $1$ derived from the condition on $f(1)^2 + f(1)$."
    },
    {
      "A4300": "None"
    }
  ],
  "Synthesised_By": [
    {
      "A4222": "Ok, let's solve it :\n\nWe know that $f^2(1)+f(1)$ divides $4$ and is greater than $1$, so that it is $2$ or $4$. Solving the quadratic equations in $f(1)$ we easily find that $f(1)=1.$\nIt follows that for each prime $p$ the number $1+f(p-1)$ divides $p^2$ and is greater than $1$ so that it is $p$ or $p^2$.\n\nSuppose that for some prime $p$ we have $f(p-1)+1 = p^2.$\nThen $p^4-2p^2+2 = (p^2-1)^2 + 1 = f^2(p-1)+f(1)$ divides $((p-1)^2+1)^2 = p^4-4p^3 + 8p^2 - 8p +4$.\nBut it is easy to verify that for $p \\geq 2$ we have $p^4-4p^3 + 8p^2 - 8p +4 <2(p^4-2p^2+2)$, from which we deduce that we must have $p^4-4p^3 + 8p^2 - 8p +4 = p^4 - 2p^2 + 2$, that is $2p^3-5p^2+4p-1=0$. Thus $p$ divides $1$ which is absurd.\n\nThen, for all prime $p$, we have $f(p-1)+1=p$ that is $f(p-1)=p-1.$\n\nNow, for all positive integer $n$ and all prime $p$, we deduce that $f(n)+(p-1)^2$ divides $((p-1)^2+n)^2 =  ((p-1)^2+f(n))((p-1)^2 + 2n - f(n)) + (f(n) - n)^2$.\nThus $\\frac {(f(n)-n)^2} {f(n) + (p-1)^2}$ is an integer.\nNote that this integer is clearly non-negative. Choosing $p$ sufficientely large, the corresponding integer is less than $1$, so that it is $0$. Thus $f(n) = n$.\n\nConversely, $f(n)=n$ is clearly a solution of the problem.\n\nPierre. Instead of determining all such functions $f$ satisfying the divisibility condition, simply find $k = f(1)$, where $f(1)$ is the value at $1$ derived from the condition on $f(1)^2 + f(1)$."
    },
    {
      "A4300": "Find all pairs $(p,q)$ of prime numbers which $p>q$ and\n$$\\frac{(p+q)^{p+q}(p-q)^{p-q}-1}{(p+q)^{p-q}(p-q)^{p+q}-1}$$\nis an integer."
    }
  ],
  "Original_Problem": [
    {
      "A4222": "Ok, let's solve it :\n\nWe know that $f^2(1)+f(1)$ divides $4$ and is greater than $1$, so that it is $2$ or $4$. Solving the quadratic equations in $f(1)$ we easily find that $f(1)=1.$\nIt follows that for each prime $p$ the number $1+f(p-1)$ divides $p^2$ and is greater than $1$ so that it is $p$ or $p^2$.\n\nSuppose that for some prime $p$ we have $f(p-1)+1 = p^2.$\nThen $p^4-2p^2+2 = (p^2-1)^2 + 1 = f^2(p-1)+f(1)$ divides $((p-1)^2+1)^2 = p^4-4p^3 + 8p^2 - 8p +4$.\nBut it is easy to verify that for $p \\geq 2$ we have $p^4-4p^3 + 8p^2 - 8p +4 <2(p^4-2p^2+2)$, from which we deduce that we must have $p^4-4p^3 + 8p^2 - 8p +4 = p^4 - 2p^2 + 2$, that is $2p^3-5p^2+4p-1=0$. Thus $p$ divides $1$ which is absurd.\n\nThen, for all prime $p$, we have $f(p-1)+1=p$ that is $f(p-1)=p-1.$\n\nNow, for all positive integer $n$ and all prime $p$, we deduce that $f(n)+(p-1)^2$ divides $((p-1)^2+n)^2 =  ((p-1)^2+f(n))((p-1)^2 + 2n - f(n)) + (f(n) - n)^2$.\nThus $\\frac {(f(n)-n)^2} {f(n) + (p-1)^2}$ is an integer.\nNote that this integer is clearly non-negative. Choosing $p$ sufficientely large, the corresponding integer is less than $1$, so that it is $0$. Thus $f(n) = n$.\n\nConversely, $f(n)=n$ is clearly a solution of the problem.\n\nPierre."
    },
    {
      "A4300": "Find all pairs $(p,q)$ of prime numbers which $p>q$ and\n$$\\frac{(p+q)^{p+q}(p-q)^{p-q}-1}{(p+q)^{p-q}(p-q)^{p+q}-1}$$\nis an integer."
    }
  ],
  "Problem_Type": [
    {
      "A4222": [
        "Mathematics -> Number Theory -> Prime Numbers"
      ]
    },
    {
      "A4300": [
        "Mathematics -> Number Theory -> Prime Numbers",
        "Mathematics -> Algebra -> Abstract Algebra -> Other"
      ]
    }
  ],
  "Problem_Level": [
    {
      "A4222": "KbsdJames_Omni-MATH_9.0"
    },
    {
      "A4300": "KbsdJames_Omni-MATH_8.0"
    }
  ],
  "Problem_Source": [
    {
      "A4222": "imo_shortlist"
    },
    {
      "A4300": "imo_shortlist"
    }
  ],
  "Problem_Length": [
    {
      "A4222": 1231
    },
    {
      "A4300": 132
    }
  ],
  "Synthesised_Problem_Length": 486,
  "Ground_Truth": [
    {
      "A4222": "f(n) = n"
    },
    {
      "A4300": "(3, 2)"
    }
  ],
  "Predicted_Answer": [
    {
      "A4222": "f(n) = n"
    },
    {
      "A4300": "(3, 2)"
    }
  ],
  "Connecting_Point": [
    {
      "B2059": {
        "1": "(f(1) + 0)"
      }
    }
  ],
  "Delta_Factor": [
    {
      "A4222": 0.2
    },
    {
      "A4300": 0.72
    }
  ],
  "Delta_Value": [
    {
      "A4222": {
        "f(1)": "1"
      }
    },
    {
      "A4300": {
        "E": "781"
      }
    }
  ],
  "Delta_Depth": [
    {
      "A4222": {
        "f(1)": 6
      }
    },
    {
      "A4300": {
        "E": 18
      }
    }
  ],
  "Delta_Source": [
    {
      "A4222": "derived"
    },
    {
      "A4300": "derived"
    }
  ],
  "Delta_Value_Order": [
    {
      "A4222": 1
    },
    {
      "A4300": 3
    }
  ],
  "Delta_Variable_Names": [
    {
      "A4222": [
        "f"
      ]
    },
    {
      "A4300": [
        "E"
      ]
    }
  ],
  "Delta_Socket": [
    {
      "A4222": {
        "2": 2.0
      }
    },
    {
      "A4300": {
        "1": 1.0
      }
    }
  ],
  "Source_Delta_Socket": [
    {
      "A4222": "goal"
    },
    {
      "A4300": "goal"
    }
  ],
  "Delta_Socket_Order": [
    {
      "A4222": 1
    },
    {
      "A4300": 1
    }
  ],
  "Variable_Names": [
    {
      "A4222": [
        "f",
        "p",
        "n"
      ]
    },
    {
      "A4300": [
        "p",
        "q"
      ]
    }
  ],
  "Total_Claims": [
    {
      "A4222": 30
    },
    {
      "A4300": 25
    }
  ],
  "Total_Delta": [
    {
      "A4222": 1
    },
    {
      "A4300": 3
    }
  ],
  "Total_Delta_Socket": [
    {
      "A4222": 1
    },
    {
      "A4300": 1
    }
  ],
  "Max_Delta_Factor": [
    {
      "A4222": 0.2
    },
    {
      "A4300": 0.72
    }
  ],
  "Min_Delta_Factor": [
    {
      "A4222": 0.2
    },
    {
      "A4300": 0.32
    }
  ],
  "Max_Delta_Depth": [
    {
      "A4222": 6
    },
    {
      "A4300": 18
    }
  ],
  "Min_Delta_Depth": [
    {
      "A4222": 6
    },
    {
      "A4300": 8
    }
  ],
  "Claims": [
    {
      "id": "A4222_C1",
      "type": "goal",
      "expr": "determine f: ℕ → ℤ s.t. ∀k,l ∈ ℕ, f(k)^2 + f(l) | (k^2 + l)^2"
    },
    {
      "id": "A4222_C2",
      "type": "context",
      "expr": "∀k,l ∈ ℕ, f(k)^2 + f(l) | (k^2 + l)^2"
    },
    {
      "id": "A4222_C3",
      "type": "context",
      "expr": "f(1)^2 + f(1) > 1"
    },
    {
      "id": "A4222_C4",
      "type": "derived",
      "expr": "f(1)^2 + f(1) | 4"
    },
    {
      "id": "A4222_C5",
      "type": "derived",
      "expr": "f(1)^2 + f(1) = 2 or 4"
    },
    {
      "id": "A4222_C6",
      "type": "derived",
      "expr": "f(1) = 1"
    },
    {
      "id": "A4222_C7",
      "type": "derived",
      "expr": "∀ primes p, 1 + f(p-1) | p^2"
    },
    {
      "id": "A4222_C8",
      "type": "derived",
      "expr": "∀ primes p, 1 + f(p-1) = p or p^2"
    },
    {
      "id": "A4222_C9",
      "type": "derived",
      "expr": "suppose ∃ prime p s.t. 1 + f(p-1) = p^2"
    },
    {
      "id": "A4222_C10",
      "type": "derived",
      "expr": "f(p-1) = p^2 - 1"
    },
    {
      "id": "A4222_C11",
      "type": "derived",
      "expr": "f(p-1)^2 + f(1) | ((p-1)^2 + 1)^2"
    },
    {
      "id": "A4222_C12",
      "type": "derived",
      "expr": "f(p-1)^2 + 1 | (p^2 - 2p + 2)^2"
    },
    {
      "id": "A4222_C13",
      "type": "derived",
      "expr": "(p^2 - 1)^2 + 1 = p^4 - 2p^2 + 2"
    },
    {
      "id": "A4222_C14",
      "type": "derived",
      "expr": "let d = p^4 - 2p^2 + 2"
    },
    {
      "id": "A4222_C15",
      "type": "derived",
      "expr": "let D = (p^2 - 2p + 2)^2 = p^4 - 4p^3 + 8p^2 - 8p + 4"
    },
    {
      "id": "A4222_C16",
      "type": "derived",
      "expr": "d | D"
    },
    {
      "id": "A4222_C17",
      "type": "derived",
      "expr": "for p ≥ 2, D < 2d"
    },
    {
      "id": "A4222_C18",
      "type": "derived",
      "expr": "thus D = d"
    },
    {
      "id": "A4222_C19",
      "type": "derived",
      "expr": "2p^3 - 5p^2 + 4p - 1 = 0"
    },
    {
      "id": "A4222_C20",
      "type": "derived",
      "expr": "no prime p ≥ 2 satisfies 2p^3 - 5p^2 + 4p - 1 = 0"
    },
    {
      "id": "A4222_C21",
      "type": "derived",
      "expr": "∀ primes p, f(p-1) = p - 1"
    },
    {
      "id": "A4222_C22",
      "type": "derived",
      "expr": "∀ n ∈ ℕ, ∀ primes p, f((p-1))^2 + f(n) | ((p-1)^2 + n)^2"
    },
    {
      "id": "A4222_C23",
      "type": "derived",
      "expr": "∀ n ∈ ℕ, ∀ primes p, (p-1)^2 + f(n) | ((p-1)^2 + n)^2"
    },
    {
      "id": "A4222_C24",
      "type": "derived",
      "expr": "let k = (p-1)^2, d = k + f(n)"
    },
    {
      "id": "A4222_C25",
      "type": "derived",
      "expr": "(k + n)^2 = d · (k + 2n - f(n)) + (f(n) - n)^2"
    },
    {
      "id": "A4222_C26",
      "type": "derived",
      "expr": "d | (f(n) - n)^2"
    },
    {
      "id": "A4222_C27",
      "type": "derived",
      "expr": "(f(n) - n)^2 / d ∈ ℤ_{≥0}"
    },
    {
      "id": "A4222_C28",
      "type": "derived",
      "expr": "for fixed n, sufficiently large prime p, 0 ≤ (f(n) - n)^2 / d < 1"
    },
    {
      "id": "A4222_C29",
      "type": "derived",
      "expr": "(f(n) - n)^2 = 0"
    },
    {
      "id": "A4222_C30",
      "type": "final",
      "expr": "∀ n ∈ ℕ, f(n) = n"
    },
    {
      "id": "A4300_C1",
      "type": "derived",
      "expr": "find all prime pairs (p,q) with p>q such that ((p+q)^(p+q) * (p-q)^(p-q) -1) / ((p+q)^(p-q) * (p-q)^(p+q) -1) is integer"
    },
    {
      "id": "A4300_C2",
      "type": "context",
      "expr": "p and q are prime numbers"
    },
    {
      "id": "A4300_C3",
      "type": "context",
      "expr": "p > q"
    },
    {
      "id": "A4300_C4",
      "type": "context",
      "expr": "E = ((p+q)^(p+q) * (p-q)^(p-q) -1) / ((p+q)^(p-q) * (p-q)^(p+q) -1)"
    },
    {
      "id": "A4300_C5",
      "type": "derived",
      "expr": "s = p + q, d = p - q"
    },
    {
      "id": "A4300_C6",
      "type": "derived",
      "expr": "E = (s^s * d^d -1) / (s^d * d^s -1)"
    },
    {
      "id": "A4300_C7",
      "type": "derived",
      "expr": "p=3, q=2 are primes and 3>2"
    },
    {
      "id": "A4300_C8",
      "type": "derived",
      "expr": "s = 5"
    },
    {
      "id": "A4300_C9",
      "type": "derived",
      "expr": "d = 1"
    },
    {
      "id": "A4300_C10",
      "type": "derived",
      "expr": "5^5 = 3125"
    },
    {
      "id": "A4300_C11",
      "type": "derived",
      "expr": "1^1 = 1"
    },
    {
      "id": "A4300_C12",
      "type": "derived",
      "expr": "3125 * 1 = 3125"
    },
    {
      "id": "A4300_C13",
      "type": "derived",
      "expr": "3125 - 1 = 3124"
    },
    {
      "id": "A4300_C14",
      "type": "derived",
      "expr": "5^1 = 5"
    },
    {
      "id": "A4300_C15",
      "type": "derived",
      "expr": "1^5 = 1"
    },
    {
      "id": "A4300_C16",
      "type": "derived",
      "expr": "5 * 1 = 5"
    },
    {
      "id": "A4300_C17",
      "type": "derived",
      "expr": "5 - 1 = 4"
    },
    {
      "id": "A4300_C18",
      "type": "derived",
      "expr": "E = 781"
    },
    {
      "id": "A4300_C19",
      "type": "derived",
      "expr": "E is integer for (3,2)"
    },
    {
      "id": "A4300_C20",
      "type": "derived",
      "expr": "p=5, q=2 are primes and 5>2"
    },
    {
      "id": "A4300_C21",
      "type": "derived",
      "expr": "E = 22235660 / 750140 not integer for (5,2)"
    },
    {
      "id": "A4300_C22",
      "type": "derived",
      "expr": "p=5, q=3 are primes and 5>3"
    },
    {
      "id": "A4300_C23",
      "type": "derived",
      "expr": "E = 67108863 / 16383 not integer for (5,3)"
    },
    {
      "id": "A4300_C24",
      "type": "derived",
      "expr": "for other small prime pairs (p,q) with p>q, E not integer"
    },
    {
      "id": "A4300_C25",
      "type": "final",
      "expr": "the only such pair is (3,2)"
    },
    {
      "id": "B2059_C1",
      "type": "goal",
      "expr": "find all prime pairs (p,q) with p>q such that ((p+q)^(p+q) * (p-q)^(p-q) -(f(1) + 0)) / ((p+q)^(p-q) * (p-q)^(p+q) -(f(1) + 0)) is integer"
    }
  ],
  "Steps": [
    {
      "id": "A4222_S1",
      "rule": "problem setup",
      "premises": [
        "A4222_C1: determine f: ℕ → ℤ s.t. ∀k,l ∈ ℕ, f(k)^2 + f(l) | (k^2 + l)^2"
      ],
      "conclusions": [
        "A4222_C2: ∀k,l ∈ ℕ, f(k)^2 + f(l) | (k^2 + l)^2",
        "A4222_C3: f(1)^2 + f(1) > 1"
      ]
    },
    {
      "id": "A4222_S2",
      "rule": "specialization k=1 l=1",
      "premises": [
        "A4222_C2: ∀k,l ∈ ℕ, f(k)^2 + f(l) | (k^2 + l)^2"
      ],
      "conclusions": [
        "A4222_C4: f(1)^2 + f(1) | 4"
      ]
    },
    {
      "id": "A4222_S3",
      "rule": "divisors >1 of 4",
      "premises": [
        "A4222_C4: f(1)^2 + f(1) | 4",
        "A4222_C3: f(1)^2 + f(1) > 1"
      ],
      "conclusions": [
        "A4222_C5: f(1)^2 + f(1) = 2 or 4"
      ]
    },
    {
      "id": "A4222_S4",
      "rule": "solve quadratic cases, select integer solution",
      "premises": [
        "A4222_C5: f(1)^2 + f(1) = 2 or 4"
      ],
      "conclusions": [
        "A4222_C6: f(1) = 1"
      ]
    },
    {
      "id": "A4222_S5",
      "rule": "specialization k=1 l=p-1",
      "premises": [
        "A4222_C2: ∀k,l ∈ ℕ, f(k)^2 + f(l) | (k^2 + l)^2",
        "A4222_C6: f(1) = 1"
      ],
      "conclusions": [
        "A4222_C7: ∀ primes p, 1 + f(p-1) | p^2"
      ]
    },
    {
      "id": "A4222_S6",
      "rule": "positive divisors >1 of p^2",
      "premises": [
        "A4222_C7: ∀ primes p, 1 + f(p-1) | p^2"
      ],
      "conclusions": [
        "A4222_C8: ∀ primes p, 1 + f(p-1) = p or p^2"
      ]
    },
    {
      "id": "A4222_S7",
      "rule": "assumption for contradiction",
      "premises": [
        "A4222_C8: ∀ primes p, 1 + f(p-1) = p or p^2"
      ],
      "conclusions": [
        "A4222_C9: suppose ∃ prime p s.t. 1 + f(p-1) = p^2"
      ]
    },
    {
      "id": "A4222_S8",
      "rule": "implication",
      "premises": [
        "A4222_C9: suppose ∃ prime p s.t. 1 + f(p-1) = p^2"
      ],
      "conclusions": [
        "A4222_C10: f(p-1) = p^2 - 1"
      ]
    },
    {
      "id": "A4222_S9",
      "rule": "specialization k=p-1 l=1",
      "premises": [
        "A4222_C2: ∀k,l ∈ ℕ, f(k)^2 + f(l) | (k^2 + l)^2"
      ],
      "conclusions": [
        "A4222_C11: f(p-1)^2 + f(1) | ((p-1)^2 + 1)^2"
      ]
    },
    {
      "id": "A4222_S10",
      "rule": "substitute f(1)=1",
      "premises": [
        "A4222_C11: f(p-1)^2 + f(1) | ((p-1)^2 + 1)^2",
        "A4222_C6: f(1) = 1"
      ],
      "conclusions": [
        "A4222_C12: f(p-1)^2 + 1 | (p^2 - 2p + 2)^2"
      ]
    },
    {
      "id": "A4222_S11",
      "rule": "substitute f(p-1)",
      "premises": [
        "A4222_C12: f(p-1)^2 + 1 | (p^2 - 2p + 2)^2",
        "A4222_C10: f(p-1) = p^2 - 1"
      ],
      "conclusions": [
        "A4222_C13: (p^2 - 1)^2 + 1 = p^4 - 2p^2 + 2"
      ]
    },
    {
      "id": "A4222_S12",
      "rule": "define d",
      "premises": [
        "A4222_C13: (p^2 - 1)^2 + 1 = p^4 - 2p^2 + 2"
      ],
      "conclusions": [
        "A4222_C14: let d = p^4 - 2p^2 + 2"
      ]
    },
    {
      "id": "A4222_S13",
      "rule": "expand (p^2 - 2p + 2)^2",
      "premises": [
        "A4222_C12: f(p-1)^2 + 1 | (p^2 - 2p + 2)^2"
      ],
      "conclusions": [
        "A4222_C15: let D = (p^2 - 2p + 2)^2 = p^4 - 4p^3 + 8p^2 - 8p + 4"
      ]
    },
    {
      "id": "A4222_S14",
      "rule": "divisibility",
      "premises": [
        "A4222_C12: f(p-1)^2 + 1 | (p^2 - 2p + 2)^2",
        "A4222_C14: let d = p^4 - 2p^2 + 2",
        "A4222_C15: let D = (p^2 - 2p + 2)^2 = p^4 - 4p^3 + 8p^2 - 8p + 4"
      ],
      "conclusions": [
        "A4222_C16: d | D"
      ]
    },
    {
      "id": "A4222_S15",
      "rule": "compute 2d - D > 0 for p ≥ 2",
      "premises": [
        "A4222_C14: let d = p^4 - 2p^2 + 2",
        "A4222_C15: let D = (p^2 - 2p + 2)^2 = p^4 - 4p^3 + 8p^2 - 8p + 4"
      ],
      "conclusions": [
        "A4222_C17: for p ≥ 2, D < 2d"
      ]
    },
    {
      "id": "A4222_S16",
      "rule": "since d | D and D < 2d implies quotient 1",
      "premises": [
        "A4222_C16: d | D",
        "A4222_C17: for p ≥ 2, D < 2d"
      ],
      "conclusions": [
        "A4222_C18: thus D = d"
      ]
    },
    {
      "id": "A4222_S17",
      "rule": "set D = d implies",
      "premises": [
        "A4222_C18: thus D = d",
        "A4222_C14: let d = p^4 - 2p^2 + 2",
        "A4222_C15: let D = (p^2 - 2p + 2)^2 = p^4 - 4p^3 + 8p^2 - 8p + 4"
      ],
      "conclusions": [
        "A4222_C19: 2p^3 - 5p^2 + 4p - 1 = 0"
      ]
    },
    {
      "id": "A4222_S18",
      "rule": "rational root theorem, no prime roots ≥2",
      "premises": [
        "A4222_C19: 2p^3 - 5p^2 + 4p - 1 = 0"
      ],
      "conclusions": [
        "A4222_C20: no prime p ≥ 2 satisfies 2p^3 - 5p^2 + 4p - 1 = 0"
      ]
    },
    {
      "id": "A4222_S19",
      "rule": "contradiction eliminates case",
      "premises": [
        "A4222_C9: suppose ∃ prime p s.t. 1 + f(p-1) = p^2",
        "A4222_C20: no prime p ≥ 2 satisfies 2p^3 - 5p^2 + 4p - 1 = 0"
      ],
      "conclusions": [
        "A4222_C21: ∀ primes p, f(p-1) = p - 1"
      ]
    },
    {
      "id": "A4222_S20",
      "rule": "specialization k=p-1 l=n",
      "premises": [
        "A4222_C2: ∀k,l ∈ ℕ, f(k)^2 + f(l) | (k^2 + l)^2",
        "A4222_C21: ∀ primes p, f(p-1) = p - 1"
      ],
      "conclusions": [
        "A4222_C22: ∀ n ∈ ℕ, ∀ primes p, f((p-1))^2 + f(n) | ((p-1)^2 + n)^2"
      ]
    },
    {
      "id": "A4222_S21",
      "rule": "substitute f(p-1)=p-1",
      "premises": [
        "A4222_C22: ∀ n ∈ ℕ, ∀ primes p, f((p-1))^2 + f(n) | ((p-1)^2 + n)^2"
      ],
      "conclusions": [
        "A4222_C23: ∀ n ∈ ℕ, ∀ primes p, (p-1)^2 + f(n) | ((p-1)^2 + n)^2"
      ]
    },
    {
      "id": "A4222_S22",
      "rule": "define k and d",
      "premises": [
        "A4222_C23: ∀ n ∈ ℕ, ∀ primes p, (p-1)^2 + f(n) | ((p-1)^2 + n)^2"
      ],
      "conclusions": [
        "A4222_C24: let k = (p-1)^2, d = k + f(n)"
      ]
    },
    {
      "id": "A4222_S23",
      "rule": "algebraic expansion",
      "premises": [
        "A4222_C24: let k = (p-1)^2, d = k + f(n)"
      ],
      "conclusions": [
        "A4222_C25: (k + n)^2 = d · (k + 2n - f(n)) + (f(n) - n)^2"
      ]
    },
    {
      "id": "A4222_S24",
      "rule": "divisibility of remainder",
      "premises": [
        "A4222_C23: ∀ n ∈ ℕ, ∀ primes p, (p-1)^2 + f(n) | ((p-1)^2 + n)^2",
        "A4222_C25: (k + n)^2 = d · (k + 2n - f(n)) + (f(n) - n)^2"
      ],
      "conclusions": [
        "A4222_C26: d | (f(n) - n)^2"
      ]
    },
    {
      "id": "A4222_S25",
      "rule": "integer division",
      "premises": [
        "A4222_C26: d | (f(n) - n)^2"
      ],
      "conclusions": [
        "A4222_C27: (f(n) - n)^2 / d ∈ ℤ_{≥0}"
      ]
    },
    {
      "id": "A4222_S26",
      "rule": "as p large, d large",
      "premises": [
        "A4222_C27: (f(n) - n)^2 / d ∈ ℤ_{≥0}"
      ],
      "conclusions": [
        "A4222_C28: for fixed n, sufficiently large prime p, 0 ≤ (f(n) - n)^2 / d < 1"
      ]
    },
    {
      "id": "A4222_S27",
      "rule": "integer between 0 and 1 must be 0",
      "premises": [
        "A4222_C28: for fixed n, sufficiently large prime p, 0 ≤ (f(n) - n)^2 / d < 1"
      ],
      "conclusions": [
        "A4222_C29: (f(n) - n)^2 = 0"
      ]
    },
    {
      "id": "A4222_S28",
      "rule": "implies",
      "premises": [
        "A4222_C29: (f(n) - n)^2 = 0"
      ],
      "conclusions": [
        "A4222_C30: ∀ n ∈ ℕ, f(n) = n"
      ]
    },
    {
      "id": "A4300_S1",
      "rule": "problem setup",
      "premises": [
        "A4300_C1: find all prime pairs (p,q) with p>q such that ((p+q)^(p+q) * (p-q)^(p-q) -1) / ((p+q)^(p-q) * (p-q)^(p+q) -1) is integer"
      ],
      "conclusions": [
        "A4300_C2: p and q are prime numbers",
        "A4300_C3: p > q",
        "A4300_C4: E = ((p+q)^(p+q) * (p-q)^(p-q) -1) / ((p+q)^(p-q) * (p-q)^(p+q) -1)"
      ]
    },
    {
      "id": "A4300_S2",
      "rule": "introduce variables",
      "premises": [
        "A4300_C4: E = ((p+q)^(p+q) * (p-q)^(p-q) -1) / ((p+q)^(p-q) * (p-q)^(p+q) -1)"
      ],
      "conclusions": [
        "A4300_C5: s = p + q, d = p - q"
      ]
    },
    {
      "id": "A4300_S3",
      "rule": "rewrite expression",
      "premises": [
        "A4300_C4: E = ((p+q)^(p+q) * (p-q)^(p-q) -1) / ((p+q)^(p-q) * (p-q)^(p+q) -1)",
        "A4300_C5: s = p + q, d = p - q"
      ],
      "conclusions": [
        "A4300_C6: E = (s^s * d^d -1) / (s^d * d^s -1)"
      ]
    },
    {
      "id": "A4300_S4",
      "rule": "select candidate pair",
      "premises": [
        "A4300_C2: p and q are prime numbers",
        "A4300_C3: p > q"
      ],
      "conclusions": [
        "A4300_C7: p=3, q=2 are primes and 3>2"
      ]
    },
    {
      "id": "A4300_S5",
      "rule": "addition",
      "premises": [
        "A4300_C7: p=3, q=2 are primes and 3>2"
      ],
      "conclusions": [
        "A4300_C8: s = 5"
      ]
    },
    {
      "id": "A4300_S6",
      "rule": "subtraction",
      "premises": [
        "A4300_C7: p=3, q=2 are primes and 3>2"
      ],
      "conclusions": [
        "A4300_C9: d = 1"
      ]
    },
    {
      "id": "A4300_S7",
      "rule": "exponentiation",
      "premises": [
        "A4300_C8: s = 5"
      ],
      "conclusions": [
        "A4300_C10: 5^5 = 3125"
      ]
    },
    {
      "id": "A4300_S8",
      "rule": "exponentiation",
      "premises": [
        "A4300_C9: d = 1"
      ],
      "conclusions": [
        "A4300_C11: 1^1 = 1"
      ]
    },
    {
      "id": "A4300_S9",
      "rule": "multiplication",
      "premises": [
        "A4300_C10: 5^5 = 3125",
        "A4300_C11: 1^1 = 1"
      ],
      "conclusions": [
        "A4300_C12: 3125 * 1 = 3125"
      ]
    },
    {
      "id": "A4300_S10",
      "rule": "subtraction",
      "premises": [
        "A4300_C12: 3125 * 1 = 3125"
      ],
      "conclusions": [
        "A4300_C13: 3125 - 1 = 3124"
      ]
    },
    {
      "id": "A4300_S11",
      "rule": "exponentiation",
      "premises": [
        "A4300_C8: s = 5",
        "A4300_C9: d = 1"
      ],
      "conclusions": [
        "A4300_C14: 5^1 = 5"
      ]
    },
    {
      "id": "A4300_S12",
      "rule": "exponentiation",
      "premises": [
        "A4300_C9: d = 1",
        "A4300_C8: s = 5"
      ],
      "conclusions": [
        "A4300_C15: 1^5 = 1"
      ]
    },
    {
      "id": "A4300_S13",
      "rule": "multiplication",
      "premises": [
        "A4300_C14: 5^1 = 5",
        "A4300_C15: 1^5 = 1"
      ],
      "conclusions": [
        "A4300_C16: 5 * 1 = 5"
      ]
    },
    {
      "id": "A4300_S14",
      "rule": "subtraction",
      "premises": [
        "A4300_C16: 5 * 1 = 5"
      ],
      "conclusions": [
        "A4300_C17: 5 - 1 = 4"
      ]
    },
    {
      "id": "A4300_S15",
      "rule": "division",
      "premises": [
        "A4300_C13: 3125 - 1 = 3124",
        "A4300_C17: 5 - 1 = 4"
      ],
      "conclusions": [
        "A4300_C18: E = 781"
      ]
    },
    {
      "id": "A4300_S16",
      "rule": "integer verification",
      "premises": [
        "A4300_C18: E = 781",
        "A4300_C6: E = (s^s * d^d -1) / (s^d * d^s -1)",
        "A4300_C7: p=3, q=2 are primes and 3>2"
      ],
      "conclusions": [
        "A4300_C19: E is integer for (3,2)"
      ]
    },
    {
      "id": "A4300_S17",
      "rule": "select candidate pair",
      "premises": [
        "A4300_C2: p and q are prime numbers",
        "A4300_C3: p > q"
      ],
      "conclusions": [
        "A4300_C20: p=5, q=2 are primes and 5>2"
      ]
    },
    {
      "id": "A4300_S18",
      "rule": "numerical evaluation",
      "premises": [
        "A4300_C20: p=5, q=2 are primes and 5>2",
        "A4300_C6: E = (s^s * d^d -1) / (s^d * d^s -1)"
      ],
      "conclusions": [
        "A4300_C21: E = 22235660 / 750140 not integer for (5,2)"
      ]
    },
    {
      "id": "A4300_S19",
      "rule": "select candidate pair",
      "premises": [
        "A4300_C2: p and q are prime numbers",
        "A4300_C3: p > q"
      ],
      "conclusions": [
        "A4300_C22: p=5, q=3 are primes and 5>3"
      ]
    },
    {
      "id": "A4300_S20",
      "rule": "numerical evaluation",
      "premises": [
        "A4300_C22: p=5, q=3 are primes and 5>3",
        "A4300_C6: E = (s^s * d^d -1) / (s^d * d^s -1)"
      ],
      "conclusions": [
        "A4300_C23: E = 67108863 / 16383 not integer for (5,3)"
      ]
    },
    {
      "id": "A4300_S21",
      "rule": "generalization from examples",
      "premises": [
        "A4300_C21: E = 22235660 / 750140 not integer for (5,2)",
        "A4300_C23: E = 67108863 / 16383 not integer for (5,3)"
      ],
      "conclusions": [
        "A4300_C24: for other small prime pairs (p,q) with p>q, E not integer"
      ]
    },
    {
      "id": "A4300_S22",
      "rule": "synthesis of verifications",
      "premises": [
        "A4300_C19: E is integer for (3,2)",
        "A4300_C24: for other small prime pairs (p,q) with p>q, E not integer"
      ],
      "conclusions": [
        "A4300_C25: the only such pair is (3,2)"
      ]
    },
    {
      "id": "B2059_S1",
      "rule": "problem connection",
      "premises": [
        "B2059_C1: find all prime pairs (p,q) with p>q such that ((p+q)^(p+q) * (p-q)^(p-q) -(f(1) + 0)) / ((p+q)^(p-q) * (p-q)^(p+q) -(f(1) + 0)) is integer",
        "A4222_C6: f(1) = 1"
      ],
      "conclusions": [
        "A4300_C1: find all prime pairs (p,q) with p>q such that ((p+q)^(p+q) * (p-q)^(p-q) -1) / ((p+q)^(p-q) * (p-q)^(p+q) -1) is integer"
      ]
    }
  ]
}