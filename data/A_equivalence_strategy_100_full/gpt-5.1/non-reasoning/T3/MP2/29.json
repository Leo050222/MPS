{
  "Problem_ID": 29,
  "Chunk_Type": "T3",
  "Class_ID": "E1934",
  "Multiple_Synthesis_Class": "MP2",
  "Sub_Class_ID": [
    {
      "A290": "A290_DG_1"
    },
    {
      "A806": "A806_DG_6"
    }
  ],
  "Synthesis_Trace": "DG-DG",
  "Synthesis_Status": "Continuable",
  "Math_Problem": "Find all prime numbers $p,q,r$ , such that $\\frac{p}{q}-\\frac{4}{r+1}=1$ Instead of finding all prime numbers $p,q,r$ satisfying the given equation, simply find $n = r + 2009$, where $r$ is the prime number such that $r + 1$ equals the numerator of the subtracted fractional term. FemtoPravis is walking on an $8 \\times 8$ chessboard that wraps around at its edges (so squares on the left edge of the chessboard are adjacent to squares on the right edge, and similarly for the top and bottom edges). Each femtosecond, FemtoPravis moves in one of the four diagonal directions uniformly at random. After $n$ femtoseconds, what is the probability that FemtoPravis is at his original location?",
  "Connecting_Sentence": [
    {
      "A290": "Instead of finding all prime numbers $p,q,r$ satisfying the given equation, simply find $n = r + 2009$, where $r$ is the prime number such that $r + 1$ equals the numerator of the subtracted fractional term."
    },
    {
      "A806": "None"
    }
  ],
  "Synthesised_By": [
    {
      "A290": "Find all prime numbers $p,q,r$ , such that $\\frac{p}{q}-\\frac{4}{r+1}=1$ Instead of finding all prime numbers $p,q,r$ satisfying the given equation, simply find $n = r + 2009$, where $r$ is the prime number such that $r + 1$ equals the numerator of the subtracted fractional term."
    },
    {
      "A806": "FemtoPravis is walking on an $8 \\times 8$ chessboard that wraps around at its edges (so squares on the left edge of the chessboard are adjacent to squares on the right edge, and similarly for the top and bottom edges). Each femtosecond, FemtoPravis moves in one of the four diagonal directions uniformly at random. After 2012 femtoseconds, what is the probability that FemtoPravis is at his original location?"
    }
  ],
  "Original_Problem": [
    {
      "A290": "Find all prime numbers $p,q,r$ , such that $\\frac{p}{q}-\\frac{4}{r+1}=1$"
    },
    {
      "A806": "FemtoPravis is walking on an $8 \\times 8$ chessboard that wraps around at its edges (so squares on the left edge of the chessboard are adjacent to squares on the right edge, and similarly for the top and bottom edges). Each femtosecond, FemtoPravis moves in one of the four diagonal directions uniformly at random. After 2012 femtoseconds, what is the probability that FemtoPravis is at his original location?"
    }
  ],
  "Problem_Type": [
    {
      "A290": [
        "Mathematics -> Algebra -> Algebra -> Equations and Inequalities",
        "Mathematics -> Number Theory -> Prime Numbers"
      ]
    },
    {
      "A806": [
        "Mathematics -> Applied Mathematics -> Statistics -> Probability -> Counting Methods -> Combinations",
        "Mathematics -> Discrete Mathematics -> Combinatorics"
      ]
    }
  ],
  "Problem_Level": [
    {
      "A290": "KbsdJames_Omni-MATH_5.0"
    },
    {
      "A806": "KbsdJames_Omni-MATH_5.0"
    }
  ],
  "Problem_Source": [
    {
      "A290": "jbmo"
    },
    {
      "A806": "HMMT_2"
    }
  ],
  "Problem_Length": [
    {
      "A290": 72
    },
    {
      "A806": 409
    }
  ],
  "Synthesised_Problem_Length": 689,
  "Ground_Truth": [
    {
      "A290": "\\[\n(7, 3, 2), (3, 2, 7), (5, 3, 5)\n\\]"
    },
    {
      "A806": "\\left(\\frac{1+2^{1005}}{2^{1007}}\\right)^{2}"
    }
  ],
  "Predicted_Answer": [
    {
      "A290": "(7, 3, 2), (3, 2, 7), (5, 3, 5)"
    },
    {
      "A806": "((1 + 2^1005)/2^1007)^2"
    }
  ],
  "Connecting_Point": [
    {
      "E1934": {
        "2012": "(r + 2009)"
      }
    }
  ],
  "Delta_Factor": [
    {
      "A290": 0.39
    },
    {
      "A806": 0.86
    }
  ],
  "Delta_Value": [
    {
      "A290": {
        "r": "3"
      }
    },
    {
      "A806": {
        "s_{1006}": "1/2"
      }
    }
  ],
  "Delta_Depth": [
    {
      "A290": {
        "r": 14
      }
    },
    {
      "A806": {
        "s_{1006}": 31
      }
    }
  ],
  "Delta_Source": [
    {
      "A290": "derived"
    },
    {
      "A806": "derived"
    }
  ],
  "Delta_Value_Order": [
    {
      "A290": 1
    },
    {
      "A806": 6
    }
  ],
  "Delta_Variable_Names": [
    {
      "A290": [
        "r"
      ]
    },
    {
      "A806": [
        "s"
      ]
    }
  ],
  "Delta_Socket": [
    {
      "A290": {
        "4": 4.0
      }
    },
    {
      "A806": {
        "2012": 2012.0
      }
    }
  ],
  "Source_Delta_Socket": [
    {
      "A290": "goal"
    },
    {
      "A806": "goal"
    }
  ],
  "Delta_Socket_Order": [
    {
      "A290": 1
    },
    {
      "A806": 1
    }
  ],
  "Variable_Names": [
    {
      "A290": [
        "p",
        "q",
        "r"
      ]
    },
    {
      "A806": []
    }
  ],
  "Total_Claims": [
    {
      "A290": 36
    },
    {
      "A806": 36
    }
  ],
  "Total_Delta": [
    {
      "A290": 1
    },
    {
      "A806": 6
    }
  ],
  "Total_Delta_Socket": [
    {
      "A290": 1
    },
    {
      "A806": 1
    }
  ],
  "Max_Delta_Factor": [
    {
      "A290": 0.39
    },
    {
      "A806": 0.86
    }
  ],
  "Min_Delta_Factor": [
    {
      "A290": 0.39
    },
    {
      "A806": 0.22
    }
  ],
  "Max_Delta_Depth": [
    {
      "A290": 14
    },
    {
      "A806": 31
    }
  ],
  "Min_Delta_Depth": [
    {
      "A290": 14
    },
    {
      "A806": 8
    }
  ],
  "Claims": [
    {
      "id": "A290_C1",
      "type": "goal",
      "expr": "find all prime numbers p,q,r such that p/q - 4/(r+1) = 1"
    },
    {
      "id": "A290_C2",
      "type": "context",
      "expr": "p/q - 4/(r+1) = 1"
    },
    {
      "id": "A290_C3",
      "type": "context",
      "expr": "p,q,r are prime numbers"
    },
    {
      "id": "A290_C4",
      "type": "derived",
      "expr": "p > q"
    },
    {
      "id": "A290_C5",
      "type": "derived",
      "expr": "(p - q)(r + 1) = 4q"
    },
    {
      "id": "A290_C6",
      "type": "derived",
      "expr": "p - q is positive integer"
    },
    {
      "id": "A290_C7",
      "type": "derived",
      "expr": "r + 1 is integer >= 3"
    },
    {
      "id": "A290_C8",
      "type": "derived",
      "expr": "Let a = p - q >=1, b = r + 1 >=3, then a * b = 4q"
    },
    {
      "id": "A290_C9",
      "type": "derived",
      "expr": "Possible factor pairs (a,b) with a>=1, b>=3, a*b=4q: (1,4q), (2,2q), (4,q) if q>=3, (q,4) if q>=3"
    },
    {
      "id": "A290_C10",
      "type": "derived",
      "expr": "Case 1: a=1, b=4q => p = q + 1, r = 4q - 1"
    },
    {
      "id": "A290_C11",
      "type": "derived",
      "expr": "p = q + 1, q prime >=2 => q=2, p=3 (for q>=3, p even >2 not prime)"
    },
    {
      "id": "A290_C12",
      "type": "derived",
      "expr": "For q=2, r=7 prime"
    },
    {
      "id": "A290_C13",
      "type": "derived",
      "expr": "Solution (p,q,r) = (3,2,7)"
    },
    {
      "id": "A290_C14",
      "type": "derived",
      "expr": "Case 4: a=q, b=4 => p=2q, r=3"
    },
    {
      "id": "A290_C15",
      "type": "derived",
      "expr": "r=3 prime"
    },
    {
      "id": "A290_C16",
      "type": "derived",
      "expr": "p=2q, q prime >=2 => p=4 (q=2) or even >=6 (q>=3), not prime"
    },
    {
      "id": "A290_C17",
      "type": "derived",
      "expr": "No solution in case 4"
    },
    {
      "id": "A290_C18",
      "type": "derived",
      "expr": "Case 3: a=4, b=q (q>=3) => p = q + 4, r = q - 1"
    },
    {
      "id": "A290_C19",
      "type": "derived",
      "expr": "r = q - 1, q prime >=3 odd => r even =2 => q=3"
    },
    {
      "id": "A290_C20",
      "type": "derived",
      "expr": "For q=3, p=7 prime, r=2 prime"
    },
    {
      "id": "A290_C21",
      "type": "derived",
      "expr": "Solution (p,q,r) = (7,3,2)"
    },
    {
      "id": "A290_C22",
      "type": "derived",
      "expr": "Case 2: a=2, b=2q => p = q + 2, r = 2q - 1"
    },
    {
      "id": "A290_C23",
      "type": "derived",
      "expr": "q, q+1, q+2 are three consecutive integers => exactly one divisible by 3"
    },
    {
      "id": "A290_C24",
      "type": "derived",
      "expr": "If q ≡ 0 (mod 3), q=3 prime, p=5 prime, r=5 prime"
    },
    {
      "id": "A290_C25",
      "type": "derived",
      "expr": "If q ≡ 1 (mod 3), then p = q+2 ≡ 0 (mod 3)"
    },
    {
      "id": "A290_C26",
      "type": "derived",
      "expr": "p ≡ 0 (mod 3), p prime => p=3"
    },
    {
      "id": "A290_C27",
      "type": "derived",
      "expr": "p=3 => q=1 not prime"
    },
    {
      "id": "A290_C28",
      "type": "derived",
      "expr": "No solution if q ≡ 1 (mod 3)"
    },
    {
      "id": "A290_C29",
      "type": "derived",
      "expr": "If q ≡ 2 (mod 3), then q+1 ≡ 0 (mod 3)"
    },
    {
      "id": "A290_C30",
      "type": "derived",
      "expr": "r = 2q - 1 ≡ 0 (mod 3)"
    },
    {
      "id": "A290_C31",
      "type": "derived",
      "expr": "r ≡ 0 (mod 3), r prime => r=3"
    },
    {
      "id": "A290_C32",
      "type": "derived",
      "expr": "r=3 => q=2"
    },
    {
      "id": "A290_C33",
      "type": "derived",
      "expr": "q=2, p=4 not prime"
    },
    {
      "id": "A290_C34",
      "type": "derived",
      "expr": "No solution if q ≡ 2 (mod 3)"
    },
    {
      "id": "A290_C35",
      "type": "derived",
      "expr": "In case 2, only solution (p,q,r) = (5,3,5)"
    },
    {
      "id": "A290_C36",
      "type": "final",
      "expr": "Solutions: (3,2,7), (7,3,2), (5,3,5)"
    },
    {
      "id": "A806_C1",
      "type": "derived",
      "expr": "P(at original location after 2012 femtoseconds)"
    },
    {
      "id": "A806_C2",
      "type": "context",
      "expr": "P = [P(same row after 2012)]^2 by symmetry and independence"
    },
    {
      "id": "A806_C3",
      "type": "context",
      "expr": "2012 = 2*1006"
    },
    {
      "id": "A806_C4",
      "type": "context",
      "expr": "a_n = prob row 0 after 2n moves"
    },
    {
      "id": "A806_C5",
      "type": "context",
      "expr": "b_n = prob row 2 after 2n moves"
    },
    {
      "id": "A806_C6",
      "type": "context",
      "expr": "c_n = prob row 4 after 2n moves"
    },
    {
      "id": "A806_C7",
      "type": "context",
      "expr": "d_n = prob row 6 after 2n moves"
    },
    {
      "id": "A806_C8",
      "type": "derived",
      "expr": "a_0 = 1"
    },
    {
      "id": "A806_C9",
      "type": "derived",
      "expr": "b_0 = 0"
    },
    {
      "id": "A806_C10",
      "type": "derived",
      "expr": "c_0 = 0"
    },
    {
      "id": "A806_C11",
      "type": "derived",
      "expr": "d_0 = 0"
    },
    {
      "id": "A806_C12",
      "type": "derived",
      "expr": "a_{n+1} = (1/2)a_n + (1/4)b_n + (1/4)d_n"
    },
    {
      "id": "A806_C13",
      "type": "derived",
      "expr": "b_{n+1} = (1/2)b_n + (1/4)a_n + (1/4)c_n"
    },
    {
      "id": "A806_C14",
      "type": "derived",
      "expr": "c_{n+1} = (1/2)c_n + (1/4)b_n + (1/4)d_n"
    },
    {
      "id": "A806_C15",
      "type": "derived",
      "expr": "d_{n+1} = (1/2)d_n + (1/4)a_n + (1/4)c_n"
    },
    {
      "id": "A806_C16",
      "type": "derived",
      "expr": "s_n = a_n + c_n"
    },
    {
      "id": "A806_C17",
      "type": "derived",
      "expr": "s_{n+1} = (1/2)s_n + (1/2)(b_n + d_n)"
    },
    {
      "id": "A806_C18",
      "type": "derived",
      "expr": "b_n = d_n for all n >= 0"
    },
    {
      "id": "A806_C19",
      "type": "derived",
      "expr": "e_n = b_n = d_n"
    },
    {
      "id": "A806_C20",
      "type": "derived",
      "expr": "s_n + 2 e_n = 1"
    },
    {
      "id": "A806_C21",
      "type": "derived",
      "expr": "e_n = (1 - s_n)/2"
    },
    {
      "id": "A806_C22",
      "type": "derived",
      "expr": "s_{n+1} = (1/2) s_n + e_n"
    },
    {
      "id": "A806_C23",
      "type": "derived",
      "expr": "s_{n+1} = 1/2"
    },
    {
      "id": "A806_C24",
      "type": "derived",
      "expr": "s_n = 1/2 for n >= 1"
    },
    {
      "id": "A806_C25",
      "type": "derived",
      "expr": "x_n = a_n - c_n"
    },
    {
      "id": "A806_C26",
      "type": "derived",
      "expr": "x_{n+1} = (1/2) x_n"
    },
    {
      "id": "A806_C27",
      "type": "derived",
      "expr": "x_0 = 1"
    },
    {
      "id": "A806_C28",
      "type": "derived",
      "expr": "x_n = (1/2)^n"
    },
    {
      "id": "A806_C29",
      "type": "derived",
      "expr": "a_n = (s_n + x_n)/2"
    },
    {
      "id": "A806_C30",
      "type": "derived",
      "expr": "1006 >= 1"
    },
    {
      "id": "A806_C31",
      "type": "derived",
      "expr": "s_{1006} = 1/2"
    },
    {
      "id": "A806_C32",
      "type": "derived",
      "expr": "x_{1006} = 2^{-1006}"
    },
    {
      "id": "A806_C33",
      "type": "derived",
      "expr": "(1/2 + 2^{-1006})/2 = 2^{-2} + 2^{-1007}"
    },
    {
      "id": "A806_C34",
      "type": "derived",
      "expr": "2^{-2} = 2^{1005} / 2^{1007}"
    },
    {
      "id": "A806_C35",
      "type": "derived",
      "expr": "a_{1006} = (1 + 2^{1005}) / 2^{1007}"
    },
    {
      "id": "A806_C36",
      "type": "final",
      "expr": "((1 + 2^{1005}) / 2^{1007})^2"
    },
    {
      "id": "E1934_C1",
      "type": "goal",
      "expr": "P(at original location after (r + 2009) femtoseconds)"
    }
  ],
  "Steps": [
    {
      "id": "A290_S1",
      "rule": "problem setup",
      "premises": [
        "A290_C1: find all prime numbers p,q,r such that p/q - 4/(r+1) = 1"
      ],
      "conclusions": [
        "A290_C2: p/q - 4/(r+1) = 1",
        "A290_C3: p,q,r are prime numbers"
      ]
    },
    {
      "id": "A290_S2",
      "rule": "inequality from equation",
      "premises": [
        "A290_C2: p/q - 4/(r+1) = 1",
        "A290_C3: p,q,r are prime numbers"
      ],
      "conclusions": [
        "A290_C4: p > q"
      ]
    },
    {
      "id": "A290_S3",
      "rule": "algebraic rearrangement",
      "premises": [
        "A290_C2: p/q - 4/(r+1) = 1",
        "A290_C4: p > q"
      ],
      "conclusions": [
        "A290_C5: (p - q)(r + 1) = 4q"
      ]
    },
    {
      "id": "A290_S4",
      "rule": "integer properties from primes",
      "premises": [
        "A290_C3: p,q,r are prime numbers",
        "A290_C4: p > q"
      ],
      "conclusions": [
        "A290_C6: p - q is positive integer",
        "A290_C7: r + 1 is integer >= 3"
      ]
    },
    {
      "id": "A290_S5",
      "rule": "variable substitution",
      "premises": [
        "A290_C5: (p - q)(r + 1) = 4q",
        "A290_C6: p - q is positive integer",
        "A290_C7: r + 1 is integer >= 3"
      ],
      "conclusions": [
        "A290_C8: Let a = p - q >=1, b = r + 1 >=3, then a * b = 4q"
      ]
    },
    {
      "id": "A290_S6",
      "rule": "factor pairs of 4q",
      "premises": [
        "A290_C8: Let a = p - q >=1, b = r + 1 >=3, then a * b = 4q",
        "A290_C3: p,q,r are prime numbers"
      ],
      "conclusions": [
        "A290_C9: Possible factor pairs (a,b) with a>=1, b>=3, a*b=4q: (1,4q), (2,2q), (4,q) if q>=3, (q,4) if q>=3"
      ]
    },
    {
      "id": "A290_S7",
      "rule": "case 1 assumption",
      "premises": [
        "A290_C9: Possible factor pairs (a,b) with a>=1, b>=3, a*b=4q: (1,4q), (2,2q), (4,q) if q>=3, (q,4) if q>=3"
      ],
      "conclusions": [
        "A290_C10: Case 1: a=1, b=4q => p = q + 1, r = 4q - 1"
      ]
    },
    {
      "id": "A290_S8",
      "rule": "primality of consecutive integers",
      "premises": [
        "A290_C10: Case 1: a=1, b=4q => p = q + 1, r = 4q - 1",
        "A290_C3: p,q,r are prime numbers"
      ],
      "conclusions": [
        "A290_C11: p = q + 1, q prime >=2 => q=2, p=3 (for q>=3, p even >2 not prime)"
      ]
    },
    {
      "id": "A290_S9",
      "rule": "compute r and check prime",
      "premises": [
        "A290_C11: p = q + 1, q prime >=2 => q=2, p=3 (for q>=3, p even >2 not prime)"
      ],
      "conclusions": [
        "A290_C12: For q=2, r=7 prime"
      ]
    },
    {
      "id": "A290_S10",
      "rule": "form solution triple",
      "premises": [
        "A290_C11: p = q + 1, q prime >=2 => q=2, p=3 (for q>=3, p even >2 not prime)",
        "A290_C12: For q=2, r=7 prime"
      ],
      "conclusions": [
        "A290_C13: Solution (p,q,r) = (3,2,7)"
      ]
    },
    {
      "id": "A290_S11",
      "rule": "case 4 assumption",
      "premises": [
        "A290_C9: Possible factor pairs (a,b) with a>=1, b>=3, a*b=4q: (1,4q), (2,2q), (4,q) if q>=3, (q,4) if q>=3"
      ],
      "conclusions": [
        "A290_C14: Case 4: a=q, b=4 => p=2q, r=3"
      ]
    },
    {
      "id": "A290_S12",
      "rule": "check r prime",
      "premises": [
        "A290_C14: Case 4: a=q, b=4 => p=2q, r=3"
      ],
      "conclusions": [
        "A290_C15: r=3 prime"
      ]
    },
    {
      "id": "A290_S13",
      "rule": "check p prime",
      "premises": [
        "A290_C14: Case 4: a=q, b=4 => p=2q, r=3",
        "A290_C3: p,q,r are prime numbers"
      ],
      "conclusions": [
        "A290_C16: p=2q, q prime >=2 => p=4 (q=2) or even >=6 (q>=3), not prime"
      ]
    },
    {
      "id": "A290_S14",
      "rule": "conclude no solution",
      "premises": [
        "A290_C16: p=2q, q prime >=2 => p=4 (q=2) or even >=6 (q>=3), not prime"
      ],
      "conclusions": [
        "A290_C17: No solution in case 4"
      ]
    },
    {
      "id": "A290_S15",
      "rule": "case 3 assumption",
      "premises": [
        "A290_C9: Possible factor pairs (a,b) with a>=1, b>=3, a*b=4q: (1,4q), (2,2q), (4,q) if q>=3, (q,4) if q>=3"
      ],
      "conclusions": [
        "A290_C18: Case 3: a=4, b=q (q>=3) => p = q + 4, r = q - 1"
      ]
    },
    {
      "id": "A290_S16",
      "rule": "analyze r = q-1 for prime q>=3",
      "premises": [
        "A290_C18: Case 3: a=4, b=q (q>=3) => p = q + 4, r = q - 1",
        "A290_C3: p,q,r are prime numbers"
      ],
      "conclusions": [
        "A290_C19: r = q - 1, q prime >=3 odd => r even =2 => q=3"
      ]
    },
    {
      "id": "A290_S17",
      "rule": "check p and r prime for q=3",
      "premises": [
        "A290_C19: r = q - 1, q prime >=3 odd => r even =2 => q=3"
      ],
      "conclusions": [
        "A290_C20: For q=3, p=7 prime, r=2 prime"
      ]
    },
    {
      "id": "A290_S18",
      "rule": "form solution triple",
      "premises": [
        "A290_C20: For q=3, p=7 prime, r=2 prime"
      ],
      "conclusions": [
        "A290_C21: Solution (p,q,r) = (7,3,2)"
      ]
    },
    {
      "id": "A290_S19",
      "rule": "case 2 assumption",
      "premises": [
        "A290_C9: Possible factor pairs (a,b) with a>=1, b>=3, a*b=4q: (1,4q), (2,2q), (4,q) if q>=3, (q,4) if q>=3"
      ],
      "conclusions": [
        "A290_C22: Case 2: a=2, b=2q => p = q + 2, r = 2q - 1"
      ]
    },
    {
      "id": "A290_S20",
      "rule": "consecutive integers mod 3",
      "premises": [
        "A290_C22: Case 2: a=2, b=2q => p = q + 2, r = 2q - 1"
      ],
      "conclusions": [
        "A290_C23: q, q+1, q+2 are three consecutive integers => exactly one divisible by 3"
      ]
    },
    {
      "id": "A290_S21",
      "rule": "subcase q ≡0 mod 3",
      "premises": [
        "A290_C23: q, q+1, q+2 are three consecutive integers => exactly one divisible by 3",
        "A290_C22: Case 2: a=2, b=2q => p = q + 2, r = 2q - 1",
        "A290_C3: p,q,r are prime numbers"
      ],
      "conclusions": [
        "A290_C24: If q ≡ 0 (mod 3), q=3 prime, p=5 prime, r=5 prime"
      ]
    },
    {
      "id": "A290_S22",
      "rule": "subcase q ≡1 mod 3",
      "premises": [
        "A290_C23: q, q+1, q+2 are three consecutive integers => exactly one divisible by 3"
      ],
      "conclusions": [
        "A290_C25: If q ≡ 1 (mod 3), then p = q+2 ≡ 0 (mod 3)"
      ]
    },
    {
      "id": "A290_S23",
      "rule": "prime mod 3",
      "premises": [
        "A290_C25: If q ≡ 1 (mod 3), then p = q+2 ≡ 0 (mod 3)",
        "A290_C3: p,q,r are prime numbers"
      ],
      "conclusions": [
        "A290_C26: p ≡ 0 (mod 3), p prime => p=3"
      ]
    },
    {
      "id": "A290_S24",
      "rule": "solve for q",
      "premises": [
        "A290_C26: p ≡ 0 (mod 3), p prime => p=3",
        "A290_C22: Case 2: a=2, b=2q => p = q + 2, r = 2q - 1"
      ],
      "conclusions": [
        "A290_C27: p=3 => q=1 not prime"
      ]
    },
    {
      "id": "A290_S25",
      "rule": "conclude no solution",
      "premises": [
        "A290_C27: p=3 => q=1 not prime"
      ],
      "conclusions": [
        "A290_C28: No solution if q ≡ 1 (mod 3)"
      ]
    },
    {
      "id": "A290_S26",
      "rule": "subcase q ≡2 mod 3",
      "premises": [
        "A290_C23: q, q+1, q+2 are three consecutive integers => exactly one divisible by 3"
      ],
      "conclusions": [
        "A290_C29: If q ≡ 2 (mod 3), then q+1 ≡ 0 (mod 3)"
      ]
    },
    {
      "id": "A290_S27",
      "rule": "compute r mod 3",
      "premises": [
        "A290_C29: If q ≡ 2 (mod 3), then q+1 ≡ 0 (mod 3)",
        "A290_C22: Case 2: a=2, b=2q => p = q + 2, r = 2q - 1"
      ],
      "conclusions": [
        "A290_C30: r = 2q - 1 ≡ 0 (mod 3)"
      ]
    },
    {
      "id": "A290_S28",
      "rule": "prime mod 3",
      "premises": [
        "A290_C30: r = 2q - 1 ≡ 0 (mod 3)",
        "A290_C3: p,q,r are prime numbers"
      ],
      "conclusions": [
        "A290_C31: r ≡ 0 (mod 3), r prime => r=3"
      ]
    },
    {
      "id": "A290_S29",
      "rule": "solve for q",
      "premises": [
        "A290_C31: r ≡ 0 (mod 3), r prime => r=3",
        "A290_C22: Case 2: a=2, b=2q => p = q + 2, r = 2q - 1"
      ],
      "conclusions": [
        "A290_C32: r=3 => q=2"
      ]
    },
    {
      "id": "A290_S30",
      "rule": "check p prime",
      "premises": [
        "A290_C32: r=3 => q=2",
        "A290_C22: Case 2: a=2, b=2q => p = q + 2, r = 2q - 1",
        "A290_C3: p,q,r are prime numbers"
      ],
      "conclusions": [
        "A290_C33: q=2, p=4 not prime"
      ]
    },
    {
      "id": "A290_S31",
      "rule": "conclude no solution",
      "premises": [
        "A290_C33: q=2, p=4 not prime"
      ],
      "conclusions": [
        "A290_C34: No solution if q ≡ 2 (mod 3)"
      ]
    },
    {
      "id": "A290_S32",
      "rule": "combine subcases for case 2",
      "premises": [
        "A290_C24: If q ≡ 0 (mod 3), q=3 prime, p=5 prime, r=5 prime",
        "A290_C28: No solution if q ≡ 1 (mod 3)",
        "A290_C34: No solution if q ≡ 2 (mod 3)"
      ],
      "conclusions": [
        "A290_C35: In case 2, only solution (p,q,r) = (5,3,5)"
      ]
    },
    {
      "id": "A290_S33",
      "rule": "collect all solutions",
      "premises": [
        "A290_C13: Solution (p,q,r) = (3,2,7)",
        "A290_C21: Solution (p,q,r) = (7,3,2)",
        "A290_C35: In case 2, only solution (p,q,r) = (5,3,5)",
        "A290_C17: No solution in case 4"
      ],
      "conclusions": [
        "A290_C36: Solutions: (3,2,7), (7,3,2), (5,3,5)"
      ]
    },
    {
      "id": "A806_S1",
      "rule": "problem setup",
      "premises": [
        "A806_C1: P(at original location after 2012 femtoseconds)"
      ],
      "conclusions": [
        "A806_C2: P = [P(same row after 2012)]^2 by symmetry and independence",
        "A806_C3: 2012 = 2*1006",
        "A806_C4: a_n = prob row 0 after 2n moves",
        "A806_C5: b_n = prob row 2 after 2n moves",
        "A806_C6: c_n = prob row 4 after 2n moves",
        "A806_C7: d_n = prob row 6 after 2n moves"
      ]
    },
    {
      "id": "A806_S2",
      "rule": "initial conditions",
      "premises": [
        "A806_C4: a_n = prob row 0 after 2n moves",
        "A806_C5: b_n = prob row 2 after 2n moves",
        "A806_C6: c_n = prob row 4 after 2n moves",
        "A806_C7: d_n = prob row 6 after 2n moves"
      ],
      "conclusions": [
        "A806_C8: a_0 = 1",
        "A806_C9: b_0 = 0",
        "A806_C10: c_0 = 0",
        "A806_C11: d_0 = 0"
      ]
    },
    {
      "id": "A806_S3",
      "rule": "derive recurrences from two-step transitions",
      "premises": [
        "A806_C4: a_n = prob row 0 after 2n moves",
        "A806_C5: b_n = prob row 2 after 2n moves",
        "A806_C6: c_n = prob row 4 after 2n moves",
        "A806_C7: d_n = prob row 6 after 2n moves"
      ],
      "conclusions": [
        "A806_C12: a_{n+1} = (1/2)a_n + (1/4)b_n + (1/4)d_n",
        "A806_C13: b_{n+1} = (1/2)b_n + (1/4)a_n + (1/4)c_n",
        "A806_C14: c_{n+1} = (1/2)c_n + (1/4)b_n + (1/4)d_n",
        "A806_C15: d_{n+1} = (1/2)d_n + (1/4)a_n + (1/4)c_n"
      ]
    },
    {
      "id": "A806_S4",
      "rule": "define s_n",
      "premises": [
        "A806_C4: a_n = prob row 0 after 2n moves",
        "A806_C6: c_n = prob row 4 after 2n moves"
      ],
      "conclusions": [
        "A806_C16: s_n = a_n + c_n"
      ]
    },
    {
      "id": "A806_S5",
      "rule": "add a and c recurrences",
      "premises": [
        "A806_C12: a_{n+1} = (1/2)a_n + (1/4)b_n + (1/4)d_n",
        "A806_C14: c_{n+1} = (1/2)c_n + (1/4)b_n + (1/4)d_n",
        "A806_C16: s_n = a_n + c_n"
      ],
      "conclusions": [
        "A806_C17: s_{n+1} = (1/2)s_n + (1/2)(b_n + d_n)"
      ]
    },
    {
      "id": "A806_S6",
      "rule": "establish symmetry b_n = d_n",
      "premises": [
        "A806_C9: b_0 = 0",
        "A806_C11: d_0 = 0",
        "A806_C13: b_{n+1} = (1/2)b_n + (1/4)a_n + (1/4)c_n",
        "A806_C15: d_{n+1} = (1/2)d_n + (1/4)a_n + (1/4)c_n"
      ],
      "conclusions": [
        "A806_C18: b_n = d_n for all n >= 0"
      ]
    },
    {
      "id": "A806_S7",
      "rule": "define e_n",
      "premises": [
        "A806_C18: b_n = d_n for all n >= 0"
      ],
      "conclusions": [
        "A806_C19: e_n = b_n = d_n"
      ]
    },
    {
      "id": "A806_S8",
      "rule": "total probability sum",
      "premises": [
        "A806_C4: a_n = prob row 0 after 2n moves",
        "A806_C5: b_n = prob row 2 after 2n moves",
        "A806_C6: c_n = prob row 4 after 2n moves",
        "A806_C7: d_n = prob row 6 after 2n moves",
        "A806_C16: s_n = a_n + c_n",
        "A806_C19: e_n = b_n = d_n"
      ],
      "conclusions": [
        "A806_C20: s_n + 2 e_n = 1"
      ]
    },
    {
      "id": "A806_S9",
      "rule": "solve for e_n",
      "premises": [
        "A806_C20: s_n + 2 e_n = 1"
      ],
      "conclusions": [
        "A806_C21: e_n = (1 - s_n)/2"
      ]
    },
    {
      "id": "A806_S10",
      "rule": "simplify s recurrence using b+d=2e",
      "premises": [
        "A806_C17: s_{n+1} = (1/2)s_n + (1/2)(b_n + d_n)",
        "A806_C19: e_n = b_n = d_n"
      ],
      "conclusions": [
        "A806_C22: s_{n+1} = (1/2) s_n + e_n"
      ]
    },
    {
      "id": "A806_S11",
      "rule": "substitute e_n into s recurrence",
      "premises": [
        "A806_C22: s_{n+1} = (1/2) s_n + e_n",
        "A806_C21: e_n = (1 - s_n)/2"
      ],
      "conclusions": [
        "A806_C23: s_{n+1} = 1/2"
      ]
    },
    {
      "id": "A806_S12",
      "rule": "simplify to constant",
      "premises": [
        "A806_C23: s_{n+1} = 1/2"
      ],
      "conclusions": [
        "A806_C24: s_n = 1/2 for n >= 1"
      ]
    },
    {
      "id": "A806_S13",
      "rule": "induction for s_n",
      "premises": [
        "A806_C23: s_{n+1} = 1/2",
        "A806_C8: a_0 = 1",
        "A806_C10: c_0 = 0"
      ],
      "conclusions": [
        "A806_C24: s_n = 1/2 for n >= 1"
      ]
    },
    {
      "id": "A806_S14",
      "rule": "define x_n",
      "premises": [
        "A806_C4: a_n = prob row 0 after 2n moves",
        "A806_C6: c_n = prob row 4 after 2n moves"
      ],
      "conclusions": [
        "A806_C25: x_n = a_n - c_n"
      ]
    },
    {
      "id": "A806_S15",
      "rule": "subtract a and c recurrences",
      "premises": [
        "A806_C12: a_{n+1} = (1/2)a_n + (1/4)b_n + (1/4)d_n",
        "A806_C14: c_{n+1} = (1/2)c_n + (1/4)b_n + (1/4)d_n",
        "A806_C25: x_n = a_n - c_n"
      ],
      "conclusions": [
        "A806_C26: x_{n+1} = (1/2) x_n"
      ]
    },
    {
      "id": "A806_S16",
      "rule": "initial x_0",
      "premises": [
        "A806_C8: a_0 = 1",
        "A806_C10: c_0 = 0"
      ],
      "conclusions": [
        "A806_C27: x_0 = 1"
      ]
    },
    {
      "id": "A806_S17",
      "rule": "solve linear recurrence",
      "premises": [
        "A806_C26: x_{n+1} = (1/2) x_n",
        "A806_C27: x_0 = 1"
      ],
      "conclusions": [
        "A806_C28: x_n = (1/2)^n"
      ]
    },
    {
      "id": "A806_S18",
      "rule": "express a_n in terms of s and x",
      "premises": [
        "A806_C16: s_n = a_n + c_n",
        "A806_C25: x_n = a_n - c_n"
      ],
      "conclusions": [
        "A806_C29: a_n = (s_n + x_n)/2"
      ]
    },
    {
      "id": "A806_S19",
      "rule": "set n=1006",
      "premises": [
        "A806_C3: 2012 = 2*1006"
      ],
      "conclusions": [
        "A806_C30: 1006 >= 1"
      ]
    },
    {
      "id": "A806_S20",
      "rule": "apply to s_1006",
      "premises": [
        "A806_C24: s_n = 1/2 for n >= 1",
        "A806_C30: 1006 >= 1"
      ],
      "conclusions": [
        "A806_C31: s_{1006} = 1/2"
      ]
    },
    {
      "id": "A806_S21",
      "rule": "apply to x_1006",
      "premises": [
        "A806_C28: x_n = (1/2)^n",
        "A806_C30: 1006 >= 1"
      ],
      "conclusions": [
        "A806_C32: x_{1006} = 2^{-1006}"
      ]
    },
    {
      "id": "A806_S22",
      "rule": "compute (s + x)/2 at n=1006",
      "premises": [
        "A806_C29: a_n = (s_n + x_n)/2",
        "A806_C31: s_{1006} = 1/2",
        "A806_C32: x_{1006} = 2^{-1006}"
      ],
      "conclusions": [
        "A806_C33: (1/2 + 2^{-1006})/2 = 2^{-2} + 2^{-1007}"
      ]
    },
    {
      "id": "A806_S23",
      "rule": "rewrite 1/4",
      "premises": [
        "A806_C33: (1/2 + 2^{-1006})/2 = 2^{-2} + 2^{-1007}"
      ],
      "conclusions": [
        "A806_C34: 2^{-2} = 2^{1005} / 2^{1007}"
      ]
    },
    {
      "id": "A806_S24",
      "rule": "combine fractions",
      "premises": [
        "A806_C33: (1/2 + 2^{-1006})/2 = 2^{-2} + 2^{-1007}",
        "A806_C34: 2^{-2} = 2^{1005} / 2^{1007}"
      ],
      "conclusions": [
        "A806_C35: a_{1006} = (1 + 2^{1005}) / 2^{1007}"
      ]
    },
    {
      "id": "A806_S25",
      "rule": "final probability",
      "premises": [
        "A806_C2: P = [P(same row after 2012)]^2 by symmetry and independence",
        "A806_C35: a_{1006} = (1 + 2^{1005}) / 2^{1007}"
      ],
      "conclusions": [
        "A806_C36: ((1 + 2^{1005}) / 2^{1007})^2"
      ]
    },
    {
      "id": "E1934_S1",
      "rule": "problem connection",
      "premises": [
        "E1934_C1: P(at original location after (r + 2009) femtoseconds)",
        "A290_C14: Case 4: a=q, b=4 => p=2q, r=3"
      ],
      "conclusions": [
        "A806_C1: P(at original location after 2012 femtoseconds)"
      ]
    }
  ]
}